import{d as h,r as m,o as d,c as f,a as N,n as ue,b as ce,_ as C,u as $,e as E,w as x,f as L,g as u,h as k,i as Z,j as fe,p as A,k as D,l as P,m as W,q as pe,s as V,t as _e,v as j,x as U,y as me,z as v,A as F,B as T,C as ye,D as he,F as J,E as ve,G as ge,H as be,I as Le,J as Te}from"../index.js";const Ce=h({__name:"TheScrollArea",props:{maxHeight:null},setup(e){const o=m({maxHeight:e.maxHeight||"calc(100vh - 220px)"});return(t,s)=>(d(),f("div",{class:"the-scroll-area",style:ue(o.value)},[N(t.$slots,"default")],4))}});const Be=h({__name:"TheTextContent",props:{important:{type:Boolean,default:!1},centered:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},setup(e){const n=e;return(o,t)=>(d(),f("div",{class:ce(["the-text-content",{important:n.important,centered:n.centered,small:n.small}])},[N(o.$slots,"default",{},void 0,!0)],2))}});const q=C(Be,[["__scopeId","data-v-c8828af0"]]),Ae=["innerHTML"],Pe=h({__name:"TheIntro",setup(e){const{t:n}=$();return(o,t)=>(d(),E(q,{small:!0},{default:x(()=>[L("div",{innerHTML:u(n)("index.widget_description")},null,8,Ae)]),_:1}))}});const xe={},$e={class:"the-headline"};function ke(e,n){return d(),f("div",$e,[N(e.$slots,"default",{},void 0,!0)])}const Y=C(xe,[["render",ke],["__scopeId","data-v-3506516f"]]),Re=["innerHTML"],Se=h({__name:"TheEmergencyHeader",setup(e){var s;const{t:n}=$(),{configuration:o}=k(),t=m((s=o.value)==null?void 0:s.emergencyNumber);return(l,i)=>t.value?(d(),E(Y,{key:0},{default:x(()=>[L("div",{innerHTML:u(n)("index.emergency_header",{emergencyNumber:t.value})},null,8,Re)]),_:1})):Z("",!0)}});const Oe=(e,n)=>{let o;return function(...t){const s=this;o&&clearTimeout(o),o=setTimeout(()=>{e.apply(s,t),o=null},n)}},we=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),K=(e,n,o)=>{for(const t in o){const s="set"+we(t);e[s]?U(()=>o[t],(l,i)=>{e[s](l,i)}):n[s]&&U(()=>o[t],l=>{n[s](l)})}},Q=e=>{const n={};for(const o in e)if(o.startsWith("on")&&!o.startsWith("onUpdate")&&o!=="onReady"){const t=o.slice(2).toLocaleLowerCase();n[t]=e[o]}return n},Me=async e=>{const n=await Promise.all([P(()=>import("./marker-icon-2x.e233d1a6.js"),[]),P(()=>import("./marker-icon.34d9a2d9.js"),[]),P(()=>import("./marker-shadow.ddd1f13b.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:n[0].default,iconUrl:n[1].default,shadowUrl:n[2].default})},w=e=>{const n=m(()=>console.warn(`Method ${e} has been invoked without being replaced`)),o=(...t)=>n.value(...t);return o.wrapped=n,A(e,o),o},M=(e,n)=>e.wrapped.value=n,I=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,X="useGlobalLeaflet",ee={options:{type:Object,default:()=>({})}},te=e=>({options:e.options,methods:{}}),Ie={...ee,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},Ee=(e,n,o)=>{const t=j("addLayer"),s=j("removeLayer"),{options:l,methods:i}=te(e),p={...l,attribution:e.attribution,pane:e.pane},y=()=>t({leafletObject:n.value}),g=()=>s({leafletObject:n.value}),_={...i,setAttribution(c,z){this.$parent.leafletObject.attributionControl.removeAttribution(z).addAttribution(c)},setName(){g(),e.visible&&y()},setLayerType(){g(),e.visible&&y()},setVisible(c){n.value&&(c?y():g())},bindPopup({leafletObject:c}){n.value.bindPopup(c)},bindTooltip({leafletObject:c}){n.value.bindTooltip(c)},unbindTooltip(){const c=n.value?n.value.getTooltip():null;c&&c.unbindTooltip()},unbindPopup(){const c=n.value?n.value.getPopup():null;c&&c.unbindPopup()},updateVisibleProp(c){o.emit("update:visible",c)}};return A("bindPopup",_.bindPopup),A("bindTooltip",_.bindTooltip),A("unbindTooltip",_.unbindTooltip),A("unbindPopup",_.unbindPopup),me(()=>{_.unbindPopup(),_.unbindTooltip(),g()}),{options:p,methods:_}},je={...Ie,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},ze=(e,n,o)=>{const{options:t,methods:s}=Ee(e,n,o);return{options:{...t,pane:e.pane,opacity:e.opacity,zIndex:e.zIndex,tileSize:e.tileSize,noWrap:e.noWrap,minZoom:e.minZoom,maxZoom:e.maxZoom},methods:{...s}}};var ne={emits:["ready","update:zoom","update:center","update:bounds"],props:{...ee,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!1}},setup(e,n){const o=m(null),t=fe({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:s}=te(e),l={...s,minZoom:e.minZoom,maxZoom:e.maxZoom,maxBounds:e.maxBounds,maxBoundsViscosity:e.maxBoundsViscosity,worldCopyJump:e.worldCopyJump,crs:e.crs,center:e.center,zoom:e.zoom,inertia:e.inertia,inertiaDeceleration:e.inertiaDeceleration,inertiaMaxSpeed:e.inertiaMaxSpeed,easeLinearity:e.easeLinearity,zoomAnimation:e.zoomAnimation,zoomAnimationThreshold:e.zoomAnimationThreshold,fadeAnimation:e.fadeAnimation,markerZoomAnimation:e.markerZoomAnimation},i=w("addLayer"),p=w("removeLayer"),y=w("registerControl"),g=w("registerLayerControl");A(X,e.useGlobalLeaflet);const _={moveEndHandler(){n.emit("update:zoom",t.leafletRef.getZoom()),n.emit("update:center",t.leafletRef.getCenter()),n.emit("update:bounds",t.leafletRef.getBounds())},overlayAddHandler(B){const b=t.layersInControl.find(R=>R.name===B.name);b&&b.updateVisibleProp(!0)},overlayRemoveHandler(B){const b=t.layersInControl.find(R=>R.name===B.name);b&&b.updateVisibleProp(!1)}};D(async()=>{e.useGlobalLeaflet&&(I.L=I.L||await P(()=>import("./leaflet-src.7f46f534.js").then(a=>a.l),[]));const{map:B,CRS:b,Icon:R,latLngBounds:se,latLng:le,DomEvent:ie}=e.useGlobalLeaflet?I.L:await P(()=>import("./leaflet-src.esm.5b8a8dab.js"),[]);try{l.beforeMapMount&&await l.beforeMapMount()}catch(a){console.error(`The following error occurred running the provided beforeMapMount hook ${a.message}`)}await Me(R);const re=typeof l.crs=="string"?b[l.crs]:l.crs;l.crs=re||b.EPSG3857;const S={addLayer(a){a.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd.push(a):t.layersInControl.find(O=>O.leafletObject._leaflet_id===a.leafletObject._leaflet_id)||(t.layerControl.addLayer(a),t.layersInControl.push(a))),a.visible!==!1&&t.leafletRef.addLayer(a.leafletObject)},removeLayer(a){a.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd=t.layersToAdd.filter(r=>r.name!==a.name):(t.layerControl.removeLayer(a.leafletObject),t.layersInControl=t.layersInControl.filter(r=>r.leafletObject._leaflet_id!==a.leafletObject._leaflet_id))),t.leafletRef.removeLayer(a.leafletObject)},registerLayerControl(a){t.layerControl=a,t.layersToAdd.forEach(r=>{t.layerControl.addLayer(r)}),t.layersToAdd=[],y(a)},registerControl(a){t.leafletRef.addControl(a.leafletObject)},setZoom(a){const r=t.leafletRef.getZoom();a!==r&&t.leafletRef.setZoom(a,{animate:e.noBlockingAnimations?!1:null})},setPaddingBottomRight(a){t.paddingBottomRight=a},setPaddingTopLeft(a){t.paddingTopLeft=a},setPadding(a){t.padding=a},setCrs(a){const r=t.leafletRef.getBounds();t.leafletRef.options.crs=a,t.leafletRef.fitBounds(r,{animate:!1,padding:[0,0]})},fitBounds(a){t.leafletRef.fitBounds(a,{animate:this.noBlockingAnimations?!1:null})},setBounds(a){if(!a)return;const r=se(a);if(!r.isValid())return;!(t.lastSetBounds||t.leafletRef.getBounds()).equals(r,0)&&(t.lastSetBounds=r,t.leafletRef.fitBounds(r,this.fitBoundsOptions))},setCenter(a){if(a==null)return;const r=le(a),O=t.lastSetCenter||t.leafletRef.getCenter();(O.lat!==r.lat||O.lng!==r.lng)&&(t.lastSetCenter=r,t.leafletRef.panTo(r,{animate:this.noBlockingAnimations?!1:null}))}};M(i,S.addLayer),M(p,S.removeLayer),M(y,S.registerControl),M(g,S.registerLayerControl),t.leafletRef=B(o.value,l),K(S,t.leafletRef,e);const de=Q(n.attrs);t.leafletRef.on("moveend",Oe(_.moveEndHandler,100)),t.leafletRef.on("overlayadd",_.overlayAddHandler),t.leafletRef.on("overlayremove",_.overlayRemoveHandler),ie.on(t.leafletRef,de),t.ready=!0,W(()=>n.emit("ready",t.leafletRef))}),pe(()=>{t.leafletRef&&t.leafletRef.remove()});const c=V(()=>t.leafletRef),z=V(()=>t.ready);return{root:o,ready:z,leafletObject:c}},render(){return _e("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};ne.__file="src/components/LMap.vue";const oe={...je,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},He=(e,n)=>{const{options:o,methods:t}=ze(e,n);return{options:{...o,tms:e.tms,subdomains:e.subdomains,detectRetina:e.detectRetina},methods:{...t}}};var ae={props:oe,setup(e,n){const o=m({}),t=j(X),s=j("addLayer"),{options:l,methods:i}=He(e,o);return D(async()=>{const{tileLayer:p,DomEvent:y}=t?I.L:await P(()=>import("./leaflet-src.esm.5b8a8dab.js"),[]);o.value=p(e.url,l);const g=Q(n.attrs);y.on(o.value,g),K(i,o.value,e),s({...e,...i,leafletObject:o.value}),W(()=>n.emit("ready",o.value))}),{leafletObject:o}},render(){return null}};ae.__file="src/components/LTileLayer.vue";({...oe});const Ne={key:0,id:"the-map"},Ze={key:1},De={key:2},Ve=h({__name:"TheMap",setup(e){const n=m(null),o=m(null),t=m("Unknown error"),s=i=>{n.value=[i.coords.latitude,i.coords.longitude],o.value=!0},l=i=>{i.code===1&&(t.value="Access not granted."),i.code===2&&(t.value="Could not retrieve your current location."),o.value=!1};return D(()=>{const i=navigator.geolocation||null;!i||i.getCurrentPosition(s,l)}),(i,p)=>o.value?(d(),f("div",Ne,[v(u(ne),{style:{height:"100%",width:"100%"},zoom:14,center:n.value},{default:x(()=>[v(u(ae),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"})]),_:1},8,["center"])])):o.value===null?(d(),f("div",Ze,"Waiting for permission ...")):(d(),f("div",De,"You did not grant access to retrieve your location."))}});const Ue=C(Ve,[["__scopeId","data-v-40c1e81a"]]);function Ge(){const{t:e}=$();return{safeLink:o=>{window.confirm(e("index.safe_link_note"))&&(self.location.href=o)}}}const We=e=>(ye("data-v-f007fc73"),e=e(),he(),e),Fe={class:"the-modules"},Je=["href"],qe=We(()=>L("br",null,null,-1)),Ye={class:"the-small"},Ke=h({__name:"TheModules",setup(e){const{t:n}=$(),{configuration:o,currentModule:t}=k(),{safeLink:s}=Ge(),l=()=>{t.value={component:Ue}};return(i,p)=>(d(),f("div",Fe,[L("a",{class:"the-module",href:`tel:${u(o).institution.phone}`},[F(T(u(n)("call_institution",{institution:u(o).institution.name})),1),qe,L("span",Ye,T(u(o).institution.phone),1)],8,Je),L("a",{class:"the-module",onClick:p[0]||(p[0]=y=>l())},T(u(n)("find_a_safe_help_resource")),1),u(o).institution.chat?(d(),f("a",{key:0,class:"the-module",onClick:p[1]||(p[1]=y=>u(s)(u(o).institution.chat))},T(u(n)("go_to_live_chat")),1)):Z("",!0)]))}});const Qe=C(Ke,[["__scopeId","data-v-f007fc73"]]),Xe=["innerHTML"],et=h({__name:"TheContentPage",props:{contentPage:null},setup(e){const n=e;return(o,t)=>(d(),f(J,null,[v(Y,null,{default:x(()=>[F(T(n.contentPage.title),1)]),_:1}),v(q,null,{default:x(()=>[L("div",{innerHTML:n.contentPage.content},null,8,Xe)]),_:1})],64))}}),H=m(""),G=document.getElementById("vida-script");H.value=G instanceof HTMLScriptElement?G.src.split("/").slice(0,-1).join("/")+"/":"/";function tt(){return{baseUrl:H,replacePublicPaths:n=>n.replaceAll("__public/",H.value)}}function nt(){const{configuration:e}=k(),{replacePublicPaths:n}=tt(),{t:o}=$();if(!e.value)throw new Error("Content pages can not be provided before initializing configuration");const t=m([{title:o("content_page.universal_hand_signal.title"),content:o("content_page.universal_hand_signal.content")},{title:o("content_page.what_can_you_do.title"),content:o("content_page.what_can_you_do.content")},{title:`Information about ${e.value.institution.name}`,content:`${e.value.institution.information}`},{title:o("content_page.about_this_widget.title"),content:o("content_page.about_this_widget.content")}]);return{contentPages:m(t.value.map(l=>({title:l.title,content:n(l.content)})))}}const ot={class:"the-content-pages"},at=["onClick"],st=h({__name:"TheContentPages",setup(e){const{currentModule:n}=k(),{contentPages:o}=nt(),t=s=>{n.value={component:et,props:{contentPage:s}}};return(s,l)=>(d(),f("div",ot,[(d(!0),f(J,null,ve(u(o),i=>(d(),f("div",{key:i.title},[L("a",{href:"#",onClick:ge(p=>t(i),["prevent"])},T(i.title),9,at)]))),128))]))}});const lt=C(st,[["__scopeId","data-v-f3da26ff"]]),it=h({__name:"TheBackButton",setup(e){const{t:n}=$(),{currentModule:o}=k(),t=()=>{o.value=null};return(s,l)=>(d(),f("div",{class:"the-back",onClick:t},"< "+T(u(n)("back")),1))}});const rt=C(it,[["__scopeId","data-v-4ae77788"]]),dt={class:"the-help-center"},ut={key:0},ct={key:1},ft=h({__name:"TheHelpCenter",setup(e){const{currentModule:n}=k();return(o,t)=>(d(),f("div",dt,[u(n)?(d(),E(rt,{key:0})):Z("",!0),v(Ce,null,{default:x(()=>[u(n)?(d(),f("div",ct,[(d(),E(Te(u(n).component),be(Le(u(n).props)),null,16))])):(d(),f("div",ut,[v(Pe),v(Se),v(Qe),v(lt)]))]),_:1})]))}});const mt=C(ft,[["__scopeId","data-v-59312bc9"]]);export{mt as default};
