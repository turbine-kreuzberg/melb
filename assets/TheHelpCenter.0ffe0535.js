import{d as At,r as Bt,o as st,c as ft,a as Di,n as Lo,b as xs,_ as ee,u as fe,e as Ue,w as Ce,f as Yt,g as ot,h as we,i as Xi,j as Yi,t as Xt,k as Co,l as Qt,m as wo,p as To,q as Io,F as Ls,s as bo,v as So,x as Eo,y as Oo,z as Bo}from"../index.js";const Ao=At({__name:"TheScrollArea",props:{maxHeight:null},setup(m){const v=Bt({maxHeight:m.maxHeight||"calc(100vh - 220px)"});return(E,w)=>(st(),ft("div",{class:"the-scroll-area",style:Lo(v.value)},[Di(E.$slots,"default")],4))}});const Mo=At({__name:"TheTextContent",props:{important:{type:Boolean,default:!1},centered:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},setup(m){const r=m;return(v,E)=>(st(),ft("div",{class:xs(["the-text-content",{important:r.important,centered:r.centered,small:r.small}])},[Di(v.$slots,"default",{},void 0,!0)],2))}});const Nn=ee(Mo,[["__scopeId","data-v-c8828af0"]]),No=["innerHTML"],Do=At({__name:"TheIntro",setup(m){const{t:r}=fe();return(v,E)=>(st(),Ue(Nn,{small:!0},{default:Ce(()=>[Yt("div",{innerHTML:ot(r)("index.widget_description")},null,8,No)]),_:1}))}});const Xo={},Yo={class:"the-headline"};function ko(m,r){return st(),ft("div",Yo,[Di(m.$slots,"default",{},void 0,!0)])}const Cs=ee(Xo,[["render",ko],["__scopeId","data-v-3506516f"]]),Ro=["innerHTML"],zo=At({__name:"TheEmergencyHeader",setup(m){var w;const{t:r}=fe(),{configuration:v}=we(),E=Bt((w=v.value)==null?void 0:w.emergencyNumber);return(S,B)=>E.value?(st(),Ue(Cs,{key:0},{default:Ce(()=>[Yt("div",{innerHTML:ot(r)("index.emergency_header",{emergencyNumber:E.value})},null,8,Ro)]),_:1})):Xi("",!0)}});var Zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},On={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(m,r){(function(v,E){E(r)})(Zo,function(v){var E="1.8.0";function w(t){var i,o,l,u;for(o=1,l=arguments.length;o<l;o++){u=arguments[o];for(i in u)t[i]=u[i]}return t}var S=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function B(t,i){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var l=o.call(arguments,2);return function(){return t.apply(i,l.length?l.concat(o.call(arguments)):arguments)}}var C=0;function O(t){return"_leaflet_id"in t||(t._leaflet_id=++C),t._leaflet_id}function xt(t,i,o){var l,u,d,_;return _=function(){l=!1,u&&(d.apply(o,u),u=!1)},d=function(){l?u=arguments:(t.apply(o,arguments),setTimeout(_,i),l=!0)},d}function yt(t,i,o){var l=i[1],u=i[0],d=l-u;return t===l&&o?t:((t-u)%d+d)%d+u}function j(){return!1}function lt(t,i){if(i===!1)return t;var o=Math.pow(10,i===void 0?6:i);return Math.round(t*o)/o}function pt(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Lt(t){return pt(t).split(/\s+/)}function J(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?S(t.options):{});for(var o in i)t.options[o]=i[o];return t.options}function _t(t,i,o){var l=[];for(var u in t)l.push(encodeURIComponent(o?u.toUpperCase():u)+"="+encodeURIComponent(t[u]));return(!i||i.indexOf("?")===-1?"?":"&")+l.join("&")}var Ge=/\{ *([\w_ -]+) *\}/g;function Te(t,i){return t.replace(Ge,function(o,l){var u=i[l];if(u===void 0)throw new Error("No value provided for variable "+o);return typeof u=="function"&&(u=u(i)),u})}var Ct=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Ie(t,i){for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1}var gt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function be(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Ve=0;function Je(t){var i=+new Date,o=Math.max(0,16-(i-Ve));return Ve=i+o,window.setTimeout(t,o)}var Se=window.requestAnimationFrame||be("RequestAnimationFrame")||Je,Ke=window.cancelAnimationFrame||be("CancelAnimationFrame")||be("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ct(t,i,o){if(o&&Se===Je)t.call(i);else return Se.call(window,B(t,i))}function ht(t){t&&Ke.call(window,t)}var ki={__proto__:null,extend:w,create:S,bind:B,get lastId(){return C},stamp:O,throttle:xt,wrapNum:yt,falseFn:j,formatNum:lt,trim:pt,splitWords:Lt,setOptions:J,getParamString:_t,template:Te,isArray:Ct,indexOf:Ie,emptyImageUrl:gt,requestFn:Se,cancelFn:Ke,requestAnimFrame:ct,cancelAnimFrame:ht};function It(){}It.extend=function(t){var i=function(){J(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,l=S(o);l.constructor=i,i.prototype=l;for(var u in this)Object.prototype.hasOwnProperty.call(this,u)&&u!=="prototype"&&u!=="__super__"&&(i[u]=this[u]);return t.statics&&w(i,t.statics),t.includes&&(Ri(t.includes),w.apply(null,[l].concat(t.includes))),w(l,t),delete l.statics,delete l.includes,l.options&&(l.options=o.options?S(o.options):{},w(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,_=l._initHooks.length;d<_;d++)l._initHooks[d].call(this)}},i},It.include=function(t){var i=this.prototype.options;return w(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},It.mergeOptions=function(t){return w(this.prototype.options,t),this},It.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function Ri(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Ct(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var mt={on:function(t,i,o){if(typeof t=="object")for(var l in t)this._on(l,t[l],i);else{t=Lt(t);for(var u=0,d=t.length;u<d;u++)this._on(t[u],i,o)}return this},off:function(t,i,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],i);else{t=Lt(t);for(var u=arguments.length===1,d=0,_=t.length;d<_;d++)u?this._off(t[d]):this._off(t[d],i,o)}return this},_on:function(t,i,o){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}this._events=this._events||{};var l=this._events[t];l||(l=[],this._events[t]=l),o===this&&(o=void 0);for(var u={fn:i,ctx:o},d=l,_=0,P=d.length;_<P;_++)if(d[_].fn===i&&d[_].ctx===o)return;d.push(u)},_off:function(t,i,o){var l,u,d;if(!!this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(u=0,d=l.length;u<d;u++)l[u].fn=j;delete this._events[t];return}if(o===this&&(o=void 0),typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}for(u=0,d=l.length;u<d;u++){var _=l[u];if(_.ctx===o&&_.fn===i){this._firingCount&&(_.fn=j,this._events[t]=l=l.slice()),l.splice(u,1);return}}console.warn("listener not found")}},fire:function(t,i,o){if(!this.listens(t,o))return this;var l=w({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var u=this._events[t];if(u){this._firingCount=this._firingCount+1||1;for(var d=0,_=u.length;d<_;d++){var P=u[d];P.fn.call(P.ctx||this,l)}this._firingCount--}}return o&&this._propagateEvent(l),this},listens:function(t,i){typeof t!="string"&&console.warn('"string" type argument expected');var o=this._events&&this._events[t];if(o&&o.length)return!0;if(i){for(var l in this._eventParents)if(this._eventParents[l].listens(t,i))return!0}return!1},once:function(t,i,o){if(typeof t=="object"){for(var l in t)this.once(l,t[l],i);return this}var u=B(function(){this.off(t,i,o).off(t,u,o)},this);return this.on(t,i,o).on(t,u,o)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[O(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[O(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,w({layer:t.target,propagatedFrom:t.target},t),!0)}};mt.addEventListener=mt.on,mt.removeEventListener=mt.clearAllEventListeners=mt.off,mt.addOneTimeEventListener=mt.once,mt.fireEvent=mt.fire,mt.hasEventListeners=mt.listens;var ie=It.extend(mt);function k(t,i,o){this.x=o?Math.round(t):t,this.y=o?Math.round(i):i}var $e=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(W(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(W(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new k(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new k(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$e(this.x),this.y=$e(this.y),this},distanceTo:function(t){t=W(t);var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(t){return t=W(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=W(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+lt(this.x)+", "+lt(this.y)+")"}};function W(t,i,o){return t instanceof k?t:Ct(t)?new k(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new k(t.x,t.y):new k(t,i,o)}function Q(t,i){if(!!t)for(var o=i?[t,i]:t,l=0,u=o.length;l<u;l++)this.extend(o[l])}Q.prototype={extend:function(t){return t=W(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new k(this.min.x,this.max.y)},getTopRight:function(){return new k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,o;return typeof t[0]=="number"||t instanceof k?t=W(t):t=Pt(t),t instanceof Q?(i=t.min,o=t.max):i=o=t,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=Pt(t);var i=this.min,o=this.max,l=t.min,u=t.max,d=u.x>=i.x&&l.x<=o.x,_=u.y>=i.y&&l.y<=o.y;return d&&_},overlaps:function(t){t=Pt(t);var i=this.min,o=this.max,l=t.min,u=t.max,d=u.x>i.x&&l.x<o.x,_=u.y>i.y&&l.y<o.y;return d&&_},isValid:function(){return!!(this.min&&this.max)}};function Pt(t,i){return!t||t instanceof Q?t:new Q(t,i)}function nt(t,i){if(!!t)for(var o=i?[t,i]:t,l=0,u=o.length;l<u;l++)this.extend(o[l])}nt.prototype={extend:function(t){var i=this._southWest,o=this._northEast,l,u;if(t instanceof K)l=t,u=t;else if(t instanceof nt){if(l=t._southWest,u=t._northEast,!l||!u)return this}else return t?this.extend(tt(t)||rt(t)):this;return!i&&!o?(this._southWest=new K(l.lat,l.lng),this._northEast=new K(u.lat,u.lng)):(i.lat=Math.min(l.lat,i.lat),i.lng=Math.min(l.lng,i.lng),o.lat=Math.max(u.lat,o.lat),o.lng=Math.max(u.lng,o.lng)),this},pad:function(t){var i=this._southWest,o=this._northEast,l=Math.abs(i.lat-o.lat)*t,u=Math.abs(i.lng-o.lng)*t;return new nt(new K(i.lat-l,i.lng-u),new K(o.lat+l,o.lng+u))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof K||"lat"in t?t=tt(t):t=rt(t);var i=this._southWest,o=this._northEast,l,u;return t instanceof nt?(l=t.getSouthWest(),u=t.getNorthEast()):l=u=t,l.lat>=i.lat&&u.lat<=o.lat&&l.lng>=i.lng&&u.lng<=o.lng},intersects:function(t){t=rt(t);var i=this._southWest,o=this._northEast,l=t.getSouthWest(),u=t.getNorthEast(),d=u.lat>=i.lat&&l.lat<=o.lat,_=u.lng>=i.lng&&l.lng<=o.lng;return d&&_},overlaps:function(t){t=rt(t);var i=this._southWest,o=this._northEast,l=t.getSouthWest(),u=t.getNorthEast(),d=u.lat>i.lat&&l.lat<o.lat,_=u.lng>i.lng&&l.lng<o.lng;return d&&_},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=rt(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function rt(t,i){return t instanceof nt?t:new nt(t,i)}function K(t,i,o){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,o!==void 0&&(this.alt=+o)}K.prototype={equals:function(t,i){if(!t)return!1;t=tt(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+lt(this.lat,t)+", "+lt(this.lng,t)+")"},distanceTo:function(t){return Mt.distance(this,tt(t))},wrap:function(){return Mt.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,o=i/Math.cos(Math.PI/180*this.lat);return rt([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function tt(t,i,o){return t instanceof K?t:Ct(t)&&typeof t[0]!="object"?t.length===3?new K(t[0],t[1],t[2]):t.length===2?new K(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new K(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new K(t,i,o)}var bt={latLngToPoint:function(t,i){var o=this.projection.project(t),l=this.scale(i);return this.transformation._transform(o,l)},pointToLatLng:function(t,i){var o=this.scale(i),l=this.transformation.untransform(t,o);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(t),l=this.transformation.transform(i.min,o),u=this.transformation.transform(i.max,o);return new Q(l,u)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?yt(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?yt(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new K(o,i,l)},wrapLatLngBounds:function(t){var i=t.getCenter(),o=this.wrapLatLng(i),l=i.lat-o.lat,u=i.lng-o.lng;if(l===0&&u===0)return t;var d=t.getSouthWest(),_=t.getNorthEast(),P=new K(d.lat-l,d.lng-u),x=new K(_.lat-l,_.lng-u);return new nt(P,x)}},Mt=w({},bt,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var o=Math.PI/180,l=t.lat*o,u=i.lat*o,d=Math.sin((i.lat-t.lat)*o/2),_=Math.sin((i.lng-t.lng)*o/2),P=d*d+Math.cos(l)*Math.cos(u)*_*_,x=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*x}}),je=6378137,St={R:je,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,o=this.MAX_LATITUDE,l=Math.max(Math.min(o,t.lat),-o),u=Math.sin(l*i);return new k(this.R*t.lng*i,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(t){var i=180/Math.PI;return new K((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=je*Math.PI;return new Q([-t,-t],[t,t])}()};function Ee(t,i,o,l){if(Ct(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=o,this._d=l}Ee.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new k((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function ne(t,i,o,l){return new Ee(t,i,o,l)}var Oe=w({},Mt,{code:"EPSG:3857",projection:St,transformation:function(){var t=.5/(Math.PI*St.R);return ne(t,.5,-t,.5)}()}),zi=w({},Oe,{code:"EPSG:900913"});function Qe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ti(t,i){var o="",l,u,d,_,P,x;for(l=0,d=t.length;l<d;l++){for(P=t[l],u=0,_=P.length;u<_;u++)x=P[u],o+=(u?"L":"M")+x.x+" "+x.y;o+=i?N.svg?"z":"x":""}return o||"M0 0"}var Be=document.documentElement.style,ce="ActiveXObject"in window,Zi=ce&&!document.addEventListener,ei="msLaunchUri"in navigator&&!("documentMode"in document),Ae=wt("webkit"),ii=wt("android"),ni=wt("android 2")||wt("android 3"),Fi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wi=ii&&wt("Google")&&Fi<537&&!("AudioNode"in window),Me=!!window.opera,si=!ei&&wt("chrome"),oi=wt("gecko")&&!Ae&&!Me&&!ce,qi=!si&&wt("safari"),ri=wt("phantom"),ai="OTransition"in Be,Hi=navigator.platform.indexOf("Win")===0,li=ce&&"transition"in Be,Ne="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ni,de="MozPerspective"in Be,Ui=!window.L_DISABLE_3D&&(li||Ne||de)&&!ai&&!ri,qt=typeof orientation<"u"||wt("mobile"),Gi=qt&&Ae,hi=qt&&Ne,ui=!window.PointerEvent&&window.MSPointerEvent,fi=!!(window.PointerEvent||ui),ci="ontouchstart"in window||!!window.TouchEvent,Vi=!window.L_NO_TOUCH&&(ci||fi),Ji=qt&&Me,Ki=qt&&oi,$i=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ji=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",j,i),window.removeEventListener("testPassiveEventSupport",j,i)}catch{}return t}(),Qi=function(){return!!document.createElement("canvas").getContext}(),De=!!(document.createElementNS&&Qe("svg").createSVGRect),tn=!!De&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),en=!De&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}();function wt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var N={ie:ce,ielt9:Zi,edge:ei,webkit:Ae,android:ii,android23:ni,androidStock:Wi,opera:Me,chrome:si,gecko:oi,safari:qi,phantom:ri,opera12:ai,win:Hi,ie3d:li,webkit3d:Ne,gecko3d:de,any3d:Ui,mobile:qt,mobileWebkit:Gi,mobileWebkit3d:hi,msPointer:ui,pointer:fi,touch:Vi,touchNative:ci,mobileOpera:Ji,mobileGecko:Ki,retina:$i,passiveEvents:ji,canvas:Qi,svg:De,vml:en,inlineSvg:tn},di=N.msPointer?"MSPointerDown":"pointerdown",pi=N.msPointer?"MSPointerMove":"pointermove",_i=N.msPointer?"MSPointerUp":"pointerup",mi=N.msPointer?"MSPointerCancel":"pointercancel",Xe={touchstart:di,touchmove:pi,touchend:_i,touchcancel:mi},vi={touchstart:rn,touchmove:pe,touchend:pe,touchcancel:pe},Ht={},yi=!1;function nn(t,i,o){return i==="touchstart"&&on(),vi[i]?(o=vi[i].bind(this,o),t.addEventListener(Xe[i],o,!1),o):(console.warn("wrong event specified:",i),L.Util.falseFn)}function se(t,i,o){if(!Xe[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(Xe[i],o,!1)}function gi(t){Ht[t.pointerId]=t}function sn(t){Ht[t.pointerId]&&(Ht[t.pointerId]=t)}function Pi(t){delete Ht[t.pointerId]}function on(){yi||(document.addEventListener(di,gi,!0),document.addEventListener(pi,sn,!0),document.addEventListener(_i,Pi,!0),document.addEventListener(mi,Pi,!0),yi=!0)}function pe(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var o in Ht)i.touches.push(Ht[o]);i.changedTouches=[i],t(i)}}function rn(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&dt(i),pe(t,i)}function Ut(t){var i={},o,l;for(l in t)o=t[l],i[l]=o&&o.bind?o.bind(t):o;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var an=200;function ln(t,i){t.addEventListener("dblclick",i);var o=0,l;function u(d){if(d.detail!==1){l=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var _=Date.now();_-o<=an?(l++,l===2&&i(Ut(d))):l=1,o=_}}return t.addEventListener("click",u),{dblclick:i,simDblclick:u}}function hn(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var Ye=n(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oe=n(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xi=oe==="webkitTransition"||oe==="OTransition"?oe+"End":"transitionend";function Li(t){return typeof t=="string"?document.getElementById(t):t}function re(t,i){var o=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!o||o==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);o=l?l[i]:null}return o==="auto"?null:o}function U(t,i,o){var l=document.createElement(t);return l.className=i||"",o&&o.appendChild(l),l}function Z(t){var i=t.parentNode;i&&i.removeChild(t)}function _e(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Gt(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function Vt(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function z(t,i){if(t.classList!==void 0)return t.classList.contains(i);var o=me(t);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)}function R(t,i){if(t.classList!==void 0)for(var o=Lt(i),l=0,u=o.length;l<u;l++)t.classList.add(o[l]);else if(!z(t,i)){var d=me(t);ke(t,(d?d+" ":"")+i)}}function it(t,i){t.classList!==void 0?t.classList.remove(i):ke(t,pt((" "+me(t)+" ").replace(" "+i+" "," ")))}function ke(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function me(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function vt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&e(t,i)}function e(t,i){var o=!1,l="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(l)}catch{if(i===1)return}i=Math.round(i*100),o?(o.Enabled=i!==100,o.Opacity=i):t.style.filter+=" progid:"+l+"(opacity="+i+")"}function n(t){for(var i=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in i)return t[o];return!1}function s(t,i,o){var l=i||new k(0,0);t.style[Ye]=(N.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(o?" scale("+o+")":"")}function a(t,i){t._leaflet_pos=i,N.any3d?s(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function h(t){return t._leaflet_pos||new k(0,0)}var f,c,p;if("onselectstart"in document)f=function(){Y(window,"selectstart",dt)},c=function(){$(window,"selectstart",dt)};else{var y=n(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f=function(){if(y){var t=document.documentElement.style;p=t[y],t[y]="none"}},c=function(){y&&(document.documentElement.style[y]=p,p=void 0)}}function g(){Y(window,"dragstart",dt)}function T(){$(window,"dragstart",dt)}var b,A;function X(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(D(),b=t,A=t.style.outline,t.style.outline="none",Y(window,"keydown",D))}function D(){!b||(b.style.outline=A,b=void 0,A=void 0,$(window,"keydown",D))}function F(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function et(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var ut={__proto__:null,TRANSFORM:Ye,TRANSITION:oe,TRANSITION_END:xi,get:Li,getStyle:re,create:U,remove:Z,empty:_e,toFront:Gt,toBack:Vt,hasClass:z,addClass:R,removeClass:it,setClass:ke,getClass:me,setOpacity:vt,testProp:n,setTransform:s,setPosition:a,getPosition:h,get disableTextSelection(){return f},get enableTextSelection(){return c},disableImageDrag:g,enableImageDrag:T,preventOutline:X,restoreOutline:D,getSizedParentNode:F,getScale:et};function Y(t,i,o,l){if(i&&typeof i=="object")for(var u in i)fn(t,u,i[u],o);else{i=Lt(i);for(var d=0,_=i.length;d<_;d++)fn(t,i[d],o,l)}return this}var Tt="_leaflet_events";function $(t,i,o,l){if(arguments.length===1)kt(t),delete t[Tt];else if(i&&typeof i=="object")for(var u in i)cn(t,u,i[u],o);else if(i=Lt(i),arguments.length===2)kt(t,function(P){return Ie(i,P)!==-1});else for(var d=0,_=i.length;d<_;d++)cn(t,i[d],o,l);return this}function kt(t,i){for(var o in t[Tt]){var l=o.split(/\d/)[0];(!i||i(l))&&cn(t,l,null,null,o)}}var un={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fn(t,i,o,l){var u=i+O(o)+(l?"_"+O(l):"");if(t[Tt]&&t[Tt][u])return this;var d=function(P){return o.call(l||t,P||window.event)},_=d;!N.touchNative&&N.pointer&&i.indexOf("touch")===0?d=nn(t,i,d):N.touch&&i==="dblclick"?d=ln(t,d):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(un[i]||i,d,N.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(d=function(P){P=P||window.event,pn(t,P)&&_(P)},t.addEventListener(un[i],d,!1)):t.addEventListener(i,_,!1):t.attachEvent("on"+i,d),t[Tt]=t[Tt]||{},t[Tt][u]=d}function cn(t,i,o,l,u){u=u||i+O(o)+(l?"_"+O(l):"");var d=t[Tt]&&t[Tt][u];if(!d)return this;!N.touchNative&&N.pointer&&i.indexOf("touch")===0?se(t,i,d):N.touch&&i==="dblclick"?hn(t,d):"removeEventListener"in t?t.removeEventListener(un[i]||i,d,!1):t.detachEvent("on"+i,d),t[Tt][u]=null}function ae(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function dn(t){return fn(t,"wheel",ae),this}function Re(t){return Y(t,"mousedown touchstart dblclick contextmenu",ae),t._leaflet_disable_click=!0,this}function dt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function le(t){return dt(t),ae(t),this}function Xn(t,i){if(!i)return new k(t.clientX,t.clientY);var o=et(i),l=o.boundingClientRect;return new k((t.clientX-l.left)/o.x-i.clientLeft,(t.clientY-l.top)/o.y-i.clientTop)}var Ss=N.win&&N.chrome?2*window.devicePixelRatio:N.gecko?window.devicePixelRatio:1;function Yn(t){return N.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Ss:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function pn(t,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Es={__proto__:null,on:Y,off:$,stopPropagation:ae,disableScrollPropagation:dn,disableClickPropagation:Re,preventDefault:dt,stop:le,getMousePosition:Xn,getWheelDelta:Yn,isExternalTarget:pn,addListener:Y,removeListener:$},kn=ie.extend({run:function(t,i,o,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=h(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=ct(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,o=this._duration*1e3;i<o?this._runFrame(this._easeOut(i/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var o=this._startPos.add(this._offset.multiplyBy(t));i&&o._round(),a(this._el,o),this.fire("step")},_complete:function(){ht(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),G=ie.extend({options:{crs:Oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=J(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=B(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(tt(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oe&&N.any3d&&!N.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Y(this._proxy,xi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(tt(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=w({animate:o.animate},o.zoom),o.pan=w({animate:o.animate,duration:o.duration},o.pan));var l=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var l=this.getZoomScale(i),u=this.getSize().divideBy(2),d=t instanceof k?t:this.latLngToContainerPoint(t),_=d.subtract(u).multiplyBy(1-1/l),P=this.containerPointToLatLng(u.add(_));return this.setView(P,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():rt(t);var o=W(i.paddingTopLeft||i.padding||[0,0]),l=W(i.paddingBottomRight||i.padding||[0,0]),u=this.getBoundsZoom(t,!1,o.add(l));if(u=typeof i.maxZoom=="number"?Math.min(i.maxZoom,u):u,u===1/0)return{center:t.getCenter(),zoom:u};var d=l.subtract(o).divideBy(2),_=this.project(t.getSouthWest(),u),P=this.project(t.getNorthEast(),u),x=this.unproject(_.add(P).divideBy(2).add(d),u);return{center:x,zoom:u}},fitBounds:function(t,i){if(t=rt(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=W(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){R(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,o){if(o=o||{},o.animate===!1||!N.any3d)return this.setView(t,i,o);this._stop();var l=this.project(this.getCenter()),u=this.project(t),d=this.getSize(),_=this._zoom;t=tt(t),i=i===void 0?_:i;var P=Math.max(d.x,d.y),x=P*this.getZoomScale(_,i),I=u.distanceTo(l)||1,M=1.42,q=M*M;function V(at){var Ni=at?-1:1,yo=at?x:P,go=x*x-P*P+Ni*q*q*I*I,Po=2*yo*q*I,In=go/Po,ms=Math.sqrt(In*In+1)-In,xo=ms<1e-9?-18:Math.log(ms);return xo}function Wt(at){return(Math.exp(at)-Math.exp(-at))/2}function ue(at){return(Math.exp(at)+Math.exp(-at))/2}function Mi(at){return Wt(at)/ue(at)}var $t=V(0);function Tn(at){return P*(ue($t)/ue($t+M*at))}function po(at){return P*(ue($t)*Mi($t+M*at)-Wt($t))/q}function _o(at){return 1-Math.pow(1-at,1.5)}var mo=Date.now(),ps=(V(1)-$t)/M,vo=o.duration?1e3*o.duration:1e3*ps*.8;function _s(){var at=(Date.now()-mo)/vo,Ni=_o(at)*ps;at<=1?(this._flyToFrame=ct(_s,this),this._move(this.unproject(l.add(u.subtract(l).multiplyBy(po(Ni)/I)),_),this.getScaleZoom(P/Tn(Ni),_),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),_s.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(t){if(t=rt(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),l=this._limitCenter(o,this._zoom,rt(t));return o.equals(l)||this.panTo(l,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var o=W(i.paddingTopLeft||i.padding||[0,0]),l=W(i.paddingBottomRight||i.padding||[0,0]),u=this.project(this.getCenter()),d=this.project(t),_=this.getPixelBounds(),P=Pt([_.min.add(o),_.max.subtract(l)]),x=P.getSize();if(!P.contains(d)){this._enforcingBounds=!0;var I=d.subtract(P.getCenter()),M=P.extend(d).getSize().subtract(x);u.x+=I.x<0?-M.x:M.x,u.y+=I.y<0?-M.y:M.y,this.panTo(this.unproject(u),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=w({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),l=i.divideBy(2).round(),u=o.divideBy(2).round(),d=l.subtract(u);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(B(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=w({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=B(this._handleGeolocationResponse,this),o=B(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(!!this._container._leaflet_id){var i=t.code,o=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(!!this._container._leaflet_id){var i=t.coords.latitude,o=t.coords.longitude,l=new K(i,o),u=l.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var _=this.getBoundsZoom(u);this.setView(l,d.maxZoom?Math.min(_,d.maxZoom):_)}var P={latlng:l,bounds:u,timestamp:t.timestamp};for(var x in t.coords)typeof t.coords[x]=="number"&&(P[x]=t.coords[x]);this.fire("locationfound",P)}},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Z(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ht(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Z(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=U("div",o,i||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new nt(i,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=rt(t),o=W(o||[0,0]);var l=this.getZoom()||0,u=this.getMinZoom(),d=this.getMaxZoom(),_=t.getNorthWest(),P=t.getSouthEast(),x=this.getSize().subtract(o),I=Pt(this.project(P,l),this.project(_,l)).getSize(),M=N.any3d?this.options.zoomSnap:1,q=x.x/I.x,V=x.y/I.y,Wt=i?Math.max(q,V):Math.min(q,V);return l=this.getScaleZoom(Wt,l),M&&(l=Math.round(l/(M/100))*(M/100),l=i?Math.ceil(l/M)*M:Math.floor(l/M)*M),Math.max(u,Math.min(d,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new Q(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=i===void 0?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=i===void 0?this._zoom:i;var l=o.zoom(t*o.scale(i));return isNaN(l)?1/0:l},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(tt(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(W(t),i)},layerPointToLatLng:function(t){var i=W(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(tt(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(tt(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(rt(t))},distance:function(t,i){return this.options.crs.distance(tt(t),tt(i))},containerPointToLayerPoint:function(t){return W(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return W(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(W(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(tt(t)))},mouseEventToContainerPoint:function(t){return Xn(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Li(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Y(i,"scroll",this._onScroll,this),this._containerId=O(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&N.any3d,R(t,"leaflet-container"+(N.touch?" leaflet-touch":"")+(N.retina?" leaflet-retina":"")+(N.ielt9?" leaflet-oldie":"")+(N.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=re(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),a(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(R(t.markerPane,"leaflet-zoom-hide"),R(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){a(this._mapPane,new k(0,0));var o=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var l=this._zoom!==i;this._moveStart(l,!1)._move(t,i)._moveEnd(l),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,o,l){i===void 0&&(i=this._zoom);var u=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?o&&o.pinch&&this.fire("zoom",o):((u||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ht(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){a(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[O(this._container)]=this;var i=t?$:Y;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),N.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ht(this._resizeRequest),this._resizeRequest=ct(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o=[],l,u=i==="mouseout"||i==="mouseover",d=t.target||t.srcElement,_=!1;d;){if(l=this._targets[O(d)],l&&(i==="click"||i==="preclick")&&this._draggableMoved(l)){_=!0;break}if(l&&l.listens(i,!0)&&(u&&!pn(d,t)||(o.push(l),u))||d===this._container)break;d=d.parentNode}return!o.length&&!_&&!u&&this.listens(i,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var o=t.type;o==="mousedown"&&X(i),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){if(t.type==="click"){var l=w({},t);l.type="preclick",this._fireDOMEvent(l,l.type,o)}var u=this._findEventTargets(t,i);if(o){for(var d=[],_=0;_<o.length;_++)o[_].listens(i,!0)&&d.push(o[_]);u=d.concat(u)}if(!!u.length){i==="contextmenu"&&dt(t);var P=u[0],x={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var I=P.getLatLng&&(!P._radius||P._radius<=10);x.containerPoint=I?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(t),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=I?P.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(_=0;_<u.length;_++)if(u[_].fire(i,x,!0),x.originalEvent._stopped||u[_].options.bubblingMouseEvents===!1&&Ie(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return h(this._mapPane)||new k(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var o=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var l=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,i,o){var l=this._getNewPixelOrigin(o,i);return Pt([this.project(t.getSouthWest(),i)._subtract(l),this.project(t.getNorthWest(),i)._subtract(l),this.project(t.getSouthEast(),i)._subtract(l),this.project(t.getNorthEast(),i)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var l=this.project(t,i),u=this.getSize().divideBy(2),d=new Q(l.subtract(u),l.add(u)),_=this._getBoundsOffset(d,o,i);return _.round().equals([0,0])?t:this.unproject(l.add(_),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),l=new Q(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(l,i))},_getBoundsOffset:function(t,i,o){var l=Pt(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),u=l.min.subtract(t.min),d=l.max.subtract(t.max),_=this._rebound(u.x,-d.x),P=this._rebound(u.y,-d.y);return new k(_,P)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),l=N.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(i,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){it(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,i),!0)},_createAnimProxy:function(){var t=this._proxy=U("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var o=Ye,l=this._proxy.style[o];s(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),l===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Z(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();s(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(i),u=this._getCenterOffset(t)._divideBy(1-1/l);return o.animate!==!0&&!this.getSize().contains(u)?!1:(ct(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,o,l){!this._mapPane||(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,R(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(B(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&it(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Os(t,i){return new G(t,i)}var Et=It.extend({options:{position:"topright"},initialize:function(t){J(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),l=t._controlCorners[o];return R(i,"leaflet-control"),o.indexOf("bottom")!==-1?l.insertBefore(i,l.firstChild):l.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Z(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ze=function(t){return new Et(t)};G.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",o=this._controlContainer=U("div",i+"control-container",this._container);function l(u,d){var _=i+u+" "+i+d;t[u+d]=U("div",_,o)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Z(this._controlCorners[t]);Z(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Rn=Et.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,o,l){return o<l?-1:l<o?1:0}},initialize:function(t,i,o){J(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in i)this._addLayer(i[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Et.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(O(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){R(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(R(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):it(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return it(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=U("div",t),o=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Re(i),dn(i);var l=this._section=U("section",t+"-list");o&&(this._map.on("click",this.collapse,this),Y(i,{mouseenter:function(){Y(l,"click",dt),this.expand(),setTimeout(function(){$(l,"click",dt)})},mouseleave:this.collapse},this));var u=this._layersLink=U("a",t+"-toggle",i);u.href="#",u.title="Layers",u.setAttribute("role","button"),Y(u,"click",dt),Y(u,"focus",this.expand,this),o||this.expand(),this._baseLayersList=U("div",t+"-base",l),this._separator=U("div",t+"-separator",l),this._overlaysList=U("div",t+"-overlays",l),i.appendChild(l)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&O(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:o}),this.options.sortLayers&&this._layers.sort(B(function(l,u){return this.options.sortFunction(l.layer,u.layer,l.name,u.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;_e(this._baseLayersList),_e(this._overlaysList),this._layerControlInputs=[];var t,i,o,l,u=0;for(o=0;o<this._layers.length;o++)l=this._layers[o],this._addItem(l),i=i||l.overlay,t=t||!l.overlay,u+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&u>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(O(t.target)),o=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(t,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=o,l.firstChild},_addItem:function(t){var i=document.createElement("label"),o=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=o):l=this._createRadioElement("leaflet-base-layers_"+O(this),o),this._layerControlInputs.push(l),l.layerId=O(t.layer),Y(l,"click",this._onInputClick,this);var u=document.createElement("span");u.innerHTML=" "+t.name;var d=document.createElement("span");i.appendChild(d),d.appendChild(l),d.appendChild(u);var _=t.overlay?this._overlaysList:this._baseLayersList;return _.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t=this._layerControlInputs,i,o,l=[],u=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)i=t[d],o=this._getLayer(i.layerId).layer,i.checked?l.push(o):i.checked||u.push(o);for(d=0;d<u.length;d++)this._map.hasLayer(u[d])&&this._map.removeLayer(u[d]);for(d=0;d<l.length;d++)this._map.hasLayer(l[d])||this._map.addLayer(l[d]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,o,l=this._map.getZoom(),u=t.length-1;u>=0;u--)i=t[u],o=this._getLayer(i.layerId).layer,i.disabled=o.options.minZoom!==void 0&&l<o.options.minZoom||o.options.maxZoom!==void 0&&l>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Bs=function(t,i,o){return new Rn(t,i,o)},_n=Et.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",o=U("div",i+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,o,l,u){var d=U("a",o,l);return d.innerHTML=t,d.href="#",d.title=i,d.setAttribute("role","button"),d.setAttribute("aria-label",i),Re(d),Y(d,"click",le),Y(d,"click",u,this),Y(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";it(this._zoomInButton,i),it(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(R(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(R(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});G.mergeOptions({zoomControl:!0}),G.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _n,this.addControl(this.zoomControl))});var As=function(t){return new _n(t)},zn=Et.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",o=U("div",i),l=this.options;return this._addScales(l,i+"-line",o),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,o){t.metric&&(this._mScale=U("div",i,o)),t.imperial&&(this._iScale=U("div",i,o))},_update:function(){var t=this._map,i=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/t)},_updateImperial:function(t){var i=t*3.2808399,o,l,u;i>5280?(o=i/5280,l=this._getRoundNum(o),this._updateScale(this._iScale,l+" mi",l/o)):(u=this._getRoundNum(i),this._updateScale(this._iScale,u+" ft",u/i))},_updateScale:function(t,i,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),o=t/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),Ms=function(t){return new zn(t)},Ns='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mn=Et.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(N.inlineSvg?Ns+" ":"")+"Leaflet</a>"},initialize:function(t){J(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=U("div","leaflet-control-attribution"),Re(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});G.mergeOptions({attributionControl:!0}),G.addInitHook(function(){this.options.attributionControl&&new mn().addTo(this)});var Ds=function(t){return new mn(t)};Et.Layers=Rn,Et.Zoom=_n,Et.Scale=zn,Et.Attribution=mn,ze.layers=Bs,ze.zoom=As,ze.scale=Ms,ze.attribution=Ds;var Nt=It.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Nt.addTo=function(t,i){return t.addHandler(i,this),this};var Xs={Events:mt},Zn=N.touch?"touchstart mousedown":"mousedown",Jt=ie.extend({options:{clickTolerance:3},initialize:function(t,i,o,l){J(this,l),this._element=t,this._dragStartTarget=i||t,this._preventOutline=o},enable:function(){this._enabled||(Y(this._dragStartTarget,Zn,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Jt._dragging===this&&this.finishDrag(!0),$(this._dragStartTarget,Zn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!!this._enabled&&(this._moved=!1,!z(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Jt._dragging===this&&this.finishDrag();return}if(!(Jt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Jt._dragging=this,this._preventOutline&&X(this._element),g(),f(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,o=F(this._element);this._startPoint=new k(i.clientX,i.clientY),this._startPos=h(this._element),this._parentScale=et(o);var l=t.type==="mousedown";Y(document,l?"mousemove":"touchmove",this._onMove,this),Y(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(!!this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,o=new k(i.clientX,i.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,dt(t),this._moved||(this.fire("dragstart"),this._moved=!0,R(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),R(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),a(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){it(document.body,"leaflet-dragging"),this._lastTarget&&(it(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$(document,"mousemove touchmove",this._onMove,this),$(document,"mouseup touchend touchcancel",this._onUp,this),T(),c(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Jt._dragging=!1}});function Fn(t,i){if(!i||!t.length)return t.slice();var o=i*i;return t=Rs(t,o),t=ks(t,o),t}function Wn(t,i,o){return Math.sqrt(Ze(t,i,o,!0))}function Ys(t,i,o){return Ze(t,i,o)}function ks(t,i){var o=t.length,l=typeof Uint8Array!=void 0+""?Uint8Array:Array,u=new l(o);u[0]=u[o-1]=1,vn(t,u,i,0,o-1);var d,_=[];for(d=0;d<o;d++)u[d]&&_.push(t[d]);return _}function vn(t,i,o,l,u){var d=0,_,P,x;for(P=l+1;P<=u-1;P++)x=Ze(t[P],t[l],t[u],!0),x>d&&(_=P,d=x);d>o&&(i[_]=1,vn(t,i,o,l,_),vn(t,i,o,_,u))}function Rs(t,i){for(var o=[t[0]],l=1,u=0,d=t.length;l<d;l++)zs(t[l],t[u])>i&&(o.push(t[l]),u=l);return u<d-1&&o.push(t[d-1]),o}var qn;function Hn(t,i,o,l,u){var d=l?qn:he(t,o),_=he(i,o),P,x,I;for(qn=_;;){if(!(d|_))return[t,i];if(d&_)return!1;P=d||_,x=Ci(t,i,P,o,u),I=he(x,o),P===d?(t=x,d=I):(i=x,_=I)}}function Ci(t,i,o,l,u){var d=i.x-t.x,_=i.y-t.y,P=l.min,x=l.max,I,M;return o&8?(I=t.x+d*(x.y-t.y)/_,M=x.y):o&4?(I=t.x+d*(P.y-t.y)/_,M=P.y):o&2?(I=x.x,M=t.y+_*(x.x-t.x)/d):o&1&&(I=P.x,M=t.y+_*(P.x-t.x)/d),new k(I,M,u)}function he(t,i){var o=0;return t.x<i.min.x?o|=1:t.x>i.max.x&&(o|=2),t.y<i.min.y?o|=4:t.y>i.max.y&&(o|=8),o}function zs(t,i){var o=i.x-t.x,l=i.y-t.y;return o*o+l*l}function Ze(t,i,o,l){var u=i.x,d=i.y,_=o.x-u,P=o.y-d,x=_*_+P*P,I;return x>0&&(I=((t.x-u)*_+(t.y-d)*P)/x,I>1?(u=o.x,d=o.y):I>0&&(u+=_*I,d+=P*I)),_=t.x-u,P=t.y-d,l?_*_+P*P:new k(u,d)}function Rt(t){return!Ct(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Un(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rt(t)}var Zs={__proto__:null,simplify:Fn,pointToSegmentDistance:Wn,closestPointOnSegment:Ys,clipSegment:Hn,_getEdgeIntersection:Ci,_getBitCode:he,_sqClosestPointOnSegment:Ze,isFlat:Rt,_flat:Un};function Gn(t,i,o){var l,u=[1,4,2,8],d,_,P,x,I,M,q,V;for(d=0,M=t.length;d<M;d++)t[d]._code=he(t[d],i);for(P=0;P<4;P++){for(q=u[P],l=[],d=0,M=t.length,_=M-1;d<M;_=d++)x=t[d],I=t[_],x._code&q?I._code&q||(V=Ci(I,x,q,i,o),V._code=he(V,i),l.push(V)):(I._code&q&&(V=Ci(I,x,q,i,o),V._code=he(V,i),l.push(V)),l.push(x));t=l}return t}var Fs={__proto__:null,clipPolygon:Gn},yn={project:function(t){return new k(t.lng,t.lat)},unproject:function(t){return new K(t.y,t.x)},bounds:new Q([-180,-90],[180,90])},gn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,o=this.R,l=t.lat*i,u=this.R_MINOR/o,d=Math.sqrt(1-u*u),_=d*Math.sin(l),P=Math.tan(Math.PI/4-l/2)/Math.pow((1-_)/(1+_),d/2);return l=-o*Math.log(Math.max(P,1e-10)),new k(t.lng*i*o,l)},unproject:function(t){for(var i=180/Math.PI,o=this.R,l=this.R_MINOR/o,u=Math.sqrt(1-l*l),d=Math.exp(-t.y/o),_=Math.PI/2-2*Math.atan(d),P=0,x=.1,I;P<15&&Math.abs(x)>1e-7;P++)I=u*Math.sin(_),I=Math.pow((1-I)/(1+I),u/2),x=Math.PI/2-2*Math.atan(d*I)-_,_+=x;return new K(_*i,t.x*i/o)}},Ws={__proto__:null,LonLat:yn,Mercator:gn,SphericalMercator:St},qs=w({},Mt,{code:"EPSG:3395",projection:gn,transformation:function(){var t=.5/(Math.PI*gn.R);return ne(t,.5,-t,.5)}()}),Vn=w({},Mt,{code:"EPSG:4326",projection:yn,transformation:ne(1/180,1,-1/180,.5)}),Hs=w({},bt,{projection:yn,transformation:ne(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var o=i.lng-t.lng,l=i.lat-t.lat;return Math.sqrt(o*o+l*l)},infinite:!0});bt.Earth=Mt,bt.EPSG3395=qs,bt.EPSG3857=Oe,bt.EPSG900913=zi,bt.EPSG4326=Vn,bt.Simple=Hs;var Ot=ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[O(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[O(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(!!i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});G.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=O(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=O(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return O(t)in this._layers},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},_addLayers:function(t){t=t?Ct(t)?t:[t]:[];for(var i=0,o=t.length;i<o;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[O(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=O(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,o=this._getZoomSpan();for(var l in this._zoomBoundLayers){var u=this._zoomBoundLayers[l].options;t=u.minZoom===void 0?t:Math.min(t,u.minZoom),i=u.maxZoom===void 0?i:Math.max(i,u.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ve=Ot.extend({initialize:function(t,i){J(this,i),this._layers={};var o,l;if(t)for(o=0,l=t.length;o<l;o++)this.addLayer(t[o])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),o,l;for(o in this._layers)l=this._layers[o],l[t]&&l[t].apply(l,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return O(t)}}),Us=function(t,i){return new ve(t,i)},ye=ve.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ve.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ve.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new nt;for(var i in this._layers){var o=this._layers[i];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),Gs=function(t,i){return new ye(t,i)},ge=It.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){J(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,i){var o=this.options,l=o[i+"Size"];typeof l=="number"&&(l=[l,l]);var u=W(l),d=W(i==="shadow"&&o.shadowAnchor||o.iconAnchor||u&&u.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(o.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),u&&(t.style.width=u.x+"px",t.style.height=u.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return N.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Vs(t){return new ge(t)}var Fe=ge.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Fe.imagePath!="string"&&(Fe.imagePath=this._detectIconPath()),(this.options.imagePath||Fe.imagePath)+ge.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(o,l,u){var d=l.exec(o);return d&&d[u]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=U("div","leaflet-default-icon-path",document.body),i=re(t,"background-image")||re(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Jn=Nt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Jt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),R(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&it(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,o=i._map,l=this._marker.options.autoPanSpeed,u=this._marker.options.autoPanPadding,d=h(i._icon),_=o.getPixelBounds(),P=o.getPixelOrigin(),x=Pt(_.min._subtract(P).add(u),_.max._subtract(P).subtract(u));if(!x.contains(d)){var I=W((Math.max(x.max.x,d.x)-x.max.x)/(_.max.x-x.max.x)-(Math.min(x.min.x,d.x)-x.min.x)/(_.min.x-x.min.x),(Math.max(x.max.y,d.y)-x.max.y)/(_.max.y-x.max.y)-(Math.min(x.min.y,d.y)-x.min.y)/(_.min.y-x.min.y)).multiplyBy(l);o.panBy(I,{animate:!1}),this._draggable._newPos._add(I),this._draggable._startPos._add(I),a(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ct(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ht(this._panRequest),this._panRequest=ct(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,o=i._shadow,l=h(i._icon),u=i._map.layerPointToLatLng(l);o&&a(o,l),i._latlng=u,t.latlng=u,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ht(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),wi=Ot.extend({options:{icon:new Fe,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){J(this,i),this._latlng=tt(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=tt(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),l=!1;o!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),R(o,i),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(o,"focus",this._panOnFocus,this);var u=t.icon.createShadow(this._shadow),d=!1;u!==this._shadow&&(this._removeShadow(),d=!0),u&&(R(u,i),u.alt=""),this._shadow=u,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),u&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$(this._icon,"focus",this._panOnFocus,this),Z(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Z(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&a(this._icon,t),this._shadow&&a(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(!!this.options.interactive&&(R(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Jn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Jn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&vt(this._icon,t),this._shadow&&vt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(!!t){var i=this.options.icon.options,o=i.iconSize?W(i.iconSize):W(0,0),l=i.iconAnchor?W(i.iconAnchor):W(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:o.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Js(t,i){return new wi(t,i)}var Kt=Ot.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return J(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ti=Kt.extend({options:{fill:!0,radius:10},initialize:function(t,i){J(this,i),this._latlng=tt(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=tt(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Kt.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,o=this._clickTolerance(),l=[t+o,i+o];this._pxBounds=new Q(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ks(t,i){return new Ti(t,i)}var Pn=Ti.extend({initialize:function(t,i,o){if(typeof i=="number"&&(i=w({},o,{radius:i})),J(this,i),this._latlng=tt(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new nt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Kt.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,o=this._map,l=o.options.crs;if(l.distance===Mt.distance){var u=Math.PI/180,d=this._mRadius/Mt.R/u,_=o.project([i+d,t]),P=o.project([i-d,t]),x=_.add(P).divideBy(2),I=o.unproject(x).lat,M=Math.acos((Math.cos(d*u)-Math.sin(i*u)*Math.sin(I*u))/(Math.cos(i*u)*Math.cos(I*u)))/u;(isNaN(M)||M===0)&&(M=d/Math.cos(Math.PI/180*i)),this._point=x.subtract(o.getPixelOrigin()),this._radius=isNaN(M)?0:x.x-o.project([I,t-M]).x,this._radiusY=x.y-_.y}else{var q=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(q).x}this._updateBounds()}});function $s(t,i,o){return new Pn(t,i,o)}var zt=Kt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){J(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,o=null,l=Ze,u,d,_=0,P=this._parts.length;_<P;_++)for(var x=this._parts[_],I=1,M=x.length;I<M;I++){u=x[I-1],d=x[I];var q=l(t,u,d,!0);q<i&&(i=q,o=l(t,u,d))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,o,l,u,d,_,P=this._rings[0],x=P.length;if(!x)return null;for(t=0,i=0;t<x-1;t++)i+=P[t].distanceTo(P[t+1])/2;if(i===0)return this._map.layerPointToLatLng(P[0]);for(t=0,l=0;t<x-1;t++)if(u=P[t],d=P[t+1],o=u.distanceTo(d),l+=o,l>i)return _=(l-i)/o,this._map.layerPointToLatLng([d.x-_*(d.x-u.x),d.y-_*(d.y-u.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=tt(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new nt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Rt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],o=Rt(t),l=0,u=t.length;l<u;l++)o?(i[l]=tt(t[l]),this._bounds.extend(i[l])):i[l]=this._convertLatLngs(t[l]);return i},_project:function(){var t=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new k(t,t);!this._rawPxBounds||(this._pxBounds=new Q([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,o){var l=t[0]instanceof K,u=t.length,d,_;if(l){for(_=[],d=0;d<u;d++)_[d]=this._map.latLngToLayerPoint(t[d]),o.extend(_[d]);i.push(_)}else for(d=0;d<u;d++)this._projectLatlngs(t[d],i,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,o,l,u,d,_,P,x;for(o=0,u=0,d=this._rings.length;o<d;o++)for(x=this._rings[o],l=0,_=x.length;l<_-1;l++)P=Hn(x[l],x[l+1],t,l,!0),P&&(i[u]=i[u]||[],i[u].push(P[0]),(P[1]!==x[l+1]||l===_-2)&&(i[u].push(P[1]),u++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,o=0,l=t.length;o<l;o++)t[o]=Fn(t[o],i)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var o,l,u,d,_,P,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,d=this._parts.length;o<d;o++)for(P=this._parts[o],l=0,_=P.length,u=_-1;l<_;u=l++)if(!(!i&&l===0)&&Wn(t,P[u],P[l])<=x)return!0;return!1}});function js(t,i){return new zt(t,i)}zt._flat=Un;var Pe=zt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,o,l,u,d,_,P,x,I=this._rings[0],M=I.length;if(!M)return null;for(d=_=P=0,t=0,i=M-1;t<M;i=t++)o=I[t],l=I[i],u=o.y*l.x-l.y*o.x,_+=(o.x+l.x)*u,P+=(o.y+l.y)*u,d+=u*3;return d===0?x=I[0]:x=[_/d,P/d],this._map.layerPointToLatLng(x)},_convertLatLngs:function(t){var i=zt.prototype._convertLatLngs.call(this,t),o=i.length;return o>=2&&i[0]instanceof K&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(t){zt.prototype._setLatLngs.call(this,t),Rt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,o=new k(i,i);if(t=new Q(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,u=this._rings.length,d;l<u;l++)d=Gn(this._rings[l],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,o,l,u,d,_,P,x,I;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,x=this._parts.length;d<x;d++)for(o=this._parts[d],_=0,I=o.length,P=I-1;_<I;P=_++)l=o[_],u=o[P],l.y>t.y!=u.y>t.y&&t.x<(u.x-l.x)*(t.y-l.y)/(u.y-l.y)+l.x&&(i=!i);return i||zt.prototype._containsPoint.call(this,t,!0)}});function Qs(t,i){return new Pe(t,i)}var Zt=ye.extend({initialize:function(t,i){J(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=Ct(t)?t:t.features,o,l,u;if(i){for(o=0,l=i.length;o<l;o++)u=i[o],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(u);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var _=xn(t,d);return _?(_.feature=Si(t),_.defaultOptions=_.options,this.resetStyle(_),d.onEachFeature&&d.onEachFeature(t,_),this.addLayer(_)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=w({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function xn(t,i){var o=t.type==="Feature"?t.geometry:t,l=o?o.coordinates:null,u=[],d=i&&i.pointToLayer,_=i&&i.coordsToLatLng||Ln,P,x,I,M;if(!l&&!o)return null;switch(o.type){case"Point":return P=_(l),Kn(d,t,P,i);case"MultiPoint":for(I=0,M=l.length;I<M;I++)P=_(l[I]),u.push(Kn(d,t,P,i));return new ye(u);case"LineString":case"MultiLineString":return x=Ii(l,o.type==="LineString"?0:1,_),new zt(x,i);case"Polygon":case"MultiPolygon":return x=Ii(l,o.type==="Polygon"?1:2,_),new Pe(x,i);case"GeometryCollection":for(I=0,M=o.geometries.length;I<M;I++){var q=xn({geometry:o.geometries[I],type:"Feature",properties:t.properties},i);q&&u.push(q)}return new ye(u);default:throw new Error("Invalid GeoJSON object.")}}function Kn(t,i,o,l){return t?t(i,o):new wi(o,l&&l.markersInheritOptions&&l)}function Ln(t){return new K(t[1],t[0],t[2])}function Ii(t,i,o){for(var l=[],u=0,d=t.length,_;u<d;u++)_=i?Ii(t[u],i-1,o):(o||Ln)(t[u]),l.push(_);return l}function Cn(t,i){return t=tt(t),t.alt!==void 0?[lt(t.lng,i),lt(t.lat,i),lt(t.alt,i)]:[lt(t.lng,i),lt(t.lat,i)]}function bi(t,i,o,l){for(var u=[],d=0,_=t.length;d<_;d++)u.push(i?bi(t[d],i-1,o,l):Cn(t[d],l));return!i&&o&&u.push(u[0]),u}function xe(t,i){return t.feature?w({},t.feature,{geometry:i}):Si(i)}function Si(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var wn={toGeoJSON:function(t){return xe(this,{type:"Point",coordinates:Cn(this.getLatLng(),t)})}};wi.include(wn),Pn.include(wn),Ti.include(wn),zt.include({toGeoJSON:function(t){var i=!Rt(this._latlngs),o=bi(this._latlngs,i?1:0,!1,t);return xe(this,{type:(i?"Multi":"")+"LineString",coordinates:o})}}),Pe.include({toGeoJSON:function(t){var i=!Rt(this._latlngs),o=i&&!Rt(this._latlngs[0]),l=bi(this._latlngs,o?2:i?1:0,!0,t);return i||(l=[l]),xe(this,{type:(o?"Multi":"")+"Polygon",coordinates:l})}}),ve.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(o){i.push(o.toGeoJSON(t).geometry.coordinates)}),xe(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var o=i==="GeometryCollection",l=[];return this.eachLayer(function(u){if(u.toGeoJSON){var d=u.toGeoJSON(t);if(o)l.push(d.geometry);else{var _=Si(d);_.type==="FeatureCollection"?l.push.apply(l,_.features):l.push(_)}}}),o?xe(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function $n(t,i){return new Zt(t,i)}var to=$n,Ei=Ot.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,o){this._url=t,this._bounds=rt(i),J(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(R(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Z(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Gt(this._image),this},bringToBack:function(){return this._map&&Vt(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=rt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:U("img");if(R(i,"leaflet-image-layer"),this._zoomAnimated&&R(i,"leaflet-zoom-animated"),this.options.className&&R(i,this.options.className),i.onselectstart=j,i.onmousemove=j,i.onload=B(this.fire,this,"load"),i.onerror=B(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;s(this._image,o,i)},_reset:function(){var t=this._image,i=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();a(t,i.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){vt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),eo=function(t,i,o){return new Ei(t,i,o)},jn=Ei.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:U("video");if(R(i,"leaflet-image-layer"),this._zoomAnimated&&R(i,"leaflet-zoom-animated"),this.options.className&&R(i,this.options.className),i.onselectstart=j,i.onmousemove=j,i.onloadeddata=B(this.fire,this,"load"),t){for(var o=i.getElementsByTagName("source"),l=[],u=0;u<o.length;u++)l.push(o[u].src);this._url=o.length>0?l:[i.src];return}Ct(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var _=U("source");_.src=this._url[d],i.appendChild(_)}}});function io(t,i,o){return new jn(t,i,o)}var Qn=Ei.extend({_initImage:function(){var t=this._image=this._url;R(t,"leaflet-image-layer"),this._zoomAnimated&&R(t,"leaflet-zoom-animated"),this.options.className&&R(t,this.options.className),t.onselectstart=j,t.onmousemove=j}});function no(t,i,o){return new Qn(t,i,o)}var Dt=Ot.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,i){J(this,t),this._source=i},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&vt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&vt(this._container,1),this.bringToFront(),this.options.interactive&&(R(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(vt(this._container,0),this._removeTimeout=setTimeout(B(Z,void 0,this._container),200)):Z(this._container),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=tt(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gt(this._container),this},bringToBack:function(){return this._map&&Vt(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof ye){i=null;var o=this._source._layers;for(var l in o)if(o[l]._map){i=o[l];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=W(this.options.offset),o=this._getAnchor();this._zoomAnimated?a(this._container,t.add(o)):i=i.add(t).add(o);var l=this._containerBottom=-i.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=l+"px",this._container.style.left=u+"px"}},_getAnchor:function(){return[0,0]}});G.include({_initOverlay:function(t,i,o,l){var u=i;return u instanceof t||(u=new t(l).setContent(i)),o&&u.setLatLng(o),u}}),Ot.include({_initOverlay:function(t,i,o,l){var u=o;return u instanceof t?(J(u,l),u._source=this):(u=i&&!l?i:new t(l,this),u.setContent(o)),u}});var Oi=Dt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Dt.prototype.openOn.call(this,t)},onAdd:function(t){Dt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Kt||this._source.on("preclick",ae))},onRemove:function(t){Dt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Kt||this._source.off("preclick",ae))},getEvents:function(){var t=Dt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=U("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=U("div",t+"-content-wrapper",i);if(this._contentNode=U("div",t+"-content",o),Re(i),dn(this._contentNode),Y(i,"contextmenu",ae),this._tipContainer=U("div",t+"-tip-container",i),this._tip=U("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=U("a",t+"-close-button",i);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',Y(l,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var l=t.offsetHeight,u=this.options.maxHeight,d="leaflet-popup-scrolled";u&&l>u?(i.height=u+"px",R(t,d)):it(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();a(this._container,i.add(o))},_adjustPan:function(t){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var i=this._map,o=parseInt(re(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+o,u=this._containerWidth,d=new k(this._containerLeft,-l-this._containerBottom);d._add(h(this._container));var _=i.layerPointToContainerPoint(d),P=W(this.options.autoPanPadding),x=W(this.options.autoPanPaddingTopLeft||P),I=W(this.options.autoPanPaddingBottomRight||P),M=i.getSize(),q=0,V=0;_.x+u+I.x>M.x&&(q=_.x+u-M.x+I.x),_.x-q-x.x<0&&(q=_.x-x.x),_.y+l+I.y>M.y&&(V=_.y+l-M.y+I.y),_.y-V-x.y<0&&(V=_.y-x.y),(q||V)&&i.fire("autopanstart").panBy([q,V],{animate:t&&t.type==="moveend"})}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),so=function(t,i){return new Oi(t,i)};G.mergeOptions({closePopupOnClick:!0}),G.include({openPopup:function(t,i,o){return this._initOverlay(Oi,t,i,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ot.include({bindPopup:function(t,i){return this._popup=this._initOverlay(Oi,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){le(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof Kt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Bi=Dt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Dt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Dt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Dt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=U("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,o,l=this._map,u=this._container,d=l.latLngToContainerPoint(l.getCenter()),_=l.layerPointToContainerPoint(t),P=this.options.direction,x=u.offsetWidth,I=u.offsetHeight,M=W(this.options.offset),q=this._getAnchor();P==="top"?(i=x/2,o=I):P==="bottom"?(i=x/2,o=0):P==="center"?(i=x/2,o=I/2):P==="right"?(i=0,o=I/2):P==="left"?(i=x,o=I/2):_.x<d.x?(P="right",i=0,o=I/2):(P="left",i=x+(M.x+q.x)*2,o=I/2),t=t.subtract(W(i,o,!0)).add(M).add(q),it(u,"leaflet-tooltip-right"),it(u,"leaflet-tooltip-left"),it(u,"leaflet-tooltip-top"),it(u,"leaflet-tooltip-bottom"),R(u,"leaflet-tooltip-"+P),a(u,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&vt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),oo=function(t,i){return new Bi(t,i)};G.include({openTooltip:function(t,i,o){return this._initOverlay(Bi,t,i,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ot.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bi,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[i](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var i=t.latlng,o,l;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(o),i=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(i)}});var ts=ge.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(_e(i),i.appendChild(o.html)):i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var l=W(o.bgPos);i.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function ro(t){return new ts(t)}ge.Default=Fe;var We=Ot.extend({options:{tileSize:256,opacity:1,updateWhenIdle:N.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){J(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Z(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=xt(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof k?t:new k(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,o=-t(-1/0,1/0),l=0,u=i.length,d;l<u;l++)d=i[l].style.zIndex,i[l]!==this._container&&d&&(o=t(o,+d));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!N.ielt9){vt(this._container,this.options.opacity);var t=+new Date,i=!1,o=!1;for(var l in this._tiles){var u=this._tiles[l];if(!(!u.current||!u.loaded)){var d=Math.min(1,(t-u.loaded)/200);vt(u.el,d),d<1?i=!0:(u.active?o=!0:this._onOpaqueTile(u),u.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(ht(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this))}},_onOpaqueTile:j,_initContainer:function(){this._container||(this._container=U("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=i-Math.abs(t-o),this._onUpdateLevel(o)):(Z(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var l=this._levels[t],u=this._map;return l||(l=this._levels[t]={},l.el=U("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=i,l.origin=u.project(u.unproject(u.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,u.getCenter(),u.getZoom()),j(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:j,_onRemoveLevel:j,_onCreateLevel:j,_pruneTiles:function(){if(!!this._map){var t,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var l=i.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Z(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,o,l){var u=Math.floor(t/2),d=Math.floor(i/2),_=o-1,P=new k(+u,+d);P.z=+_;var x=this._tileCoordsToKey(P),I=this._tiles[x];return I&&I.active?(I.retain=!0,!0):(I&&I.loaded&&(I.retain=!0),_>l?this._retainParent(u,d,_,l):!1)},_retainChildren:function(t,i,o,l){for(var u=2*t;u<2*t+2;u++)for(var d=2*i;d<2*i+2;d++){var _=new k(u,d);_.z=o+1;var P=this._tileCoordsToKey(_),x=this._tiles[P];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);o+1<l&&this._retainChildren(u,d,o+1,l)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,o,l){var u=Math.round(i);this.options.maxZoom!==void 0&&u>this.options.maxZoom||this.options.minZoom!==void 0&&u<this.options.minZoom?u=void 0:u=this._clampZoom(u);var d=this.options.updateWhenZooming&&u!==this._tileZoom;(!l||d)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,i)},_setZoomTransform:function(t,i,o){var l=this._map.getZoomScale(o,t.zoom),u=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(i,o)).round();N.any3d?s(t.el,u,l):a(t.el,u)},_resetGrid:function(){var t=this._map,i=t.options.crs,o=this._tileSize=this.getTileSize(),l=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],l).x/o.x),Math.ceil(t.project([0,i.wrapLng[1]],l).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],l).y/o.x),Math.ceil(t.project([i.wrapLat[1],0],l).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),l=i.getZoomScale(o,this._tileZoom),u=i.project(t,this._tileZoom).floor(),d=i.getSize().divideBy(l*2);return new Q(u.subtract(d),u.add(d))},_update:function(t){var i=this._map;if(!!i){var o=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),u=this._pxBoundsToTileRange(l),d=u.getCenter(),_=[],P=this.options.keepBuffer,x=new Q(u.getBottomLeft().subtract([P,-P]),u.getTopRight().add([P,-P]));if(!(isFinite(u.min.x)&&isFinite(u.min.y)&&isFinite(u.max.x)&&isFinite(u.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var I in this._tiles){var M=this._tiles[I].coords;(M.z!==this._tileZoom||!x.contains(new k(M.x,M.y)))&&(this._tiles[I].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var q=u.min.y;q<=u.max.y;q++)for(var V=u.min.x;V<=u.max.x;V++){var Wt=new k(V,q);if(Wt.z=this._tileZoom,!!this._isValidTile(Wt)){var ue=this._tiles[this._tileCoordsToKey(Wt)];ue?ue.current=!0:_.push(Wt)}}if(_.sort(function($t,Tn){return $t.distanceTo(d)-Tn.distanceTo(d)}),_.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mi=document.createDocumentFragment();for(V=0;V<_.length;V++)this._addTile(_[V],Mi);this._level.el.appendChild(Mi)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!i.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return rt(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,o=this.getTileSize(),l=t.scaleBy(o),u=l.add(o),d=i.unproject(l,t.z),_=i.unproject(u,t.z);return[d,_]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),o=new nt(i[0],i[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),o=new k(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(t){var i=this._tiles[t];!i||(Z(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){R(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=j,t.onmousemove=j,N.ielt9&&this.options.opacity<1&&vt(t,this.options.opacity)},_addTile:function(t,i){var o=this._getTilePos(t),l=this._tileCoordsToKey(t),u=this.createTile(this._wrapCoords(t),B(this._tileReady,this,t));this._initTile(u),this.createTile.length<2&&ct(B(this._tileReady,this,t,null,u)),a(u,o),this._tiles[l]={el:u,coords:t,current:!0},i.appendChild(u),this.fire("tileloadstart",{tile:u,coords:t})},_tileReady:function(t,i,o){i&&this.fire("tileerror",{error:i,tile:o,coords:t});var l=this._tileCoordsToKey(t);o=this._tiles[l],o&&(o.loaded=+new Date,this._map._fadeAnimated?(vt(o.el,0),ht(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(R(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),N.ielt9||!this._map._fadeAnimated?ct(this._pruneTiles,this):setTimeout(B(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new k(this._wrapX?yt(t.x,this._wrapX):t.x,this._wrapY?yt(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new Q(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ao(t){return new We(t)}var Le=We.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=J(this,i),i.detectRetina&&N.retina&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=document.createElement("img");return Y(o,"load",B(this._tileOnLoad,this,i,o)),Y(o,"error",B(this._tileOnError,this,i,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.setAttribute("role","presentation"),o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:N.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return Te(this._url,w(i,this.options))},_tileOnLoad:function(t,i){N.ielt9?setTimeout(B(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var l=this.options.errorTileUrl;l&&i.getAttribute("src")!==l&&(i.src=l),t(o,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,o=this.options.zoomReverse,l=this.options.zoomOffset;return o&&(t=i-t),t+l},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=j,i.onerror=j,!i.complete)){i.src=gt;var o=this._tiles[t].coords;Z(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:o})}},_removeTile:function(t){var i=this._tiles[t];if(!!i)return i.el.setAttribute("src",gt),We.prototype._removeTile.call(this,t)},_tileReady:function(t,i,o){if(!(!this._map||o&&o.getAttribute("src")===gt))return We.prototype._tileReady.call(this,t,i,o)}});function es(t,i){return new Le(t,i)}var is=Le.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=w({},this.defaultWmsParams);for(var l in i)l in this.options||(o[l]=i[l]);i=J(this,i);var u=i.detectRetina&&N.retina?2:1,d=this.getTileSize();o.width=d.x*u,o.height=d.y*u,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Le.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),o=this._crs,l=Pt(o.project(i[0]),o.project(i[1])),u=l.min,d=l.max,_=(this._wmsVersion>=1.3&&this._crs===Vn?[u.y,u.x,d.y,d.x]:[u.x,u.y,d.x,d.y]).join(","),P=Le.prototype.getTileUrl.call(this,t);return P+_t(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_},setParams:function(t,i){return w(this.wmsParams,t),i||this.redraw(),this}});function lo(t,i){return new is(t,i)}Le.WMS=is,es.wms=lo;var Ft=Ot.extend({options:{padding:.1},initialize:function(t){J(this,t),O(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&R(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var o=this._map.getZoomScale(i,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),u=this._map.project(this._center,i),d=l.multiplyBy(-o).add(u).subtract(this._map._getNewPixelOrigin(t,i));N.any3d?s(this._container,d,o):a(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new Q(o,o.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ns=Ft.extend({options:{tolerance:0},getEvents:function(){var t=Ft.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ft.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Y(t,"mousemove",this._onMouseMove,this),Y(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Y(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ht(this._redrawRequest),delete this._ctx,Z(this._container),$(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ft.prototype._update.call(this);var t=this._bounds,i=this._container,o=t.getSize(),l=N.retina?2:1;a(i,t.min),i.width=l*o.x,i.height=l*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",N.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ft.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[O(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,o=i.next,l=i.prev;o?o.prev=l:this._drawLast=l,l?l.next=o:this._drawFirst=o,delete t._order,delete this._layers[O(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),o=[],l,u;for(u=0;u<i.length;u++){if(l=Number(i[u]),isNaN(l))return;o.push(l)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ct(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(!!this._drawing){var o,l,u,d,_=t._parts,P=_.length,x=this._ctx;if(!!P){for(x.beginPath(),o=0;o<P;o++){for(l=0,u=_[o].length;l<u;l++)d=_[o][l],x[l?"lineTo":"moveTo"](d.x,d.y);i&&x.closePath()}this._fillStroke(x,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,o=this._ctx,l=Math.max(Math.round(t._radius),1),u=(Math.max(Math.round(t._radiusY),1)||l)/l;u!==1&&(o.save(),o.scale(1,u)),o.beginPath(),o.arc(i.x,i.y/u,l,0,Math.PI*2,!1),u!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,i){var o=i.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),o,l,u=this._drawFirst;u;u=u.next)o=u.layer,o.options.interactive&&o._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(l=o);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(it(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var o,l,u=this._drawFirst;u;u=u.next)o=u.layer,o.options.interactive&&o._containsPoint(i)&&(l=o);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(R(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(B(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,o){this._map._fireDOMEvent(i,o||i.type,t)},_bringToFront:function(t){var i=t._order;if(!!i){var o=i.next,l=i.prev;if(o)o.prev=l;else return;l?l.next=o:o&&(this._drawFirst=o),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(!!i){var o=i.next,l=i.prev;if(l)l.next=o;else return;o?o.prev=l:l&&(this._drawLast=l),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function ss(t){return N.canvas?new ns(t):null}var qe=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ho={_initContainer:function(){this._container=U("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ft.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=qe("shape");R(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=qe("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[O(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;Z(i),t.removeInteractiveTarget(i),delete this._layers[O(t)]},_updateStyle:function(t){var i=t._stroke,o=t._fill,l=t.options,u=t._container;u.stroked=!!l.stroke,u.filled=!!l.fill,l.stroke?(i||(i=t._stroke=qe("stroke")),u.appendChild(i),i.weight=l.weight+"px",i.color=l.color,i.opacity=l.opacity,l.dashArray?i.dashStyle=Ct(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=l.lineCap.replace("butt","flat"),i.joinstyle=l.lineJoin):i&&(u.removeChild(i),t._stroke=null),l.fill?(o||(o=t._fill=qe("fill")),u.appendChild(o),o.color=l.fillColor||l.color,o.opacity=l.fillOpacity):o&&(u.removeChild(o),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),o=Math.round(t._radius),l=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+l+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){Gt(t._container)},_bringToBack:function(t){Vt(t._container)}},Ai=N.vml?qe:Qe,He=Ft.extend({_initContainer:function(){this._container=Ai("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ai("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Z(this._container),$(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ft.prototype._update.call(this);var t=this._bounds,i=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),a(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Ai("path");t.options.className&&R(i,t.options.className),t.options.interactive&&R(i,"leaflet-interactive"),this._updateStyle(t),this._layers[O(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Z(t._path),t.removeInteractiveTarget(t._path),delete this._layers[O(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,o=t.options;!i||(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,ti(t._parts,i))},_updateCircle:function(t){var i=t._point,o=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||o,u="a"+o+","+l+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(i.x-o)+","+i.y+u+o*2+",0 "+u+-o*2+",0 ";this._setPath(t,d)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){Gt(t._path)},_bringToBack:function(t){Vt(t._path)}});N.vml&&He.include(ho);function os(t){return N.svg||N.vml?new He(t):null}G.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&ss(t)||os(t)}});var rs=Pe.extend({initialize:function(t,i){Pe.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=rt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function uo(t,i){return new rs(t,i)}He.create=Ai,He.pointsToPath=ti,Zt.geometryToLayer=xn,Zt.coordsToLatLng=Ln,Zt.coordsToLatLngs=Ii,Zt.latLngToCoords=Cn,Zt.latLngsToCoords=bi,Zt.getFeature=xe,Zt.asFeature=Si,G.mergeOptions({boxZoom:!0});var as=Nt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Z(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),f(),g(),this._startPoint=this._map.mouseEventToContainerPoint(t),Y(document,{contextmenu:le,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=U("div","leaflet-zoom-box",this._container),R(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new Q(this._point,this._startPoint),o=i.getSize();a(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(Z(this._box),it(this._container,"leaflet-crosshair")),c(),T(),$(document,{contextmenu:le,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(B(this._resetState,this),0);var i=new nt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});G.addInitHook("addHandler","boxZoom",as),G.mergeOptions({doubleClickZoom:!0});var ls=Nt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,o=i.getZoom(),l=i.options.zoomDelta,u=t.originalEvent.shiftKey?o-l:o+l;i.options.doubleClickZoom==="center"?i.setZoom(u):i.setZoomAround(t.containerPoint,u)}});G.addInitHook("addHandler","doubleClickZoom",ls),G.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hs=Nt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Jt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}R(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){it(this._map._container,"leaflet-grab"),it(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=rt(this._map.options.maxBounds);this._offsetLimit=Pt(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),o=this._initialWorldOffset,l=this._draggable._newPos.x,u=(l-i+o)%t+i-o,d=(l+i+o)%t-i-o,_=Math.abs(u+o)<Math.abs(d+o)?u:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_},_onDragEnd:function(t){var i=this._map,o=i.options,l=!o.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),l)i.fire("moveend");else{this._prunePositions(+new Date);var u=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,_=o.easeLinearity,P=u.multiplyBy(_/d),x=P.distanceTo([0,0]),I=Math.min(o.inertiaMaxSpeed,x),M=P.multiplyBy(I/x),q=I/(o.inertiaDeceleration*_),V=M.multiplyBy(-q/2).round();!V.x&&!V.y?i.fire("moveend"):(V=i._limitOffset(V,i.options.maxBounds),ct(function(){i.panBy(V,{duration:q,easeLinearity:_,noMoveStart:!0,animate:!0})}))}}});G.addInitHook("addHandler","dragging",hs),G.mergeOptions({keyboard:!0,keyboardPanDelta:80});var us=Nt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Y(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,o=t.scrollTop||i.scrollTop,l=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(l,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},o=this.keyCodes,l,u;for(l=0,u=o.left.length;l<u;l++)i[o.left[l]]=[-1*t,0];for(l=0,u=o.right.length;l<u;l++)i[o.right[l]]=[t,0];for(l=0,u=o.down.length;l<u;l++)i[o.down[l]]=[0,t];for(l=0,u=o.up.length;l<u;l++)i[o.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},o=this.keyCodes,l,u;for(l=0,u=o.zoomIn.length;l<u;l++)i[o.zoomIn[l]]=t;for(l=0,u=o.zoomOut.length;l<u;l++)i[o.zoomOut[l]]=-t},_addHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,o=this._map,l;if(i in this._panKeys)(!o._panAnim||!o._panAnim._inProgress)&&(l=this._panKeys[i],t.shiftKey&&(l=W(l).multiplyBy(3)),o.panBy(l),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds));else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;le(t)}}});G.addInitHook("addHandler","keyboard",us),G.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fs=Nt.extend({addHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=Yn(t),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(B(this._performZoom,this),l),le(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,d=o?Math.ceil(u/o)*o:u,_=t._limitZoom(i+(this._delta>0?d:-d))-i;this._delta=0,this._startTime=null,_&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+_):t.setZoomAround(this._lastMousePos,i+_))}});G.addInitHook("addHandler","scrollWheelZoom",fs);var fo=600;G.mergeOptions({tapHold:N.touchNative&&N.safari&&N.mobile,tapTolerance:15});var cs=Nt.extend({addHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new k(i.clientX,i.clientY),this._holdTimeout=setTimeout(B(function(){this._cancel(),this._isTapValid()&&(Y(document,"touchend",dt),Y(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),fo),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){$(document,"touchend",dt),$(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),$(document,"touchend touchcancel contextmenu",this._cancel,this),$(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new k(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});o._simulated=!0,i.target.dispatchEvent(o)}});G.addInitHook("addHandler","tapHold",cs),G.mergeOptions({touchZoom:N.touch,bounceAtZoomLimits:!0});var ds=Nt.extend({addHooks:function(){R(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){it(this._map._container,"leaflet-touch-zoom"),$(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var o=i.mouseEventToContainerPoint(t.touches[0]),l=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(l)._divideBy(2))),this._startDist=o.distanceTo(l),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),dt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,o=i.mouseEventToContainerPoint(t.touches[0]),l=i.mouseEventToContainerPoint(t.touches[1]),u=o.distanceTo(l)/this._startDist;if(this._zoom=i.getScaleZoom(u,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&u<1||this._zoom>i.getMaxZoom()&&u>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,u===1)return}else{var d=o._add(l)._divideBy(2)._subtract(this._centerPoint);if(u===1&&d.x===0&&d.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),ht(this._animRequest);var _=B(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=ct(_,this,!0),dt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ht(this._animRequest),$(document,"touchmove",this._onTouchMove,this),$(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});G.addInitHook("addHandler","touchZoom",ds),G.BoxZoom=as,G.DoubleClickZoom=ls,G.Drag=hs,G.Keyboard=us,G.ScrollWheelZoom=fs,G.TapHold=cs,G.TouchZoom=ds,v.Bounds=Q,v.Browser=N,v.CRS=bt,v.Canvas=ns,v.Circle=Pn,v.CircleMarker=Ti,v.Class=It,v.Control=Et,v.DivIcon=ts,v.DivOverlay=Dt,v.DomEvent=Es,v.DomUtil=ut,v.Draggable=Jt,v.Evented=ie,v.FeatureGroup=ye,v.GeoJSON=Zt,v.GridLayer=We,v.Handler=Nt,v.Icon=ge,v.ImageOverlay=Ei,v.LatLng=K,v.LatLngBounds=nt,v.Layer=Ot,v.LayerGroup=ve,v.LineUtil=Zs,v.Map=G,v.Marker=wi,v.Mixin=Xs,v.Path=Kt,v.Point=k,v.PolyUtil=Fs,v.Polygon=Pe,v.Polyline=zt,v.Popup=Oi,v.PosAnimation=kn,v.Projection=Ws,v.Rectangle=rs,v.Renderer=Ft,v.SVG=He,v.SVGOverlay=Qn,v.TileLayer=Le,v.Tooltip=Bi,v.Transformation=Ee,v.Util=ki,v.VideoOverlay=jn,v.bind=B,v.bounds=Pt,v.canvas=ss,v.circle=$s,v.circleMarker=Ks,v.control=ze,v.divIcon=ro,v.extend=w,v.featureGroup=Gs,v.geoJSON=$n,v.geoJson=to,v.gridLayer=ao,v.icon=Vs,v.imageOverlay=eo,v.latLng=tt,v.latLngBounds=rt,v.layerGroup=Us,v.map=Os,v.marker=Js,v.point=W,v.polygon=Qs,v.polyline=js,v.popup=so,v.rectangle=uo,v.setOptions=J,v.stamp=O,v.svg=os,v.svgOverlay=no,v.tileLayer=es,v.tooltip=oo,v.transformation=ne,v.version=E,v.videoOverlay=io;var co=window.L;v.noConflict=function(){return window.L=co,this},window.L=v})})(On,On.exports);const H=On.exports;const Fo="https://tile.openstreetmap.org/{z}/{x}/{y}.png",Wo='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';function qo(){const m=Bt(null);return{init:(v,E,w=14)=>{m.value=H.map(v).setView(E,w).addLayer(H.tileLayer(Fo,{attribution:Wo}))},map:m}}const Ho={class:"the-info"},Uo=At({__name:"TheInfo",props:{label:null},setup(m){const r=m;return(v,E)=>(st(),ft("div",Ho,[Yi(Xt(r.label)+" ",1),Di(v.$slots,"default",{},void 0,!0)]))}});const Go=ee(Uo,[["__scopeId","data-v-42ce6754"]]);var ws={exports:{}};(function(m){var r={},v=!1;m.exports?(m.exports=r,v=!0):typeof document<"u"?window.ClipperLib=r:self.ClipperLib=r;var E;if(v){var w="chrome";E="Netscape"}else{var w=navigator.userAgent.toString().toLowerCase();E=navigator.appName}var S={};w.indexOf("chrome")!=-1&&w.indexOf("chromium")==-1?S.chrome=1:S.chrome=0,w.indexOf("chromium")!=-1?S.chromium=1:S.chromium=0,w.indexOf("safari")!=-1&&w.indexOf("chrome")==-1&&w.indexOf("chromium")==-1?S.safari=1:S.safari=0,w.indexOf("firefox")!=-1?S.firefox=1:S.firefox=0,w.indexOf("firefox/17")!=-1?S.firefox17=1:S.firefox17=0,w.indexOf("firefox/15")!=-1?S.firefox15=1:S.firefox15=0,w.indexOf("firefox/3")!=-1?S.firefox3=1:S.firefox3=0,w.indexOf("opera")!=-1?S.opera=1:S.opera=0,w.indexOf("msie 10")!=-1?S.msie10=1:S.msie10=0,w.indexOf("msie 9")!=-1?S.msie9=1:S.msie9=0,w.indexOf("msie 8")!=-1?S.msie8=1:S.msie8=0,w.indexOf("msie 7")!=-1?S.msie7=1:S.msie7=0,w.indexOf("msie ")!=-1?S.msie=1:S.msie=0,r.biginteger_used=null;var B;function C(e,n,s){r.biginteger_used=1,e!=null&&(typeof e=="number"&&typeof n>"u"?this.fromInt(e):typeof e=="number"?this.fromNumber(e,n,s):n==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,n))}function O(){return new C(null)}function xt(e,n,s,a,h,f){for(;--f>=0;){var c=n*this[e++]+s[a]+h;h=Math.floor(c/67108864),s[a++]=c&67108863}return h}function yt(e,n,s,a,h,f){for(var c=n&32767,p=n>>15;--f>=0;){var y=this[e]&32767,g=this[e++]>>15,T=p*y+g*c;y=c*y+((T&32767)<<15)+s[a]+(h&1073741823),h=(y>>>30)+(T>>>15)+p*g+(h>>>30),s[a++]=y&1073741823}return h}function j(e,n,s,a,h,f){for(var c=n&16383,p=n>>14;--f>=0;){var y=this[e]&16383,g=this[e++]>>14,T=p*y+g*c;y=c*y+((T&16383)<<14)+s[a]+h,h=(y>>28)+(T>>14)+p*g,s[a++]=y&268435455}return h}E=="Microsoft Internet Explorer"?(C.prototype.am=yt,B=30):E!="Netscape"?(C.prototype.am=xt,B=26):(C.prototype.am=j,B=28),C.prototype.DB=B,C.prototype.DM=(1<<B)-1,C.prototype.DV=1<<B;var lt=52;C.prototype.FV=Math.pow(2,lt),C.prototype.F1=lt-B,C.prototype.F2=2*B-lt;var pt="0123456789abcdefghijklmnopqrstuvwxyz",Lt=new Array,J,_t;for(J="0".charCodeAt(0),_t=0;_t<=9;++_t)Lt[J++]=_t;for(J="a".charCodeAt(0),_t=10;_t<36;++_t)Lt[J++]=_t;for(J="A".charCodeAt(0),_t=10;_t<36;++_t)Lt[J++]=_t;function Ge(e){return pt.charAt(e)}function Te(e,n){var s=Lt[e.charCodeAt(n)];return s==null?-1:s}function Ct(e){for(var n=this.t-1;n>=0;--n)e[n]=this[n];e.t=this.t,e.s=this.s}function Ie(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function gt(e){var n=O();return n.fromInt(e),n}function be(e,n){var s;if(n==16)s=4;else if(n==8)s=3;else if(n==256)s=8;else if(n==2)s=1;else if(n==32)s=5;else if(n==4)s=2;else{this.fromRadix(e,n);return}this.t=0,this.s=0;for(var a=e.length,h=!1,f=0;--a>=0;){var c=s==8?e[a]&255:Te(e,a);if(c<0){e.charAt(a)=="-"&&(h=!0);continue}h=!1,f==0?this[this.t++]=c:f+s>this.DB?(this[this.t-1]|=(c&(1<<this.DB-f)-1)<<f,this[this.t++]=c>>this.DB-f):this[this.t-1]|=c<<f,f+=s,f>=this.DB&&(f-=this.DB)}s==8&&(e[0]&128)!=0&&(this.s=-1,f>0&&(this[this.t-1]|=(1<<this.DB-f)-1<<f)),this.clamp(),h&&C.ZERO.subTo(this,this)}function Ve(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function Je(e){if(this.s<0)return"-"+this.negate().toString(e);var n;if(e==16)n=4;else if(e==8)n=3;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else return this.toRadix(e);var s=(1<<n)-1,a,h=!1,f="",c=this.t,p=this.DB-c*this.DB%n;if(c-- >0)for(p<this.DB&&(a=this[c]>>p)>0&&(h=!0,f=Ge(a));c>=0;)p<n?(a=(this[c]&(1<<p)-1)<<n-p,a|=this[--c]>>(p+=this.DB-n)):(a=this[c]>>(p-=n)&s,p<=0&&(p+=this.DB,--c)),a>0&&(h=!0),h&&(f+=Ge(a));return h?f:"0"}function Se(){var e=O();return C.ZERO.subTo(this,e),e}function Ke(){return this.s<0?this.negate():this}function ct(e){var n=this.s-e.s;if(n!=0)return n;var s=this.t;if(n=s-e.t,n!=0)return this.s<0?-n:n;for(;--s>=0;)if((n=this[s]-e[s])!=0)return n;return 0}function ht(e){var n=1,s;return(s=e>>>16)!=0&&(e=s,n+=16),(s=e>>8)!=0&&(e=s,n+=8),(s=e>>4)!=0&&(e=s,n+=4),(s=e>>2)!=0&&(e=s,n+=2),(s=e>>1)!=0&&(e=s,n+=1),n}function ki(){return this.t<=0?0:this.DB*(this.t-1)+ht(this[this.t-1]^this.s&this.DM)}function It(e,n){var s;for(s=this.t-1;s>=0;--s)n[s+e]=this[s];for(s=e-1;s>=0;--s)n[s]=0;n.t=this.t+e,n.s=this.s}function Ri(e,n){for(var s=e;s<this.t;++s)n[s-e]=this[s];n.t=Math.max(this.t-e,0),n.s=this.s}function mt(e,n){var s=e%this.DB,a=this.DB-s,h=(1<<a)-1,f=Math.floor(e/this.DB),c=this.s<<s&this.DM,p;for(p=this.t-1;p>=0;--p)n[p+f+1]=this[p]>>a|c,c=(this[p]&h)<<s;for(p=f-1;p>=0;--p)n[p]=0;n[f]=c,n.t=this.t+f+1,n.s=this.s,n.clamp()}function ie(e,n){n.s=this.s;var s=Math.floor(e/this.DB);if(s>=this.t){n.t=0;return}var a=e%this.DB,h=this.DB-a,f=(1<<a)-1;n[0]=this[s]>>a;for(var c=s+1;c<this.t;++c)n[c-s-1]|=(this[c]&f)<<h,n[c-s]=this[c]>>a;a>0&&(n[this.t-s-1]|=(this.s&f)<<h),n.t=this.t-s,n.clamp()}function k(e,n){for(var s=0,a=0,h=Math.min(e.t,this.t);s<h;)a+=this[s]-e[s],n[s++]=a&this.DM,a>>=this.DB;if(e.t<this.t){for(a-=e.s;s<this.t;)a+=this[s],n[s++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;s<e.t;)a-=e[s],n[s++]=a&this.DM,a>>=this.DB;a-=e.s}n.s=a<0?-1:0,a<-1?n[s++]=this.DV+a:a>0&&(n[s++]=a),n.t=s,n.clamp()}function $e(e,n){var s=this.abs(),a=e.abs(),h=s.t;for(n.t=h+a.t;--h>=0;)n[h]=0;for(h=0;h<a.t;++h)n[h+s.t]=s.am(0,a[h],n,h,0,s.t);n.s=0,n.clamp(),this.s!=e.s&&C.ZERO.subTo(n,n)}function W(e){for(var n=this.abs(),s=e.t=2*n.t;--s>=0;)e[s]=0;for(s=0;s<n.t-1;++s){var a=n.am(s,n[s],e,2*s,0,1);(e[s+n.t]+=n.am(s+1,2*n[s],e,2*s+1,a,n.t-s-1))>=n.DV&&(e[s+n.t]-=n.DV,e[s+n.t+1]=1)}e.t>0&&(e[e.t-1]+=n.am(s,n[s],e,2*s,0,1)),e.s=0,e.clamp()}function Q(e,n,s){var a=e.abs();if(!(a.t<=0)){var h=this.abs();if(h.t<a.t){n!=null&&n.fromInt(0),s!=null&&this.copyTo(s);return}s==null&&(s=O());var f=O(),c=this.s,p=e.s,y=this.DB-ht(a[a.t-1]);y>0?(a.lShiftTo(y,f),h.lShiftTo(y,s)):(a.copyTo(f),h.copyTo(s));var g=f.t,T=f[g-1];if(T!=0){var b=T*(1<<this.F1)+(g>1?f[g-2]>>this.F2:0),A=this.FV/b,X=(1<<this.F1)/b,D=1<<this.F2,F=s.t,et=F-g,ut=n==null?O():n;for(f.dlShiftTo(et,ut),s.compareTo(ut)>=0&&(s[s.t++]=1,s.subTo(ut,s)),C.ONE.dlShiftTo(g,ut),ut.subTo(f,f);f.t<g;)f[f.t++]=0;for(;--et>=0;){var Y=s[--F]==T?this.DM:Math.floor(s[F]*A+(s[F-1]+D)*X);if((s[F]+=f.am(0,Y,s,et,0,g))<Y)for(f.dlShiftTo(et,ut),s.subTo(ut,s);s[F]<--Y;)s.subTo(ut,s)}n!=null&&(s.drShiftTo(g,n),c!=p&&C.ZERO.subTo(n,n)),s.t=g,s.clamp(),y>0&&s.rShiftTo(y,s),c<0&&C.ZERO.subTo(s,s)}}}function Pt(e){var n=O();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(C.ZERO)>0&&e.subTo(n,n),n}function nt(e){this.m=e}function rt(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function K(e){return e}function tt(e){e.divRemTo(this.m,null,e)}function bt(e,n,s){e.multiplyTo(n,s),this.reduce(s)}function Mt(e,n){e.squareTo(n),this.reduce(n)}nt.prototype.convert=rt,nt.prototype.revert=K,nt.prototype.reduce=tt,nt.prototype.mulTo=bt,nt.prototype.sqrTo=Mt;function je(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var n=e&3;return n=n*(2-(e&15)*n)&15,n=n*(2-(e&255)*n)&255,n=n*(2-((e&65535)*n&65535))&65535,n=n*(2-e*n%this.DV)%this.DV,n>0?this.DV-n:-n}function St(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Ee(e){var n=O();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(C.ZERO)>0&&this.m.subTo(n,n),n}function ne(e){var n=O();return e.copyTo(n),this.reduce(n),n}function Oe(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var n=0;n<this.m.t;++n){var s=e[n]&32767,a=s*this.mpl+((s*this.mph+(e[n]>>15)*this.mpl&this.um)<<15)&e.DM;for(s=n+this.m.t,e[s]+=this.m.am(0,a,e,n,0,this.m.t);e[s]>=e.DV;)e[s]-=e.DV,e[++s]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function zi(e,n){e.squareTo(n),this.reduce(n)}function Qe(e,n,s){e.multiplyTo(n,s),this.reduce(s)}St.prototype.convert=Ee,St.prototype.revert=ne,St.prototype.reduce=Oe,St.prototype.mulTo=Qe,St.prototype.sqrTo=zi;function ti(){return(this.t>0?this[0]&1:this.s)==0}function Be(e,n){if(e>4294967295||e<1)return C.ONE;var s=O(),a=O(),h=n.convert(this),f=ht(e)-1;for(h.copyTo(s);--f>=0;)if(n.sqrTo(s,a),(e&1<<f)>0)n.mulTo(a,h,s);else{var c=s;s=a,a=c}return n.revert(s)}function ce(e,n){var s;return e<256||n.isEven()?s=new nt(n):s=new St(n),this.exp(e,s)}C.prototype.copyTo=Ct,C.prototype.fromInt=Ie,C.prototype.fromString=be,C.prototype.clamp=Ve,C.prototype.dlShiftTo=It,C.prototype.drShiftTo=Ri,C.prototype.lShiftTo=mt,C.prototype.rShiftTo=ie,C.prototype.subTo=k,C.prototype.multiplyTo=$e,C.prototype.squareTo=W,C.prototype.divRemTo=Q,C.prototype.invDigit=je,C.prototype.isEven=ti,C.prototype.exp=Be,C.prototype.toString=Je,C.prototype.negate=Se,C.prototype.abs=Ke,C.prototype.compareTo=ct,C.prototype.bitLength=ki,C.prototype.mod=Pt,C.prototype.modPowInt=ce,C.ZERO=gt(0),C.ONE=gt(1);function Zi(){var e=O();return this.copyTo(e),e}function ei(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ae(){return this.t==0?this.s:this[0]<<24>>24}function ii(){return this.t==0?this.s:this[0]<<16>>16}function ni(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Fi(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Wi(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var n=this.chunkSize(e),s=Math.pow(e,n),a=gt(s),h=O(),f=O(),c="";for(this.divRemTo(a,h,f);h.signum()>0;)c=(s+f.intValue()).toString(e).substr(1)+c,h.divRemTo(a,h,f);return f.intValue().toString(e)+c}function Me(e,n){this.fromInt(0),n==null&&(n=10);for(var s=this.chunkSize(n),a=Math.pow(n,s),h=!1,f=0,c=0,p=0;p<e.length;++p){var y=Te(e,p);if(y<0){e.charAt(p)=="-"&&this.signum()==0&&(h=!0);continue}c=n*c+y,++f>=s&&(this.dMultiply(a),this.dAddOffset(c,0),f=0,c=0)}f>0&&(this.dMultiply(Math.pow(n,f)),this.dAddOffset(c,0)),h&&C.ZERO.subTo(this,this)}function si(e,n,s){if(typeof n=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,s),this.testBit(e-1)||this.bitwiseTo(C.ONE.shiftLeft(e-1),de,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(C.ONE.shiftLeft(e-1),this);else{var a=new Array,h=e&7;a.length=(e>>3)+1,n.nextBytes(a),h>0?a[0]&=(1<<h)-1:a[0]=0,this.fromString(a,256)}}function oi(){var e=this.t,n=new Array;n[0]=this.s;var s=this.DB-e*this.DB%8,a,h=0;if(e-- >0)for(s<this.DB&&(a=this[e]>>s)!=(this.s&this.DM)>>s&&(n[h++]=a|this.s<<this.DB-s);e>=0;)s<8?(a=(this[e]&(1<<s)-1)<<8-s,a|=this[--e]>>(s+=this.DB-8)):(a=this[e]>>(s-=8)&255,s<=0&&(s+=this.DB,--e)),(a&128)!=0&&(a|=-256),h==0&&(this.s&128)!=(a&128)&&++h,(h>0||a!=this.s)&&(n[h++]=a);return n}function qi(e){return this.compareTo(e)==0}function ri(e){return this.compareTo(e)<0?this:e}function ai(e){return this.compareTo(e)>0?this:e}function Hi(e,n,s){var a,h,f=Math.min(e.t,this.t);for(a=0;a<f;++a)s[a]=n(this[a],e[a]);if(e.t<this.t){for(h=e.s&this.DM,a=f;a<this.t;++a)s[a]=n(this[a],h);s.t=this.t}else{for(h=this.s&this.DM,a=f;a<e.t;++a)s[a]=n(h,e[a]);s.t=e.t}s.s=n(this.s,e.s),s.clamp()}function li(e,n){return e&n}function Ne(e){var n=O();return this.bitwiseTo(e,li,n),n}function de(e,n){return e|n}function Ui(e){var n=O();return this.bitwiseTo(e,de,n),n}function qt(e,n){return e^n}function Gi(e){var n=O();return this.bitwiseTo(e,qt,n),n}function hi(e,n){return e&~n}function ui(e){var n=O();return this.bitwiseTo(e,hi,n),n}function fi(){for(var e=O(),n=0;n<this.t;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function ci(e){var n=O();return e<0?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function Vi(e){var n=O();return e<0?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function Ji(e){if(e==0)return-1;var n=0;return(e&65535)==0&&(e>>=16,n+=16),(e&255)==0&&(e>>=8,n+=8),(e&15)==0&&(e>>=4,n+=4),(e&3)==0&&(e>>=2,n+=2),(e&1)==0&&++n,n}function Ki(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+Ji(this[e]);return this.s<0?this.t*this.DB:-1}function $i(e){for(var n=0;e!=0;)e&=e-1,++n;return n}function ji(){for(var e=0,n=this.s&this.DM,s=0;s<this.t;++s)e+=$i(this[s]^n);return e}function Qi(e){var n=Math.floor(e/this.DB);return n>=this.t?this.s!=0:(this[n]&1<<e%this.DB)!=0}function De(e,n){var s=C.ONE.shiftLeft(e);return this.bitwiseTo(s,n,s),s}function tn(e){return this.changeBit(e,de)}function en(e){return this.changeBit(e,hi)}function wt(e){return this.changeBit(e,qt)}function N(e,n){for(var s=0,a=0,h=Math.min(e.t,this.t);s<h;)a+=this[s]+e[s],n[s++]=a&this.DM,a>>=this.DB;if(e.t<this.t){for(a+=e.s;s<this.t;)a+=this[s],n[s++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;s<e.t;)a+=e[s],n[s++]=a&this.DM,a>>=this.DB;a+=e.s}n.s=a<0?-1:0,a>0?n[s++]=a:a<-1&&(n[s++]=this.DV+a),n.t=s,n.clamp()}function di(e){var n=O();return this.addTo(e,n),n}function pi(e){var n=O();return this.subTo(e,n),n}function _i(e){var n=O();return this.multiplyTo(e,n),n}function mi(){var e=O();return this.squareTo(e),e}function Xe(e){var n=O();return this.divRemTo(e,n,null),n}function vi(e){var n=O();return this.divRemTo(e,null,n),n}function Ht(e){var n=O(),s=O();return this.divRemTo(e,n,s),new Array(n,s)}function yi(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function nn(e,n){if(e!=0){for(;this.t<=n;)this[this.t++]=0;for(this[n]+=e;this[n]>=this.DV;)this[n]-=this.DV,++n>=this.t&&(this[this.t++]=0),++this[n]}}function se(){}function gi(e){return e}function sn(e,n,s){e.multiplyTo(n,s)}function Pi(e,n){e.squareTo(n)}se.prototype.convert=gi,se.prototype.revert=gi,se.prototype.mulTo=sn,se.prototype.sqrTo=Pi;function on(e){return this.exp(e,new se)}function pe(e,n,s){var a=Math.min(this.t+e.t,n);for(s.s=0,s.t=a;a>0;)s[--a]=0;var h;for(h=s.t-this.t;a<h;++a)s[a+this.t]=this.am(0,e[a],s,a,0,this.t);for(h=Math.min(e.t,n);a<h;++a)this.am(0,e[a],s,a,0,n-a);s.clamp()}function rn(e,n,s){--n;var a=s.t=this.t+e.t-n;for(s.s=0;--a>=0;)s[a]=0;for(a=Math.max(n-this.t,0);a<e.t;++a)s[this.t+a-n]=this.am(n-a,e[a],s,0,0,this.t+a-n);s.clamp(),s.drShiftTo(1,s)}function Ut(e){this.r2=O(),this.q3=O(),C.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function an(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var n=O();return e.copyTo(n),this.reduce(n),n}function ln(e){return e}function hn(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ye(e,n){e.squareTo(n),this.reduce(n)}function oe(e,n,s){e.multiplyTo(n,s),this.reduce(s)}Ut.prototype.convert=an,Ut.prototype.revert=ln,Ut.prototype.reduce=hn,Ut.prototype.mulTo=oe,Ut.prototype.sqrTo=Ye;function xi(e,n){var s=e.bitLength(),a,h=gt(1),f;if(s<=0)return h;s<18?a=1:s<48?a=3:s<144?a=4:s<768?a=5:a=6,s<8?f=new nt(n):n.isEven()?f=new Ut(n):f=new St(n);var c=new Array,p=3,y=a-1,g=(1<<a)-1;if(c[1]=f.convert(this),a>1){var T=O();for(f.sqrTo(c[1],T);p<=g;)c[p]=O(),f.mulTo(T,c[p-2],c[p]),p+=2}var b=e.t-1,A,X=!0,D=O(),F;for(s=ht(e[b])-1;b>=0;){for(s>=y?A=e[b]>>s-y&g:(A=(e[b]&(1<<s+1)-1)<<y-s,b>0&&(A|=e[b-1]>>this.DB+s-y)),p=a;(A&1)==0;)A>>=1,--p;if((s-=p)<0&&(s+=this.DB,--b),X)c[A].copyTo(h),X=!1;else{for(;p>1;)f.sqrTo(h,D),f.sqrTo(D,h),p-=2;p>0?f.sqrTo(h,D):(F=h,h=D,D=F),f.mulTo(D,c[A],h)}for(;b>=0&&(e[b]&1<<s)==0;)f.sqrTo(h,D),F=h,h=D,D=F,--s<0&&(s=this.DB-1,--b)}return f.revert(h)}function Li(e){var n=this.s<0?this.negate():this.clone(),s=e.s<0?e.negate():e.clone();if(n.compareTo(s)<0){var a=n;n=s,s=a}var h=n.getLowestSetBit(),f=s.getLowestSetBit();if(f<0)return n;for(h<f&&(f=h),f>0&&(n.rShiftTo(f,n),s.rShiftTo(f,s));n.signum()>0;)(h=n.getLowestSetBit())>0&&n.rShiftTo(h,n),(h=s.getLowestSetBit())>0&&s.rShiftTo(h,s),n.compareTo(s)>=0?(n.subTo(s,n),n.rShiftTo(1,n)):(s.subTo(n,s),s.rShiftTo(1,s));return f>0&&s.lShiftTo(f,s),s}function re(e){if(e<=0)return 0;var n=this.DV%e,s=this.s<0?e-1:0;if(this.t>0)if(n==0)s=this[0]%e;else for(var a=this.t-1;a>=0;--a)s=(n*s+this[a])%e;return s}function U(e){var n=e.isEven();if(this.isEven()&&n||e.signum()==0)return C.ZERO;for(var s=e.clone(),a=this.clone(),h=gt(1),f=gt(0),c=gt(0),p=gt(1);s.signum()!=0;){for(;s.isEven();)s.rShiftTo(1,s),n?((!h.isEven()||!f.isEven())&&(h.addTo(this,h),f.subTo(e,f)),h.rShiftTo(1,h)):f.isEven()||f.subTo(e,f),f.rShiftTo(1,f);for(;a.isEven();)a.rShiftTo(1,a),n?((!c.isEven()||!p.isEven())&&(c.addTo(this,c),p.subTo(e,p)),c.rShiftTo(1,c)):p.isEven()||p.subTo(e,p),p.rShiftTo(1,p);s.compareTo(a)>=0?(s.subTo(a,s),n&&h.subTo(c,h),f.subTo(p,f)):(a.subTo(s,a),n&&c.subTo(h,c),p.subTo(f,p))}if(a.compareTo(C.ONE)!=0)return C.ZERO;if(p.compareTo(e)>=0)return p.subtract(e);if(p.signum()<0)p.addTo(e,p);else return p;return p.signum()<0?p.add(e):p}var Z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],_e=(1<<26)/Z[Z.length-1];function Gt(e){var n,s=this.abs();if(s.t==1&&s[0]<=Z[Z.length-1]){for(n=0;n<Z.length;++n)if(s[0]==Z[n])return!0;return!1}if(s.isEven())return!1;for(n=1;n<Z.length;){for(var a=Z[n],h=n+1;h<Z.length&&a<_e;)a*=Z[h++];for(a=s.modInt(a);n<h;)if(a%Z[n++]==0)return!1}return s.millerRabin(e)}function Vt(e){var n=this.subtract(C.ONE),s=n.getLowestSetBit();if(s<=0)return!1;var a=n.shiftRight(s);e=e+1>>1,e>Z.length&&(e=Z.length);for(var h=O(),f=0;f<e;++f){h.fromInt(Z[Math.floor(Math.random()*Z.length)]);var c=h.modPow(a,this);if(c.compareTo(C.ONE)!=0&&c.compareTo(n)!=0){for(var p=1;p++<s&&c.compareTo(n)!=0;)if(c=c.modPowInt(2,this),c.compareTo(C.ONE)==0)return!1;if(c.compareTo(n)!=0)return!1}}return!0}C.prototype.chunkSize=ni,C.prototype.toRadix=Wi,C.prototype.fromRadix=Me,C.prototype.fromNumber=si,C.prototype.bitwiseTo=Hi,C.prototype.changeBit=De,C.prototype.addTo=N,C.prototype.dMultiply=yi,C.prototype.dAddOffset=nn,C.prototype.multiplyLowerTo=pe,C.prototype.multiplyUpperTo=rn,C.prototype.modInt=re,C.prototype.millerRabin=Vt,C.prototype.clone=Zi,C.prototype.intValue=ei,C.prototype.byteValue=Ae,C.prototype.shortValue=ii,C.prototype.signum=Fi,C.prototype.toByteArray=oi,C.prototype.equals=qi,C.prototype.min=ri,C.prototype.max=ai,C.prototype.and=Ne,C.prototype.or=Ui,C.prototype.xor=Gi,C.prototype.andNot=ui,C.prototype.not=fi,C.prototype.shiftLeft=ci,C.prototype.shiftRight=Vi,C.prototype.getLowestSetBit=Ki,C.prototype.bitCount=ji,C.prototype.testBit=Qi,C.prototype.setBit=tn,C.prototype.clearBit=en,C.prototype.flipBit=wt,C.prototype.add=di,C.prototype.subtract=pi,C.prototype.multiply=_i,C.prototype.divide=Xe,C.prototype.remainder=vi,C.prototype.divideAndRemainder=Ht,C.prototype.modPow=xi,C.prototype.modInverse=U,C.prototype.pow=on,C.prototype.gcd=Li,C.prototype.isProbablePrime=Gt,C.prototype.square=mi;var z=C;if(z.prototype.IsNegative=function(){return this.compareTo(z.ZERO)==-1},z.op_Equality=function(e,n){return e.compareTo(n)==0},z.op_Inequality=function(e,n){return e.compareTo(n)!=0},z.op_GreaterThan=function(e,n){return e.compareTo(n)>0},z.op_LessThan=function(e,n){return e.compareTo(n)<0},z.op_Addition=function(e,n){return new z(e).add(new z(n))},z.op_Subtraction=function(e,n){return new z(e).subtract(new z(n))},z.Int128Mul=function(e,n){return new z(e).multiply(new z(n))},z.op_Division=function(e,n){return e.divide(n)},z.prototype.ToDouble=function(){return parseFloat(this.toString())},typeof R>"u")var R=function(e,n){var s;if(typeof Object.getOwnPropertyNames>"u"){for(s in n.prototype)(typeof e.prototype[s]>"u"||e.prototype[s]==Object.prototype[s])&&(e.prototype[s]=n.prototype[s]);for(s in n)typeof e[s]>"u"&&(e[s]=n[s]);e.$baseCtor=n}else{for(var a=Object.getOwnPropertyNames(n.prototype),h=0;h<a.length;h++)typeof Object.getOwnPropertyDescriptor(e.prototype,a[h])>"u"&&Object.defineProperty(e.prototype,a[h],Object.getOwnPropertyDescriptor(n.prototype,a[h]));for(s in n)typeof e[s]>"u"&&(e[s]=n[s]);e.$baseCtor=n}};r.Path=function(){return[]},r.Paths=function(){return[]},r.DoublePoint=function(){var e=arguments;this.X=0,this.Y=0,e.length==1?(this.X=e[0].X,this.Y=e[0].Y):e.length==2&&(this.X=e[0],this.Y=e[1])},r.DoublePoint0=function(){this.X=0,this.Y=0},r.DoublePoint1=function(e){this.X=e.X,this.Y=e.Y},r.DoublePoint2=function(e,n){this.X=e,this.Y=n},r.PolyNode=function(){this.m_Parent=null,this.m_polygon=new r.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},r.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,n=this.m_Parent;n!==null;)e=!e,n=n.m_Parent;return e},r.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},r.PolyNode.prototype.Contour=function(){return this.m_polygon},r.PolyNode.prototype.AddChild=function(e){var n=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=n},r.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},r.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},r.PolyNode.prototype.Childs=function(){return this.m_Childs},r.PolyNode.prototype.Parent=function(){return this.m_Parent},r.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},r.PolyTree=function(){this.m_AllPolys=[],r.PolyNode.call(this)},r.PolyTree.prototype.Clear=function(){for(var e=0,n=this.m_AllPolys.length;e<n;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},r.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},r.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},R(r.PolyTree,r.PolyNode),r.Math_Abs_Int64=r.Math_Abs_Int32=r.Math_Abs_Double=function(e){return Math.abs(e)},r.Math_Max_Int32_Int32=function(e,n){return Math.max(e,n)},S.msie||S.opera||S.safari?r.Cast_Int32=function(e){return e|0}:r.Cast_Int32=function(e){return~~e},S.chrome?r.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):~~e}:S.firefox&&typeof Number.toInteger=="function"?r.Cast_Int64=function(e){return Number.toInteger(e)}:S.msie7||S.msie8?r.Cast_Int64=function(e){return parseInt(e,10)}:S.msie?r.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):e|0}:r.Cast_Int64=function(e){return e<0?Math.ceil(e):Math.floor(e)},r.Clear=function(e){e.length=0},r.PI=3.141592653589793,r.PI2=2*3.141592653589793,r.IntPoint=function(){var e=arguments,n=e.length;this.X=0,this.Y=0;var s,a;if(n==2)this.X=e[0],this.Y=e[1];else if(n==1)if(e[0]instanceof r.DoublePoint){var s=e[0];this.X=r.Clipper.Round(s.X),this.Y=r.Clipper.Round(s.Y)}else{var a=e[0];this.X=a.X,this.Y=a.Y}else this.X=0,this.Y=0},r.IntPoint.op_Equality=function(e,n){return e.X==n.X&&e.Y==n.Y},r.IntPoint.op_Inequality=function(e,n){return e.X!=n.X||e.Y!=n.Y},r.IntPoint0=function(){this.X=0,this.Y=0},r.IntPoint1=function(e){this.X=e.X,this.Y=e.Y},r.IntPoint1dp=function(e){this.X=r.Clipper.Round(e.X),this.Y=r.Clipper.Round(e.Y)},r.IntPoint2=function(e,n){this.X=e,this.Y=n},r.IntRect=function(){var e=arguments,n=e.length;n==4?(this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3]):n==1?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},r.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},r.IntRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},r.IntRect4=function(e,n,s,a){this.left=e,this.top=n,this.right=s,this.bottom=a},r.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},r.PolyType={ptSubject:0,ptClip:1},r.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},r.JoinType={jtSquare:0,jtRound:1,jtMiter:2},r.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},r.EdgeSide={esLeft:0,esRight:1},r.Direction={dRightToLeft:0,dLeftToRight:1},r.TEdge=function(){this.Bot=new r.IntPoint,this.Curr=new r.IntPoint,this.Top=new r.IntPoint,this.Delta=new r.IntPoint,this.Dx=0,this.PolyTyp=r.PolyType.ptSubject,this.Side=r.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},r.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new r.IntPoint},r.MyIntersectNodeSort=function(){},r.MyIntersectNodeSort.Compare=function(e,n){return n.Pt.Y-e.Pt.Y},r.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},r.Scanbeam=function(){this.Y=0,this.Next=null},r.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},r.OutPt=function(){this.Idx=0,this.Pt=new r.IntPoint,this.Next=null,this.Prev=null},r.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new r.IntPoint},r.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.horizontal=-9007199254740992,r.ClipperBase.Skip=-2,r.ClipperBase.Unassigned=-1,r.ClipperBase.tolerance=1e-20,r.ClipperBase.loRange=47453132,r.ClipperBase.hiRange=0xfffffffffffff,r.ClipperBase.near_zero=function(e){return e>-r.ClipperBase.tolerance&&e<r.ClipperBase.tolerance},r.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0},r.ClipperBase.prototype.PointIsVertex=function(e,n){var s=n;do{if(r.IntPoint.op_Equality(s.Pt,e))return!0;s=s.Next}while(s!=n);return!1},r.ClipperBase.prototype.PointOnLineSegment=function(e,n,s,a){return a?e.X==n.X&&e.Y==n.Y||e.X==s.X&&e.Y==s.Y||e.X>n.X==e.X<s.X&&e.Y>n.Y==e.Y<s.Y&&z.op_Equality(z.Int128Mul(e.X-n.X,s.Y-n.Y),z.Int128Mul(s.X-n.X,e.Y-n.Y)):e.X==n.X&&e.Y==n.Y||e.X==s.X&&e.Y==s.Y||e.X>n.X==e.X<s.X&&e.Y>n.Y==e.Y<s.Y&&(e.X-n.X)*(s.Y-n.Y)==(s.X-n.X)*(e.Y-n.Y)},r.ClipperBase.prototype.PointOnPolygon=function(e,n,s){for(var a=n;;){if(this.PointOnLineSegment(e,a.Pt,a.Next.Pt,s))return!0;if(a=a.Next,a==n)break}return!1},r.ClipperBase.prototype.SlopesEqual=r.ClipperBase.SlopesEqual=function(){var e=arguments,n=e.length,s,a,h,f,c,p,y;return n==3?(s=e[0],a=e[1],y=e[2],y?z.op_Equality(z.Int128Mul(s.Delta.Y,a.Delta.X),z.Int128Mul(s.Delta.X,a.Delta.Y)):r.Cast_Int64(s.Delta.Y*a.Delta.X)==r.Cast_Int64(s.Delta.X*a.Delta.Y)):n==4?(h=e[0],f=e[1],c=e[2],y=e[3],y?z.op_Equality(z.Int128Mul(h.Y-f.Y,f.X-c.X),z.Int128Mul(h.X-f.X,f.Y-c.Y)):r.Cast_Int64((h.Y-f.Y)*(f.X-c.X))-r.Cast_Int64((h.X-f.X)*(f.Y-c.Y))===0):(h=e[0],f=e[1],c=e[2],p=e[3],y=e[4],y?z.op_Equality(z.Int128Mul(h.Y-f.Y,c.X-p.X),z.Int128Mul(h.X-f.X,c.Y-p.Y)):r.Cast_Int64((h.Y-f.Y)*(c.X-p.X))-r.Cast_Int64((h.X-f.X)*(c.Y-p.Y))===0)},r.ClipperBase.SlopesEqual3=function(e,n,s){return s?z.op_Equality(z.Int128Mul(e.Delta.Y,n.Delta.X),z.Int128Mul(e.Delta.X,n.Delta.Y)):r.Cast_Int64(e.Delta.Y*n.Delta.X)==r.Cast_Int64(e.Delta.X*n.Delta.Y)},r.ClipperBase.SlopesEqual4=function(e,n,s,a){return a?z.op_Equality(z.Int128Mul(e.Y-n.Y,n.X-s.X),z.Int128Mul(e.X-n.X,n.Y-s.Y)):r.Cast_Int64((e.Y-n.Y)*(n.X-s.X))-r.Cast_Int64((e.X-n.X)*(n.Y-s.Y))===0},r.ClipperBase.SlopesEqual5=function(e,n,s,a,h){return h?z.op_Equality(z.Int128Mul(e.Y-n.Y,s.X-a.X),z.Int128Mul(e.X-n.X,s.Y-a.Y)):r.Cast_Int64((e.Y-n.Y)*(s.X-a.X))-r.Cast_Int64((e.X-n.X)*(s.Y-a.Y))===0},r.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,n=this.m_edges.length;e<n;++e){for(var s=0,a=this.m_edges[e].length;s<a;++s)this.m_edges[e][s]=null;r.Clear(this.m_edges[e])}r.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},r.ClipperBase.prototype.RangeTest=function(e,n){n.Value?(e.X>r.ClipperBase.hiRange||e.Y>r.ClipperBase.hiRange||-e.X>r.ClipperBase.hiRange||-e.Y>r.ClipperBase.hiRange)&&r.Error("Coordinate outside allowed range in RangeTest()."):(e.X>r.ClipperBase.loRange||e.Y>r.ClipperBase.loRange||-e.X>r.ClipperBase.loRange||-e.Y>r.ClipperBase.loRange)&&(n.Value=!0,this.RangeTest(e,n))},r.ClipperBase.prototype.InitEdge=function(e,n,s,a){e.Next=n,e.Prev=s,e.Curr.X=a.X,e.Curr.Y=a.Y,e.OutIdx=-1},r.ClipperBase.prototype.InitEdge2=function(e,n){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y),this.SetDx(e),e.PolyTyp=n},r.ClipperBase.prototype.FindNextLocMin=function(e){for(var n;;){for(;r.IntPoint.op_Inequality(e.Bot,e.Prev.Bot)||r.IntPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!=r.ClipperBase.horizontal&&e.Prev.Dx!=r.ClipperBase.horizontal)break;for(;e.Prev.Dx==r.ClipperBase.horizontal;)e=e.Prev;for(n=e;e.Dx==r.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!=e.Prev.Bot.Y){n.Prev.Bot.X<e.Bot.X&&(e=n);break}}return e},r.ClipperBase.prototype.ProcessBound=function(e,n){var s=e,a=e,h,f;if(e.Dx==r.ClipperBase.horizontal&&(n?f=e.Prev.Bot.X:f=e.Next.Bot.X,e.Bot.X!=f&&this.ReverseHorizontal(e)),a.OutIdx!=r.ClipperBase.Skip)if(n){for(;a.Top.Y==a.Next.Bot.Y&&a.Next.OutIdx!=r.ClipperBase.Skip;)a=a.Next;if(a.Dx==r.ClipperBase.horizontal&&a.Next.OutIdx!=r.ClipperBase.Skip){for(h=a;h.Prev.Dx==r.ClipperBase.horizontal;)h=h.Prev;h.Prev.Top.X==a.Next.Top.X?n||(a=h.Prev):h.Prev.Top.X>a.Next.Top.X&&(a=h.Prev)}for(;e!=a;)e.NextInLML=e.Next,e.Dx==r.ClipperBase.horizontal&&e!=s&&e.Bot.X!=e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx==r.ClipperBase.horizontal&&e!=s&&e.Bot.X!=e.Prev.Top.X&&this.ReverseHorizontal(e),a=a.Next}else{for(;a.Top.Y==a.Prev.Bot.Y&&a.Prev.OutIdx!=r.ClipperBase.Skip;)a=a.Prev;if(a.Dx==r.ClipperBase.horizontal&&a.Prev.OutIdx!=r.ClipperBase.Skip){for(h=a;h.Next.Dx==r.ClipperBase.horizontal;)h=h.Next;h.Next.Top.X==a.Prev.Top.X?n||(a=h.Next):h.Next.Top.X>a.Prev.Top.X&&(a=h.Next)}for(;e!=a;)e.NextInLML=e.Prev,e.Dx==r.ClipperBase.horizontal&&e!=s&&e.Bot.X!=e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx==r.ClipperBase.horizontal&&e!=s&&e.Bot.X!=e.Next.Top.X&&this.ReverseHorizontal(e),a=a.Prev}if(a.OutIdx==r.ClipperBase.Skip){if(e=a,n){for(;e.Top.Y==e.Next.Bot.Y;)e=e.Next;for(;e!=a&&e.Dx==r.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y==e.Prev.Bot.Y;)e=e.Prev;for(;e!=a&&e.Dx==r.ClipperBase.horizontal;)e=e.Next}if(e==a)n?a=e.Next:a=e.Prev;else{n?e=a.Next:e=a.Prev;var c=new r.LocalMinima;c.Next=null,c.Y=e.Bot.Y,c.LeftBound=null,c.RightBound=e,c.RightBound.WindDelta=0,a=this.ProcessBound(c.RightBound,n),this.InsertLocalMinima(c)}}return a},r.ClipperBase.prototype.AddPath=function(e,n,s){!s&&n==r.PolyType.ptClip&&r.Error("AddPath: Open paths must be subject.");var a=e.length-1;if(s)for(;a>0&&r.IntPoint.op_Equality(e[a],e[0]);)--a;for(;a>0&&r.IntPoint.op_Equality(e[a],e[a-1]);)--a;if(s&&a<2||!s&&a<1)return!1;for(var h=new Array,f=0;f<=a;f++)h.push(new r.TEdge);var c=!0;h[1].Curr.X=e[1].X,h[1].Curr.Y=e[1].Y;var p={Value:this.m_UseFullRange};this.RangeTest(e[0],p),this.m_UseFullRange=p.Value,p.Value=this.m_UseFullRange,this.RangeTest(e[a],p),this.m_UseFullRange=p.Value,this.InitEdge(h[0],h[1],h[a],e[0]),this.InitEdge(h[a],h[0],h[a-1],e[a]);for(var f=a-1;f>=1;--f)p.Value=this.m_UseFullRange,this.RangeTest(e[f],p),this.m_UseFullRange=p.Value,this.InitEdge(h[f],h[f+1],h[f-1],e[f]);for(var y=h[0],g=y,T=y;;){if(r.IntPoint.op_Equality(g.Curr,g.Next.Curr)){if(g==g.Next)break;g==y&&(y=g.Next),g=this.RemoveEdge(g),T=g;continue}if(g.Prev==g.Next)break;if(s&&r.ClipperBase.SlopesEqual(g.Prev.Curr,g.Curr,g.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(g.Prev.Curr,g.Curr,g.Next.Curr))){g==y&&(y=g.Next),g=this.RemoveEdge(g),g=g.Prev,T=g;continue}if(g=g.Next,g==T)break}if(!s&&g==g.Next||s&&g.Prev==g.Next)return!1;s||(this.m_HasOpenPaths=!0,y.Prev.OutIdx=r.ClipperBase.Skip),g=y;do this.InitEdge2(g,n),g=g.Next,c&&g.Curr.Y!=y.Curr.Y&&(c=!1);while(g!=y);if(c){if(s)return!1;g.Prev.OutIdx=r.ClipperBase.Skip,g.Prev.Bot.X<g.Prev.Top.X&&this.ReverseHorizontal(g.Prev);var b=new r.LocalMinima;for(b.Next=null,b.Y=g.Bot.Y,b.LeftBound=null,b.RightBound=g,b.RightBound.Side=r.EdgeSide.esRight,b.RightBound.WindDelta=0;g.Next.OutIdx!=r.ClipperBase.Skip;)g.NextInLML=g.Next,g.Bot.X!=g.Prev.Top.X&&this.ReverseHorizontal(g),g=g.Next;return this.InsertLocalMinima(b),this.m_edges.push(h),!0}this.m_edges.push(h);for(var A,X=null;g=this.FindNextLocMin(g),g!=X;){X==null&&(X=g);var b=new r.LocalMinima;b.Next=null,b.Y=g.Bot.Y,g.Dx<g.Prev.Dx?(b.LeftBound=g.Prev,b.RightBound=g,A=!1):(b.LeftBound=g,b.RightBound=g.Prev,A=!0),b.LeftBound.Side=r.EdgeSide.esLeft,b.RightBound.Side=r.EdgeSide.esRight,s?b.LeftBound.Next==b.RightBound?b.LeftBound.WindDelta=-1:b.LeftBound.WindDelta=1:b.LeftBound.WindDelta=0,b.RightBound.WindDelta=-b.LeftBound.WindDelta,g=this.ProcessBound(b.LeftBound,A);var D=this.ProcessBound(b.RightBound,!A);b.LeftBound.OutIdx==r.ClipperBase.Skip?b.LeftBound=null:b.RightBound.OutIdx==r.ClipperBase.Skip&&(b.RightBound=null),this.InsertLocalMinima(b),A||(g=D)}return!0},r.ClipperBase.prototype.AddPaths=function(e,n,s){for(var a=!1,h=0,f=e.length;h<f;++h)this.AddPath(e[h],n,s)&&(a=!0);return a},r.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,n,s){return r.IntPoint.op_Equality(e,s)||r.IntPoint.op_Equality(e,n)||r.IntPoint.op_Equality(s,n)?!1:e.X!=s.X?n.X>e.X==n.X<s.X:n.Y>e.Y==n.Y<s.Y},r.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var n=e.Next;return e.Prev=null,n},r.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,e.Delta.Y===0?e.Dx=r.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},r.ClipperBase.prototype.InsertLocalMinima=function(e){if(this.m_MinimaList===null)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var n=this.m_MinimaList;n.Next!==null&&e.Y<n.Next.Y;)n=n.Next;e.Next=n.Next,n.Next=e}},r.ClipperBase.prototype.PopLocalMinima=function(){this.m_CurrentLM!==null&&(this.m_CurrentLM=this.m_CurrentLM.Next)},r.ClipperBase.prototype.ReverseHorizontal=function(e){var n=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=n},r.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!=null)for(var e=this.m_MinimaList;e!=null;){var n=e.LeftBound;n!=null&&(n.Curr.X=n.Bot.X,n.Curr.Y=n.Bot.Y,n.Side=r.EdgeSide.esLeft,n.OutIdx=r.ClipperBase.Unassigned),n=e.RightBound,n!=null&&(n.Curr.X=n.Bot.X,n.Curr.Y=n.Bot.Y,n.Side=r.EdgeSide.esRight,n.OutIdx=r.ClipperBase.Unassigned),e=e.Next}},r.Clipper=function(e){typeof e>"u"&&(e=0),this.m_PolyOuts=null,this.m_ClipType=r.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=r.PolyFillType.pftEvenOdd,this.m_SubjFillType=r.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,r.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=r.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&e)!==0,this.StrictlySimple=(2&e)!==0,this.PreserveCollinear=(4&e)!==0},r.Clipper.ioReverseSolution=1,r.Clipper.ioStrictlySimple=2,r.Clipper.ioPreserveCollinear=4,r.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),r.ClipperBase.prototype.Clear.call(this))},r.Clipper.prototype.DisposeScanbeamList=function(){for(;this.m_Scanbeam!==null;){var e=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=e}},r.Clipper.prototype.Reset=function(){r.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var e=this.m_MinimaList;e!==null;)this.InsertScanbeam(e.Y),e=e.Next},r.Clipper.prototype.InsertScanbeam=function(e){if(this.m_Scanbeam===null)this.m_Scanbeam=new r.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var n=new r.Scanbeam;n.Y=e,n.Next=this.m_Scanbeam,this.m_Scanbeam=n}else{for(var s=this.m_Scanbeam;s.Next!==null&&e<=s.Next.Y;)s=s.Next;if(e==s.Y)return;var n=new r.Scanbeam;n.Y=e,n.Next=s.Next,s.Next=n}},r.Clipper.prototype.Execute=function(){var e=arguments,n=e.length,s=e[1]instanceof r.PolyTree;if(n==4&&!s){var a=e[0],h=e[1],f=e[2],c=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&r.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,r.Clear(h),this.m_SubjFillType=f,this.m_ClipFillType=c,this.m_ClipType=a,this.m_UsingPolyTree=!1;try{var p=this.ExecuteInternal();p&&this.BuildResult(h)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return p}else if(n==4&&s){var a=e[0],y=e[1],f=e[2],c=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=f,this.m_ClipFillType=c,this.m_ClipType=a,this.m_UsingPolyTree=!0;try{var p=this.ExecuteInternal();p&&this.BuildResult2(y)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return p}else if(n==2&&!s){var a=e[0],h=e[1];return this.Execute(a,h,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}else if(n==2&&s){var a=e[0],y=e[1];return this.Execute(a,y,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}},r.Clipper.prototype.FixHoleLinkage=function(e){if(!(e.FirstLeft===null||e.IsHole!=e.FirstLeft.IsHole&&e.FirstLeft.Pts!==null)){for(var n=e.FirstLeft;n!==null&&(n.IsHole==e.IsHole||n.Pts===null);)n=n.FirstLeft;e.FirstLeft=n}},r.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),this.m_CurrentLM===null)return!1;var e=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(e),r.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),this.m_Scanbeam===null)break;var n=this.PopScanbeam();if(!this.ProcessIntersections(e,n))return!1;this.ProcessEdgesAtTopOfScanbeam(n),e=n}while(this.m_Scanbeam!==null||this.m_CurrentLM!==null);for(var s=0,a=this.m_PolyOuts.length;s<a;s++){var h=this.m_PolyOuts[s];h.Pts===null||h.IsOpen||(h.IsHole^this.ReverseSolution)==this.Area(h)>0&&this.ReversePolyPtLinks(h.Pts)}this.JoinCommonEdges();for(var s=0,a=this.m_PolyOuts.length;s<a;s++){var h=this.m_PolyOuts[s];h.Pts!==null&&!h.IsOpen&&this.FixupOutPolygon(h)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{r.Clear(this.m_Joins),r.Clear(this.m_GhostJoins)}},r.Clipper.prototype.PopScanbeam=function(){var e=this.m_Scanbeam.Y;return this.m_Scanbeam,this.m_Scanbeam=this.m_Scanbeam.Next,e},r.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,n=this.m_PolyOuts.length;e<n;++e)this.DisposeOutRec(e);r.Clear(this.m_PolyOuts)},r.Clipper.prototype.DisposeOutRec=function(e){var n=this.m_PolyOuts[e];n.Pts!==null&&this.DisposeOutPts(n.Pts),n=null,this.m_PolyOuts[e]=null},r.Clipper.prototype.DisposeOutPts=function(e){if(e!==null)for(e.Prev.Next=null;e!==null;)e=e.Next},r.Clipper.prototype.AddJoin=function(e,n,s){var a=new r.Join;a.OutPt1=e,a.OutPt2=n,a.OffPt.X=s.X,a.OffPt.Y=s.Y,this.m_Joins.push(a)},r.Clipper.prototype.AddGhostJoin=function(e,n){var s=new r.Join;s.OutPt1=e,s.OffPt.X=n.X,s.OffPt.Y=n.Y,this.m_GhostJoins.push(s)},r.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(;this.m_CurrentLM!==null&&this.m_CurrentLM.Y==e;){var n=this.m_CurrentLM.LeftBound,s=this.m_CurrentLM.RightBound;this.PopLocalMinima();var a=null;if(n===null?(this.InsertEdgeIntoAEL(s,null),this.SetWindingCount(s),this.IsContributing(s)&&(a=this.AddOutPt(s,s.Bot))):s==null?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(a=this.AddOutPt(n,n.Bot)),this.InsertScanbeam(n.Top.Y)):(this.InsertEdgeIntoAEL(n,null),this.InsertEdgeIntoAEL(s,n),this.SetWindingCount(n),s.WindCnt=n.WindCnt,s.WindCnt2=n.WindCnt2,this.IsContributing(n)&&(a=this.AddLocalMinPoly(n,s,n.Bot)),this.InsertScanbeam(n.Top.Y)),s!=null&&(r.ClipperBase.IsHorizontal(s)?this.AddEdgeToSEL(s):this.InsertScanbeam(s.Top.Y)),!(n==null||s==null)){if(a!==null&&r.ClipperBase.IsHorizontal(s)&&this.m_GhostJoins.length>0&&s.WindDelta!==0)for(var h=0,f=this.m_GhostJoins.length;h<f;h++){var c=this.m_GhostJoins[h];this.HorzSegmentsOverlap(c.OutPt1.Pt,c.OffPt,s.Bot,s.Top)&&this.AddJoin(c.OutPt1,a,c.OffPt)}if(n.OutIdx>=0&&n.PrevInAEL!==null&&n.PrevInAEL.Curr.X==n.Bot.X&&n.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&n.WindDelta!==0&&n.PrevInAEL.WindDelta!==0){var p=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(a,p,n.Top)}if(n.NextInAEL!=s){if(s.OutIdx>=0&&s.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual(s.PrevInAEL,s,this.m_UseFullRange)&&s.WindDelta!==0&&s.PrevInAEL.WindDelta!==0){var p=this.AddOutPt(s.PrevInAEL,s.Bot);this.AddJoin(a,p,s.Top)}var y=n.NextInAEL;if(y!==null)for(;y!=s;)this.IntersectEdges(s,y,n.Curr,!1),y=y.NextInAEL}}}},r.Clipper.prototype.InsertEdgeIntoAEL=function(e,n){if(this.m_ActiveEdges===null)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(n===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(n===null&&(n=this.m_ActiveEdges);n.NextInAEL!==null&&!this.E2InsertsBeforeE1(n.NextInAEL,e);)n=n.NextInAEL;e.NextInAEL=n.NextInAEL,n.NextInAEL!==null&&(n.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,n.NextInAEL=e}},r.Clipper.prototype.E2InsertsBeforeE1=function(e,n){return n.Curr.X==e.Curr.X?n.Top.Y>e.Top.Y?n.Top.X<r.Clipper.TopX(e,n.Top.Y):e.Top.X>r.Clipper.TopX(n,e.Top.Y):n.Curr.X<e.Curr.X},r.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp==r.PolyType.ptSubject?this.m_SubjFillType==r.PolyFillType.pftEvenOdd:this.m_ClipFillType==r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp==r.PolyType.ptSubject?this.m_ClipFillType==r.PolyFillType.pftEvenOdd:this.m_SubjFillType==r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsContributing=function(e){var n,s;switch(e.PolyTyp==r.PolyType.ptSubject?(n=this.m_SubjFillType,s=this.m_ClipFillType):(n=this.m_ClipFillType,s=this.m_SubjFillType),n){case r.PolyFillType.pftEvenOdd:if(e.WindDelta===0&&e.WindCnt!=1)return!1;break;case r.PolyFillType.pftNonZero:if(Math.abs(e.WindCnt)!=1)return!1;break;case r.PolyFillType.pftPositive:if(e.WindCnt!=1)return!1;break;default:if(e.WindCnt!=-1)return!1;break}switch(this.m_ClipType){case r.ClipType.ctIntersection:switch(s){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return e.WindCnt2!==0;case r.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case r.ClipType.ctUnion:switch(s){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return e.WindCnt2===0;case r.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case r.ClipType.ctDifference:if(e.PolyTyp==r.PolyType.ptSubject)switch(s){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return e.WindCnt2===0;case r.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(s){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return e.WindCnt2!==0;case r.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case r.ClipType.ctXor:if(e.WindDelta===0)switch(s){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return e.WindCnt2===0;case r.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else return!0}return!0},r.Clipper.prototype.SetWindingCount=function(e){for(var n=e.PrevInAEL;n!==null&&(n.PolyTyp!=e.PolyTyp||n.WindDelta===0);)n=n.PrevInAEL;if(n===null)e.WindCnt=e.WindDelta===0?1:e.WindDelta,e.WindCnt2=0,n=this.m_ActiveEdges;else if(e.WindDelta===0&&this.m_ClipType!=r.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=n.WindCnt2,n=n.NextInAEL;else if(this.IsEvenOddFillType(e)){if(e.WindDelta===0){for(var s=!0,a=n.PrevInAEL;a!==null;)a.PolyTyp==n.PolyTyp&&a.WindDelta!==0&&(s=!s),a=a.PrevInAEL;e.WindCnt=s?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=n.WindCnt2,n=n.NextInAEL}else n.WindCnt*n.WindDelta<0?Math.abs(n.WindCnt)>1?n.WindDelta*e.WindDelta<0?e.WindCnt=n.WindCnt:e.WindCnt=n.WindCnt+e.WindDelta:e.WindCnt=e.WindDelta===0?1:e.WindDelta:e.WindDelta===0?e.WindCnt=n.WindCnt<0?n.WindCnt-1:n.WindCnt+1:n.WindDelta*e.WindDelta<0?e.WindCnt=n.WindCnt:e.WindCnt=n.WindCnt+e.WindDelta,e.WindCnt2=n.WindCnt2,n=n.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;n!=e;)n.WindDelta!==0&&(e.WindCnt2=e.WindCnt2===0?1:0),n=n.NextInAEL;else for(;n!=e;)e.WindCnt2+=n.WindDelta,n=n.NextInAEL},r.Clipper.prototype.AddEdgeToSEL=function(e){this.m_SortedEdges===null?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},r.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},r.Clipper.prototype.SwapPositionsInAEL=function(e,n){if(!(e.NextInAEL==e.PrevInAEL||n.NextInAEL==n.PrevInAEL)){if(e.NextInAEL==n){var s=n.NextInAEL;s!==null&&(s.PrevInAEL=e);var a=e.PrevInAEL;a!==null&&(a.NextInAEL=n),n.PrevInAEL=a,n.NextInAEL=e,e.PrevInAEL=n,e.NextInAEL=s}else if(n.NextInAEL==e){var s=e.NextInAEL;s!==null&&(s.PrevInAEL=n);var a=n.PrevInAEL;a!==null&&(a.NextInAEL=e),e.PrevInAEL=a,e.NextInAEL=n,n.PrevInAEL=e,n.NextInAEL=s}else{var s=e.NextInAEL,a=e.PrevInAEL;e.NextInAEL=n.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n.PrevInAEL,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e),n.NextInAEL=s,n.NextInAEL!==null&&(n.NextInAEL.PrevInAEL=n),n.PrevInAEL=a,n.PrevInAEL!==null&&(n.PrevInAEL.NextInAEL=n)}e.PrevInAEL===null?this.m_ActiveEdges=e:n.PrevInAEL===null&&(this.m_ActiveEdges=n)}},r.Clipper.prototype.SwapPositionsInSEL=function(e,n){if(!(e.NextInSEL===null&&e.PrevInSEL===null)&&!(n.NextInSEL===null&&n.PrevInSEL===null)){if(e.NextInSEL==n){var s=n.NextInSEL;s!==null&&(s.PrevInSEL=e);var a=e.PrevInSEL;a!==null&&(a.NextInSEL=n),n.PrevInSEL=a,n.NextInSEL=e,e.PrevInSEL=n,e.NextInSEL=s}else if(n.NextInSEL==e){var s=e.NextInSEL;s!==null&&(s.PrevInSEL=n);var a=n.PrevInSEL;a!==null&&(a.NextInSEL=e),e.PrevInSEL=a,e.NextInSEL=n,n.PrevInSEL=e,n.NextInSEL=s}else{var s=e.NextInSEL,a=e.PrevInSEL;e.NextInSEL=n.NextInSEL,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n.PrevInSEL,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e),n.NextInSEL=s,n.NextInSEL!==null&&(n.NextInSEL.PrevInSEL=n),n.PrevInSEL=a,n.PrevInSEL!==null&&(n.PrevInSEL.NextInSEL=n)}e.PrevInSEL===null?this.m_SortedEdges=e:n.PrevInSEL===null&&(this.m_SortedEdges=n)}},r.Clipper.prototype.AddLocalMaxPoly=function(e,n,s){this.AddOutPt(e,s),n.WindDelta==0&&this.AddOutPt(n,s),e.OutIdx==n.OutIdx?(e.OutIdx=-1,n.OutIdx=-1):e.OutIdx<n.OutIdx?this.AppendPolygon(e,n):this.AppendPolygon(n,e)},r.Clipper.prototype.AddLocalMinPoly=function(e,n,s){var a,h,f;if(r.ClipperBase.IsHorizontal(n)||e.Dx>n.Dx?(a=this.AddOutPt(e,s),n.OutIdx=e.OutIdx,e.Side=r.EdgeSide.esLeft,n.Side=r.EdgeSide.esRight,h=e,h.PrevInAEL==n?f=n.PrevInAEL:f=h.PrevInAEL):(a=this.AddOutPt(n,s),e.OutIdx=n.OutIdx,e.Side=r.EdgeSide.esRight,n.Side=r.EdgeSide.esLeft,h=n,h.PrevInAEL==e?f=e.PrevInAEL:f=h.PrevInAEL),f!==null&&f.OutIdx>=0&&r.Clipper.TopX(f,s.Y)==r.Clipper.TopX(h,s.Y)&&r.ClipperBase.SlopesEqual(h,f,this.m_UseFullRange)&&h.WindDelta!==0&&f.WindDelta!==0){var c=this.AddOutPt(f,s);this.AddJoin(a,c,h.Top)}return a},r.Clipper.prototype.CreateOutRec=function(){var e=new r.OutRec;return e.Idx=-1,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},r.Clipper.prototype.AddOutPt=function(e,n){var s=e.Side==r.EdgeSide.esLeft;if(e.OutIdx<0){var a=this.CreateOutRec();a.IsOpen=e.WindDelta===0;var h=new r.OutPt;return a.Pts=h,h.Idx=a.Idx,h.Pt.X=n.X,h.Pt.Y=n.Y,h.Next=h,h.Prev=h,a.IsOpen||this.SetHoleState(e,a),e.OutIdx=a.Idx,h}else{var a=this.m_PolyOuts[e.OutIdx],f=a.Pts;if(s&&r.IntPoint.op_Equality(n,f.Pt))return f;if(!s&&r.IntPoint.op_Equality(n,f.Prev.Pt))return f.Prev;var h=new r.OutPt;return h.Idx=a.Idx,h.Pt.X=n.X,h.Pt.Y=n.Y,h.Next=f,h.Prev=f.Prev,h.Prev.Next=h,f.Prev=h,s&&(a.Pts=h),h}},r.Clipper.prototype.SwapPoints=function(e,n){var s=new r.IntPoint(e.Value);e.Value.X=n.Value.X,e.Value.Y=n.Value.Y,n.Value.X=s.X,n.Value.Y=s.Y},r.Clipper.prototype.HorzSegmentsOverlap=function(e,n,s,a){return e.X>s.X==e.X<a.X||n.X>s.X==n.X<a.X||s.X>e.X==s.X<n.X||a.X>e.X==a.X<n.X||e.X==s.X&&n.X==a.X?!0:e.X==a.X&&n.X==s.X},r.Clipper.prototype.InsertPolyPtBetween=function(e,n,s){var a=new r.OutPt;return a.Pt.X=s.X,a.Pt.Y=s.Y,n==e.Next?(e.Next=a,n.Prev=a,a.Next=n,a.Prev=e):(n.Next=a,e.Prev=a,a.Next=e,a.Prev=n),a},r.Clipper.prototype.SetHoleState=function(e,n){for(var s=!1,a=e.PrevInAEL;a!==null;)a.OutIdx>=0&&a.WindDelta!=0&&(s=!s,n.FirstLeft===null&&(n.FirstLeft=this.m_PolyOuts[a.OutIdx])),a=a.PrevInAEL;s&&(n.IsHole=!0)},r.Clipper.prototype.GetDx=function(e,n){return e.Y==n.Y?r.ClipperBase.horizontal:(n.X-e.X)/(n.Y-e.Y)},r.Clipper.prototype.FirstIsBottomPt=function(e,n){for(var s=e.Prev;r.IntPoint.op_Equality(s.Pt,e.Pt)&&s!=e;)s=s.Prev;var a=Math.abs(this.GetDx(e.Pt,s.Pt));for(s=e.Next;r.IntPoint.op_Equality(s.Pt,e.Pt)&&s!=e;)s=s.Next;var h=Math.abs(this.GetDx(e.Pt,s.Pt));for(s=n.Prev;r.IntPoint.op_Equality(s.Pt,n.Pt)&&s!=n;)s=s.Prev;var f=Math.abs(this.GetDx(n.Pt,s.Pt));for(s=n.Next;r.IntPoint.op_Equality(s.Pt,n.Pt)&&s!=n;)s=s.Next;var c=Math.abs(this.GetDx(n.Pt,s.Pt));return a>=f&&a>=c||h>=f&&h>=c},r.Clipper.prototype.GetBottomPt=function(e){for(var n=null,s=e.Next;s!=e;)s.Pt.Y>e.Pt.Y?(e=s,n=null):s.Pt.Y==e.Pt.Y&&s.Pt.X<=e.Pt.X&&(s.Pt.X<e.Pt.X?(n=null,e=s):s.Next!=e&&s.Prev!=e&&(n=s)),s=s.Next;if(n!==null)for(;n!=s;)for(this.FirstIsBottomPt(s,n)||(e=n),n=n.Next;r.IntPoint.op_Inequality(n.Pt,e.Pt);)n=n.Next;return e},r.Clipper.prototype.GetLowermostRec=function(e,n){e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts)),n.BottomPt===null&&(n.BottomPt=this.GetBottomPt(n.Pts));var s=e.BottomPt,a=n.BottomPt;return s.Pt.Y>a.Pt.Y?e:s.Pt.Y<a.Pt.Y?n:s.Pt.X<a.Pt.X?e:s.Pt.X>a.Pt.X||s.Next==s?n:a.Next==a||this.FirstIsBottomPt(s,a)?e:n},r.Clipper.prototype.Param1RightOfParam2=function(e,n){do if(e=e.FirstLeft,e==n)return!0;while(e!==null);return!1},r.Clipper.prototype.GetOutRec=function(e){for(var n=this.m_PolyOuts[e];n!=this.m_PolyOuts[n.Idx];)n=this.m_PolyOuts[n.Idx];return n},r.Clipper.prototype.AppendPolygon=function(e,n){var s=this.m_PolyOuts[e.OutIdx],a=this.m_PolyOuts[n.OutIdx],h;this.Param1RightOfParam2(s,a)?h=a:this.Param1RightOfParam2(a,s)?h=s:h=this.GetLowermostRec(s,a);var f=s.Pts,c=f.Prev,p=a.Pts,y=p.Prev,g;e.Side==r.EdgeSide.esLeft?(n.Side==r.EdgeSide.esLeft?(this.ReversePolyPtLinks(p),p.Next=f,f.Prev=p,c.Next=y,y.Prev=c,s.Pts=y):(y.Next=f,f.Prev=y,p.Prev=c,c.Next=p,s.Pts=p),g=r.EdgeSide.esLeft):(n.Side==r.EdgeSide.esRight?(this.ReversePolyPtLinks(p),c.Next=y,y.Prev=c,p.Next=f,f.Prev=p):(c.Next=p,p.Prev=c,f.Prev=y,y.Next=f),g=r.EdgeSide.esRight),s.BottomPt=null,h==a&&(a.FirstLeft!=s&&(s.FirstLeft=a.FirstLeft),s.IsHole=a.IsHole),a.Pts=null,a.BottomPt=null,a.FirstLeft=s;var T=e.OutIdx,b=n.OutIdx;e.OutIdx=-1,n.OutIdx=-1;for(var A=this.m_ActiveEdges;A!==null;){if(A.OutIdx==b){A.OutIdx=T,A.Side=g;break}A=A.NextInAEL}a.Idx=s.Idx},r.Clipper.prototype.ReversePolyPtLinks=function(e){if(e!==null){var n,s;n=e;do s=n.Next,n.Next=n.Prev,n.Prev=s,n=s;while(n!=e)}},r.Clipper.SwapSides=function(e,n){var s=e.Side;e.Side=n.Side,n.Side=s},r.Clipper.SwapPolyIndexes=function(e,n){var s=e.OutIdx;e.OutIdx=n.OutIdx,n.OutIdx=s},r.Clipper.prototype.IntersectEdges=function(e,n,s,a){var h=!a&&e.NextInLML===null&&e.Top.X==s.X&&e.Top.Y==s.Y,f=!a&&n.NextInLML===null&&n.Top.X==s.X&&n.Top.Y==s.Y,c=e.OutIdx>=0,p=n.OutIdx>=0;if(e.WindDelta===0||n.WindDelta===0){e.WindDelta===0&&n.WindDelta===0?(h||f)&&c&&p&&this.AddLocalMaxPoly(e,n,s):e.PolyTyp==n.PolyTyp&&e.WindDelta!=n.WindDelta&&this.m_ClipType==r.ClipType.ctUnion?e.WindDelta===0?p&&(this.AddOutPt(e,s),c&&(e.OutIdx=-1)):c&&(this.AddOutPt(n,s),p&&(n.OutIdx=-1)):e.PolyTyp!=n.PolyTyp&&(e.WindDelta===0&&Math.abs(n.WindCnt)==1&&(this.m_ClipType!=r.ClipType.ctUnion||n.WindCnt2===0)?(this.AddOutPt(e,s),c&&(e.OutIdx=-1)):n.WindDelta===0&&Math.abs(e.WindCnt)==1&&(this.m_ClipType!=r.ClipType.ctUnion||e.WindCnt2===0)&&(this.AddOutPt(n,s),p&&(n.OutIdx=-1))),h&&(e.OutIdx<0?this.DeleteFromAEL(e):r.Error("Error intersecting polylines")),f&&(n.OutIdx<0?this.DeleteFromAEL(n):r.Error("Error intersecting polylines"));return}if(e.PolyTyp==n.PolyTyp)if(this.IsEvenOddFillType(e)){var y=e.WindCnt;e.WindCnt=n.WindCnt,n.WindCnt=y}else e.WindCnt+n.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=n.WindDelta,n.WindCnt-e.WindDelta===0?n.WindCnt=-n.WindCnt:n.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(n)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2+=n.WindDelta,this.IsEvenOddFillType(e)?n.WindCnt2=n.WindCnt2===0?1:0:n.WindCnt2-=e.WindDelta;var g,T,b,A;e.PolyTyp==r.PolyType.ptSubject?(g=this.m_SubjFillType,b=this.m_ClipFillType):(g=this.m_ClipFillType,b=this.m_SubjFillType),n.PolyTyp==r.PolyType.ptSubject?(T=this.m_SubjFillType,A=this.m_ClipFillType):(T=this.m_ClipFillType,A=this.m_SubjFillType);var X,D;switch(g){case r.PolyFillType.pftPositive:X=e.WindCnt;break;case r.PolyFillType.pftNegative:X=-e.WindCnt;break;default:X=Math.abs(e.WindCnt);break}switch(T){case r.PolyFillType.pftPositive:D=n.WindCnt;break;case r.PolyFillType.pftNegative:D=-n.WindCnt;break;default:D=Math.abs(n.WindCnt);break}if(c&&p)h||f||X!==0&&X!=1||D!==0&&D!=1||e.PolyTyp!=n.PolyTyp&&this.m_ClipType!=r.ClipType.ctXor?this.AddLocalMaxPoly(e,n,s):(this.AddOutPt(e,s),this.AddOutPt(n,s),r.Clipper.SwapSides(e,n),r.Clipper.SwapPolyIndexes(e,n));else if(c)(D===0||D==1)&&(this.AddOutPt(e,s),r.Clipper.SwapSides(e,n),r.Clipper.SwapPolyIndexes(e,n));else if(p)(X===0||X==1)&&(this.AddOutPt(n,s),r.Clipper.SwapSides(e,n),r.Clipper.SwapPolyIndexes(e,n));else if((X===0||X==1)&&(D===0||D==1)&&!h&&!f){var F,et;switch(b){case r.PolyFillType.pftPositive:F=e.WindCnt2;break;case r.PolyFillType.pftNegative:F=-e.WindCnt2;break;default:F=Math.abs(e.WindCnt2);break}switch(A){case r.PolyFillType.pftPositive:et=n.WindCnt2;break;case r.PolyFillType.pftNegative:et=-n.WindCnt2;break;default:et=Math.abs(n.WindCnt2);break}if(e.PolyTyp!=n.PolyTyp)this.AddLocalMinPoly(e,n,s);else if(X==1&&D==1)switch(this.m_ClipType){case r.ClipType.ctIntersection:F>0&&et>0&&this.AddLocalMinPoly(e,n,s);break;case r.ClipType.ctUnion:F<=0&&et<=0&&this.AddLocalMinPoly(e,n,s);break;case r.ClipType.ctDifference:(e.PolyTyp==r.PolyType.ptClip&&F>0&&et>0||e.PolyTyp==r.PolyType.ptSubject&&F<=0&&et<=0)&&this.AddLocalMinPoly(e,n,s);break;case r.ClipType.ctXor:this.AddLocalMinPoly(e,n,s);break}else r.Clipper.SwapSides(e,n)}h!=f&&(h&&e.OutIdx>=0||f&&n.OutIdx>=0)&&(r.Clipper.SwapSides(e,n),r.Clipper.SwapPolyIndexes(e,n)),h&&this.DeleteFromAEL(e),f&&this.DeleteFromAEL(n)},r.Clipper.prototype.DeleteFromAEL=function(e){var n=e.PrevInAEL,s=e.NextInAEL;n===null&&s===null&&e!=this.m_ActiveEdges||(n!==null?n.NextInAEL=s:this.m_ActiveEdges=s,s!==null&&(s.PrevInAEL=n),e.NextInAEL=null,e.PrevInAEL=null)},r.Clipper.prototype.DeleteFromSEL=function(e){var n=e.PrevInSEL,s=e.NextInSEL;n===null&&s===null&&e!=this.m_SortedEdges||(n!==null?n.NextInSEL=s:this.m_SortedEdges=s,s!==null&&(s.PrevInSEL=n),e.NextInSEL=null,e.PrevInSEL=null)},r.Clipper.prototype.UpdateEdgeIntoAEL=function(e){e.NextInLML===null&&r.Error("UpdateEdgeIntoAEL: invalid call");var n=e.PrevInAEL,s=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,n!==null?n.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,s!==null&&(s.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,e=e.NextInLML,e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=n,e.NextInAEL=s,r.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},r.Clipper.prototype.ProcessHorizontals=function(e){for(var n=this.m_SortedEdges;n!==null;)this.DeleteFromSEL(n),this.ProcessHorizontal(n,e),n=this.m_SortedEdges},r.Clipper.prototype.GetHorzDirection=function(e,n){e.Bot.X<e.Top.X?(n.Left=e.Bot.X,n.Right=e.Top.X,n.Dir=r.Direction.dLeftToRight):(n.Left=e.Top.X,n.Right=e.Bot.X,n.Dir=r.Direction.dRightToLeft)},r.Clipper.prototype.PrepareHorzJoins=function(e,n){var s=this.m_PolyOuts[e.OutIdx].Pts;e.Side!=r.EdgeSide.esLeft&&(s=s.Prev),n&&(r.IntPoint.op_Equality(s.Pt,e.Top)?this.AddGhostJoin(s,e.Bot):this.AddGhostJoin(s,e.Top))},r.Clipper.prototype.ProcessHorizontal=function(e,n){var s={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,s);for(var a=s.Dir,h=s.Left,f=s.Right,c=e,p=null;c.NextInLML!==null&&r.ClipperBase.IsHorizontal(c.NextInLML);)c=c.NextInLML;for(c.NextInLML===null&&(p=this.GetMaximaPair(c));;){for(var y=e==c,g=this.GetNextInAEL(e,a);g!==null&&!(g.Curr.X==e.Top.X&&e.NextInLML!==null&&g.Dx<e.NextInLML.Dx);){var T=this.GetNextInAEL(g,a);if(a==r.Direction.dLeftToRight&&g.Curr.X<=f||a==r.Direction.dRightToLeft&&g.Curr.X>=h){if(e.OutIdx>=0&&e.WindDelta!=0&&this.PrepareHorzJoins(e,n),g==p&&y){a==r.Direction.dLeftToRight?this.IntersectEdges(e,g,g.Top,!1):this.IntersectEdges(g,e,g.Top,!1),p.OutIdx>=0&&r.Error("ProcessHorizontal error");return}else if(a==r.Direction.dLeftToRight){var b=new r.IntPoint(g.Curr.X,e.Curr.Y);this.IntersectEdges(e,g,b,!0)}else{var b=new r.IntPoint(g.Curr.X,e.Curr.Y);this.IntersectEdges(g,e,b,!0)}this.SwapPositionsInAEL(e,g)}else if(a==r.Direction.dLeftToRight&&g.Curr.X>=f||a==r.Direction.dRightToLeft&&g.Curr.X<=h)break;g=T}if(e.OutIdx>=0&&e.WindDelta!==0&&this.PrepareHorzJoins(e,n),e.NextInLML!==null&&r.ClipperBase.IsHorizontal(e.NextInLML)){e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot);var s={Dir:a,Left:h,Right:f};this.GetHorzDirection(e,s),a=s.Dir,h=s.Left,f=s.Right}else break}if(e.NextInLML!==null)if(e.OutIdx>=0){var A=this.AddOutPt(e,e.Top);if(e=this.UpdateEdgeIntoAEL(e),e.WindDelta===0)return;var X=e.PrevInAEL,T=e.NextInAEL;if(X!==null&&X.Curr.X==e.Bot.X&&X.Curr.Y==e.Bot.Y&&X.WindDelta!==0&&X.OutIdx>=0&&X.Curr.Y>X.Top.Y&&r.ClipperBase.SlopesEqual(e,X,this.m_UseFullRange)){var D=this.AddOutPt(X,e.Bot);this.AddJoin(A,D,e.Top)}else if(T!==null&&T.Curr.X==e.Bot.X&&T.Curr.Y==e.Bot.Y&&T.WindDelta!==0&&T.OutIdx>=0&&T.Curr.Y>T.Top.Y&&r.ClipperBase.SlopesEqual(e,T,this.m_UseFullRange)){var D=this.AddOutPt(T,e.Bot);this.AddJoin(A,D,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else p!==null?p.OutIdx>=0?(a==r.Direction.dLeftToRight?this.IntersectEdges(e,p,e.Top,!1):this.IntersectEdges(p,e,e.Top,!1),p.OutIdx>=0&&r.Error("ProcessHorizontal error")):(this.DeleteFromAEL(e),this.DeleteFromAEL(p)):(e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e))},r.Clipper.prototype.GetNextInAEL=function(e,n){return n==r.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},r.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!=e&&e.Next.NextInLML!=e},r.Clipper.prototype.IsMaxima=function(e,n){return e!==null&&e.Top.Y==n&&e.NextInLML===null},r.Clipper.prototype.IsIntermediate=function(e,n){return e.Top.Y==n&&e.NextInLML!==null},r.Clipper.prototype.GetMaximaPair=function(e){var n=null;return r.IntPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null?n=e.Next:r.IntPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null&&(n=e.Prev),n!==null&&(n.OutIdx==-2||n.NextInAEL==n.PrevInAEL&&!r.ClipperBase.IsHorizontal(n))?null:n},r.Clipper.prototype.ProcessIntersections=function(e,n){if(this.m_ActiveEdges==null)return!0;try{if(this.BuildIntersectList(e,n),this.m_IntersectList.length==0)return!0;if(this.m_IntersectList.length==1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,r.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},r.Clipper.prototype.BuildIntersectList=function(e,n){if(this.m_ActiveEdges!==null){var s=this.m_ActiveEdges;for(this.m_SortedEdges=s;s!==null;)s.PrevInSEL=s.PrevInAEL,s.NextInSEL=s.NextInAEL,s.Curr.X=r.Clipper.TopX(s,n),s=s.NextInAEL;for(var a=!0;a&&this.m_SortedEdges!==null;){for(a=!1,s=this.m_SortedEdges;s.NextInSEL!==null;){var h=s.NextInSEL,f=new r.IntPoint;if(s.Curr.X>h.Curr.X){!this.IntersectPoint(s,h,f)&&s.Curr.X>h.Curr.X+1&&r.Error("Intersection error"),f.Y>e&&(f.Y=e,Math.abs(s.Dx)>Math.abs(h.Dx)?f.X=r.Clipper.TopX(h,e):f.X=r.Clipper.TopX(s,e));var c=new r.IntersectNode;c.Edge1=s,c.Edge2=h,c.Pt.X=f.X,c.Pt.Y=f.Y,this.m_IntersectList.push(c),this.SwapPositionsInSEL(s,h),a=!0}else s=h}if(s.PrevInSEL!==null)s.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},r.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL==e.Edge2||e.Edge1.PrevInSEL==e.Edge2},r.Clipper.IntersectNodeSort=function(e,n){return n.Pt.Y-e.Pt.Y},r.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,n=0;n<e;n++){if(!this.EdgesAdjacent(this.m_IntersectList[n])){for(var s=n+1;s<e&&!this.EdgesAdjacent(this.m_IntersectList[s]);)s++;if(s==e)return!1;var a=this.m_IntersectList[n];this.m_IntersectList[n]=this.m_IntersectList[s],this.m_IntersectList[s]=a}this.SwapPositionsInSEL(this.m_IntersectList[n].Edge1,this.m_IntersectList[n].Edge2)}return!0},r.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,n=this.m_IntersectList.length;e<n;e++){var s=this.m_IntersectList[e];this.IntersectEdges(s.Edge1,s.Edge2,s.Pt,!0),this.SwapPositionsInAEL(s.Edge1,s.Edge2)}this.m_IntersectList.length=0};var it=function(e){return e<0?Math.ceil(e-.5):Math.round(e)},ke=function(e){return e<0?Math.ceil(e-.5):Math.floor(e+.5)},me=function(e){return e<0?-Math.round(Math.abs(e)):Math.round(e)},vt=function(e){return e<0?(e-=.5,e<-2147483648?Math.ceil(e):e|0):(e+=.5,e>2147483647?Math.floor(e):e|0)};S.msie?r.Clipper.Round=it:S.chromium?r.Clipper.Round=me:S.safari?r.Clipper.Round=vt:r.Clipper.Round=ke,r.Clipper.TopX=function(e,n){return n==e.Top.Y?e.Top.X:e.Bot.X+r.Clipper.Round(e.Dx*(n-e.Bot.Y))},r.Clipper.prototype.IntersectPoint=function(e,n,s){s.X=0,s.Y=0;var a,h;if(r.ClipperBase.SlopesEqual(e,n,this.m_UseFullRange)||e.Dx==n.Dx)return n.Bot.Y>e.Bot.Y?(s.X=n.Bot.X,s.Y=n.Bot.Y):(s.X=e.Bot.X,s.Y=e.Bot.Y),!1;if(e.Delta.X===0)s.X=e.Bot.X,r.ClipperBase.IsHorizontal(n)?s.Y=n.Bot.Y:(h=n.Bot.Y-n.Bot.X/n.Dx,s.Y=r.Clipper.Round(s.X/n.Dx+h));else if(n.Delta.X===0)s.X=n.Bot.X,r.ClipperBase.IsHorizontal(e)?s.Y=e.Bot.Y:(a=e.Bot.Y-e.Bot.X/e.Dx,s.Y=r.Clipper.Round(s.X/e.Dx+a));else{a=e.Bot.X-e.Bot.Y*e.Dx,h=n.Bot.X-n.Bot.Y*n.Dx;var f=(h-a)/(e.Dx-n.Dx);s.Y=r.Clipper.Round(f),Math.abs(e.Dx)<Math.abs(n.Dx)?s.X=r.Clipper.Round(e.Dx*f+a):s.X=r.Clipper.Round(n.Dx*f+h)}if(s.Y<e.Top.Y||s.Y<n.Top.Y){if(e.Top.Y>n.Top.Y)return s.Y=e.Top.Y,s.X=r.Clipper.TopX(n,e.Top.Y),s.X<e.Top.X;s.Y=n.Top.Y,Math.abs(e.Dx)<Math.abs(n.Dx)?s.X=r.Clipper.TopX(e,s.Y):s.X=r.Clipper.TopX(n,s.Y)}return!0},r.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var n=this.m_ActiveEdges;n!==null;){var s=this.IsMaxima(n,e);if(s){var a=this.GetMaximaPair(n);s=a===null||!r.ClipperBase.IsHorizontal(a)}if(s){var h=n.PrevInAEL;this.DoMaxima(n),h===null?n=this.m_ActiveEdges:n=h.NextInAEL}else{if(this.IsIntermediate(n,e)&&r.ClipperBase.IsHorizontal(n.NextInLML)?(n=this.UpdateEdgeIntoAEL(n),n.OutIdx>=0&&this.AddOutPt(n,n.Bot),this.AddEdgeToSEL(n)):(n.Curr.X=r.Clipper.TopX(n,e),n.Curr.Y=e),this.StrictlySimple){var h=n.PrevInAEL;if(n.OutIdx>=0&&n.WindDelta!==0&&h!==null&&h.OutIdx>=0&&h.Curr.X==n.Curr.X&&h.WindDelta!==0){var f=this.AddOutPt(h,n.Curr),c=this.AddOutPt(n,n.Curr);this.AddJoin(f,c,n.Curr)}}n=n.NextInAEL}}for(this.ProcessHorizontals(!0),n=this.m_ActiveEdges;n!==null;){if(this.IsIntermediate(n,e)){var f=null;n.OutIdx>=0&&(f=this.AddOutPt(n,n.Top)),n=this.UpdateEdgeIntoAEL(n);var h=n.PrevInAEL,p=n.NextInAEL;if(h!==null&&h.Curr.X==n.Bot.X&&h.Curr.Y==n.Bot.Y&&f!==null&&h.OutIdx>=0&&h.Curr.Y>h.Top.Y&&r.ClipperBase.SlopesEqual(n,h,this.m_UseFullRange)&&n.WindDelta!==0&&h.WindDelta!==0){var c=this.AddOutPt(h,n.Bot);this.AddJoin(f,c,n.Top)}else if(p!==null&&p.Curr.X==n.Bot.X&&p.Curr.Y==n.Bot.Y&&f!==null&&p.OutIdx>=0&&p.Curr.Y>p.Top.Y&&r.ClipperBase.SlopesEqual(n,p,this.m_UseFullRange)&&n.WindDelta!==0&&p.WindDelta!==0){var c=this.AddOutPt(p,n.Bot);this.AddJoin(f,c,n.Top)}}n=n.NextInAEL}},r.Clipper.prototype.DoMaxima=function(e){var n=this.GetMaximaPair(e);if(n===null){e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e);return}for(var s=e.NextInAEL;s!==null&&s!=n;)this.IntersectEdges(e,s,e.Top,!0),this.SwapPositionsInAEL(e,s),s=e.NextInAEL;e.OutIdx==-1&&n.OutIdx==-1?(this.DeleteFromAEL(e),this.DeleteFromAEL(n)):e.OutIdx>=0&&n.OutIdx>=0?this.IntersectEdges(e,n,e.Top,!1):e.WindDelta===0?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=-1),this.DeleteFromAEL(e),n.OutIdx>=0&&(this.AddOutPt(n,e.Top),n.OutIdx=-1),this.DeleteFromAEL(n)):r.Error("DoMaxima error")},r.Clipper.ReversePaths=function(e){for(var n=0,s=e.length;n<s;n++)e[n].reverse()},r.Clipper.Orientation=function(e){return r.Clipper.Area(e)>=0},r.Clipper.prototype.PointCount=function(e){if(e===null)return 0;var n=0,s=e;do n++,s=s.Next;while(s!=e);return n},r.Clipper.prototype.BuildResult=function(e){r.Clear(e);for(var n=0,s=this.m_PolyOuts.length;n<s;n++){var a=this.m_PolyOuts[n];if(a.Pts!==null){var h=a.Pts.Prev,f=this.PointCount(h);if(!(f<2)){for(var c=new Array(f),p=0;p<f;p++)c[p]=h.Pt,h=h.Prev;e.push(c)}}}},r.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var n=0,s=this.m_PolyOuts.length;n<s;n++){var a=this.m_PolyOuts[n],h=this.PointCount(a.Pts);if(!(a.IsOpen&&h<2||!a.IsOpen&&h<3)){this.FixHoleLinkage(a);var f=new r.PolyNode;e.m_AllPolys.push(f),a.PolyNode=f,f.m_polygon.length=h;for(var c=a.Pts.Prev,p=0;p<h;p++)f.m_polygon[p]=c.Pt,c=c.Prev}}for(var n=0,s=this.m_PolyOuts.length;n<s;n++){var a=this.m_PolyOuts[n];a.PolyNode!==null&&(a.IsOpen?(a.PolyNode.IsOpen=!0,e.AddChild(a.PolyNode)):a.FirstLeft!==null&&a.FirstLeft.PolyNode!=null?a.FirstLeft.PolyNode.AddChild(a.PolyNode):e.AddChild(a.PolyNode))}},r.Clipper.prototype.FixupOutPolygon=function(e){var n=null;e.BottomPt=null;for(var s=e.Pts;;){if(s.Prev==s||s.Prev==s.Next){this.DisposeOutPts(s),e.Pts=null;return}if(r.IntPoint.op_Equality(s.Pt,s.Next.Pt)||r.IntPoint.op_Equality(s.Pt,s.Prev.Pt)||r.ClipperBase.SlopesEqual(s.Prev.Pt,s.Pt,s.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(s.Prev.Pt,s.Pt,s.Next.Pt)))n=null,s.Prev.Next=s.Next,s.Next.Prev=s.Prev,s=s.Prev;else{if(s==n)break;n===null&&(n=s),s=s.Next}}e.Pts=s},r.Clipper.prototype.DupOutPt=function(e,n){var s=new r.OutPt;return s.Pt.X=e.Pt.X,s.Pt.Y=e.Pt.Y,s.Idx=e.Idx,n?(s.Next=e.Next,s.Prev=e,e.Next.Prev=s,e.Next=s):(s.Prev=e.Prev,s.Next=e,e.Prev.Next=s,e.Prev=s),s},r.Clipper.prototype.GetOverlap=function(e,n,s,a,h){return e<n?s<a?(h.Left=Math.max(e,s),h.Right=Math.min(n,a)):(h.Left=Math.max(e,a),h.Right=Math.min(n,s)):s<a?(h.Left=Math.max(n,s),h.Right=Math.min(e,a)):(h.Left=Math.max(n,a),h.Right=Math.min(e,s)),h.Left<h.Right},r.Clipper.prototype.JoinHorz=function(e,n,s,a,h,f){var c=e.Pt.X>n.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight,p=s.Pt.X>a.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight;if(c==p)return!1;if(c==r.Direction.dLeftToRight){for(;e.Next.Pt.X<=h.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y==h.Y;)e=e.Next;f&&e.Pt.X!=h.X&&(e=e.Next),n=this.DupOutPt(e,!f),r.IntPoint.op_Inequality(n.Pt,h)&&(e=n,e.Pt.X=h.X,e.Pt.Y=h.Y,n=this.DupOutPt(e,!f))}else{for(;e.Next.Pt.X>=h.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y==h.Y;)e=e.Next;!f&&e.Pt.X!=h.X&&(e=e.Next),n=this.DupOutPt(e,f),r.IntPoint.op_Inequality(n.Pt,h)&&(e=n,e.Pt.X=h.X,e.Pt.Y=h.Y,n=this.DupOutPt(e,f))}if(p==r.Direction.dLeftToRight){for(;s.Next.Pt.X<=h.X&&s.Next.Pt.X>=s.Pt.X&&s.Next.Pt.Y==h.Y;)s=s.Next;f&&s.Pt.X!=h.X&&(s=s.Next),a=this.DupOutPt(s,!f),r.IntPoint.op_Inequality(a.Pt,h)&&(s=a,s.Pt.X=h.X,s.Pt.Y=h.Y,a=this.DupOutPt(s,!f))}else{for(;s.Next.Pt.X>=h.X&&s.Next.Pt.X<=s.Pt.X&&s.Next.Pt.Y==h.Y;)s=s.Next;!f&&s.Pt.X!=h.X&&(s=s.Next),a=this.DupOutPt(s,f),r.IntPoint.op_Inequality(a.Pt,h)&&(s=a,s.Pt.X=h.X,s.Pt.Y=h.Y,a=this.DupOutPt(s,f))}return c==r.Direction.dLeftToRight==f?(e.Prev=s,s.Next=e,n.Next=a,a.Prev=n):(e.Next=s,s.Prev=e,n.Prev=a,a.Next=n),!0},r.Clipper.prototype.JoinPoints=function(e,n,s){var a=e.OutPt1,h=new r.OutPt,f=e.OutPt2,c=new r.OutPt,p=e.OutPt1.Pt.Y==e.OffPt.Y;if(p&&r.IntPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&r.IntPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){for(h=e.OutPt1.Next;h!=a&&r.IntPoint.op_Equality(h.Pt,e.OffPt);)h=h.Next;var y=h.Pt.Y>e.OffPt.Y;for(c=e.OutPt2.Next;c!=f&&r.IntPoint.op_Equality(c.Pt,e.OffPt);)c=c.Next;var g=c.Pt.Y>e.OffPt.Y;return y==g?!1:y?(h=this.DupOutPt(a,!1),c=this.DupOutPt(f,!0),a.Prev=f,f.Next=a,h.Next=c,c.Prev=h,e.OutPt1=a,e.OutPt2=h,!0):(h=this.DupOutPt(a,!0),c=this.DupOutPt(f,!1),a.Next=f,f.Prev=a,h.Prev=c,c.Next=h,e.OutPt1=a,e.OutPt2=h,!0)}else if(p){for(h=a;a.Prev.Pt.Y==a.Pt.Y&&a.Prev!=h&&a.Prev!=f;)a=a.Prev;for(;h.Next.Pt.Y==h.Pt.Y&&h.Next!=a&&h.Next!=f;)h=h.Next;if(h.Next==a||h.Next==f)return!1;for(c=f;f.Prev.Pt.Y==f.Pt.Y&&f.Prev!=c&&f.Prev!=h;)f=f.Prev;for(;c.Next.Pt.Y==c.Pt.Y&&c.Next!=f&&c.Next!=a;)c=c.Next;if(c.Next==f||c.Next==a)return!1;var T={Left:null,Right:null};if(!this.GetOverlap(a.Pt.X,h.Pt.X,f.Pt.X,c.Pt.X,T))return!1;var b=T.Left,A=T.Right,X=new r.IntPoint,D;return a.Pt.X>=b&&a.Pt.X<=A?(X.X=a.Pt.X,X.Y=a.Pt.Y,D=a.Pt.X>h.Pt.X):f.Pt.X>=b&&f.Pt.X<=A?(X.X=f.Pt.X,X.Y=f.Pt.Y,D=f.Pt.X>c.Pt.X):h.Pt.X>=b&&h.Pt.X<=A?(X.X=h.Pt.X,X.Y=h.Pt.Y,D=h.Pt.X>a.Pt.X):(X.X=c.Pt.X,X.Y=c.Pt.Y,D=c.Pt.X>f.Pt.X),e.OutPt1=a,e.OutPt2=f,this.JoinHorz(a,h,f,c,X,D)}else{for(h=a.Next;r.IntPoint.op_Equality(h.Pt,a.Pt)&&h!=a;)h=h.Next;var F=h.Pt.Y>a.Pt.Y||!r.ClipperBase.SlopesEqual(a.Pt,h.Pt,e.OffPt,this.m_UseFullRange);if(F){for(h=a.Prev;r.IntPoint.op_Equality(h.Pt,a.Pt)&&h!=a;)h=h.Prev;if(h.Pt.Y>a.Pt.Y||!r.ClipperBase.SlopesEqual(a.Pt,h.Pt,e.OffPt,this.m_UseFullRange))return!1}for(c=f.Next;r.IntPoint.op_Equality(c.Pt,f.Pt)&&c!=f;)c=c.Next;var et=c.Pt.Y>f.Pt.Y||!r.ClipperBase.SlopesEqual(f.Pt,c.Pt,e.OffPt,this.m_UseFullRange);if(et){for(c=f.Prev;r.IntPoint.op_Equality(c.Pt,f.Pt)&&c!=f;)c=c.Prev;if(c.Pt.Y>f.Pt.Y||!r.ClipperBase.SlopesEqual(f.Pt,c.Pt,e.OffPt,this.m_UseFullRange))return!1}return h==a||c==f||h==c||n==s&&F==et?!1:F?(h=this.DupOutPt(a,!1),c=this.DupOutPt(f,!0),a.Prev=f,f.Next=a,h.Next=c,c.Prev=h,e.OutPt1=a,e.OutPt2=h,!0):(h=this.DupOutPt(a,!0),c=this.DupOutPt(f,!1),a.Next=f,f.Prev=a,h.Prev=c,c.Next=h,e.OutPt1=a,e.OutPt2=h,!0)}},r.Clipper.GetBounds=function(e){for(var n=0,s=e.length;n<s&&e[n].length==0;)n++;if(n==s)return new r.IntRect(0,0,0,0);var a=new r.IntRect;for(a.left=e[n][0].X,a.right=a.left,a.top=e[n][0].Y,a.bottom=a.top;n<s;n++)for(var h=0,f=e[n].length;h<f;h++)e[n][h].X<a.left?a.left=e[n][h].X:e[n][h].X>a.right&&(a.right=e[n][h].X),e[n][h].Y<a.top?a.top=e[n][h].Y:e[n][h].Y>a.bottom&&(a.bottom=e[n][h].Y);return a},r.Clipper.prototype.GetBounds2=function(e){var n=e,s=new r.IntRect;for(s.left=e.Pt.X,s.right=e.Pt.X,s.top=e.Pt.Y,s.bottom=e.Pt.Y,e=e.Next;e!=n;)e.Pt.X<s.left&&(s.left=e.Pt.X),e.Pt.X>s.right&&(s.right=e.Pt.X),e.Pt.Y<s.top&&(s.top=e.Pt.Y),e.Pt.Y>s.bottom&&(s.bottom=e.Pt.Y),e=e.Next;return s},r.Clipper.PointInPolygon=function(e,n){var s=0,a=n.length;if(a<3)return 0;for(var h=n[0],f=1;f<=a;++f){var c=f==a?n[0]:n[f];if(c.Y==e.Y&&(c.X==e.X||h.Y==e.Y&&c.X>e.X==h.X<e.X))return-1;if(h.Y<e.Y!=c.Y<e.Y){if(h.X>=e.X)if(c.X>e.X)s=1-s;else{var p=(h.X-e.X)*(c.Y-e.Y)-(c.X-e.X)*(h.Y-e.Y);if(p==0)return-1;p>0==c.Y>h.Y&&(s=1-s)}else if(c.X>e.X){var p=(h.X-e.X)*(c.Y-e.Y)-(c.X-e.X)*(h.Y-e.Y);if(p==0)return-1;p>0==c.Y>h.Y&&(s=1-s)}}h=c}return s},r.Clipper.prototype.PointInPolygon=function(e,n){for(var s=0,a=n;;){var h=n.Pt.X,f=n.Pt.Y,c=n.Next.Pt.X,p=n.Next.Pt.Y;if(p==e.Y&&(c==e.X||f==e.Y&&c>e.X==h<e.X))return-1;if(f<e.Y!=p<e.Y){if(h>=e.X)if(c>e.X)s=1-s;else{var y=(h-e.X)*(p-e.Y)-(c-e.X)*(f-e.Y);if(y==0)return-1;y>0==p>f&&(s=1-s)}else if(c>e.X){var y=(h-e.X)*(p-e.Y)-(c-e.X)*(f-e.Y);if(y==0)return-1;y>0==p>f&&(s=1-s)}}if(n=n.Next,a==n)break}return s},r.Clipper.prototype.Poly2ContainsPoly1=function(e,n){var s=e;do{var a=this.PointInPolygon(s.Pt,n);if(a>=0)return a!=0;s=s.Next}while(s!=e);return!0},r.Clipper.prototype.FixupFirstLefts1=function(e,n){for(var s=0,a=this.m_PolyOuts.length;s<a;s++){var h=this.m_PolyOuts[s];h.Pts!==null&&h.FirstLeft==e&&this.Poly2ContainsPoly1(h.Pts,n.Pts)&&(h.FirstLeft=n)}},r.Clipper.prototype.FixupFirstLefts2=function(e,n){for(var s=0,a=this.m_PolyOuts,h=a.length,f=a[s];s<h;s++,f=a[s])f.FirstLeft==e&&(f.FirstLeft=n)},r.Clipper.ParseFirstLeft=function(e){for(;e!=null&&e.Pts==null;)e=e.FirstLeft;return e},r.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,n=this.m_Joins.length;e<n;e++){var s=this.m_Joins[e],a=this.GetOutRec(s.OutPt1.Idx),h=this.GetOutRec(s.OutPt2.Idx);if(!(a.Pts==null||h.Pts==null)){var f;if(a==h?f=a:this.Param1RightOfParam2(a,h)?f=h:this.Param1RightOfParam2(h,a)?f=a:f=this.GetLowermostRec(a,h),!!this.JoinPoints(s,a,h))if(a==h){if(a.Pts=s.OutPt1,a.BottomPt=null,h=this.CreateOutRec(),h.Pts=s.OutPt2,this.UpdateOutPtIdxs(h),this.m_UsingPolyTree)for(var c=0,p=this.m_PolyOuts.length;c<p-1;c++){var y=this.m_PolyOuts[c];y.Pts==null||r.Clipper.ParseFirstLeft(y.FirstLeft)!=a||y.IsHole==a.IsHole||this.Poly2ContainsPoly1(y.Pts,s.OutPt2)&&(y.FirstLeft=h)}this.Poly2ContainsPoly1(h.Pts,a.Pts)?(h.IsHole=!a.IsHole,h.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(h,a),(h.IsHole^this.ReverseSolution)==this.Area(h)>0&&this.ReversePolyPtLinks(h.Pts)):this.Poly2ContainsPoly1(a.Pts,h.Pts)?(h.IsHole=a.IsHole,a.IsHole=!h.IsHole,h.FirstLeft=a.FirstLeft,a.FirstLeft=h,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,h),(a.IsHole^this.ReverseSolution)==this.Area(a)>0&&this.ReversePolyPtLinks(a.Pts)):(h.IsHole=a.IsHole,h.FirstLeft=a.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(a,h))}else h.Pts=null,h.BottomPt=null,h.Idx=a.Idx,a.IsHole=f.IsHole,f==h&&(a.FirstLeft=h.FirstLeft),h.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(h,a)}}},r.Clipper.prototype.UpdateOutPtIdxs=function(e){var n=e.Pts;do n.Idx=e.Idx,n=n.Prev;while(n!=e.Pts)},r.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var n=this.m_PolyOuts[e++],s=n.Pts;if(s!==null)do{for(var a=s.Next;a!=n.Pts;){if(r.IntPoint.op_Equality(s.Pt,a.Pt)&&a.Next!=s&&a.Prev!=s){var h=s.Prev,f=a.Prev;s.Prev=f,f.Next=s,a.Prev=h,h.Next=a,n.Pts=s;var c=this.CreateOutRec();c.Pts=a,this.UpdateOutPtIdxs(c),this.Poly2ContainsPoly1(c.Pts,n.Pts)?(c.IsHole=!n.IsHole,c.FirstLeft=n):this.Poly2ContainsPoly1(n.Pts,c.Pts)?(c.IsHole=n.IsHole,n.IsHole=!c.IsHole,c.FirstLeft=n.FirstLeft,n.FirstLeft=c):(c.IsHole=n.IsHole,c.FirstLeft=n.FirstLeft),a=s}a=a.Next}s=s.Next}while(s!=n.Pts)}},r.Clipper.Area=function(e){var n=e.length;if(n<3)return 0;for(var s=0,a=0,h=n-1;a<n;++a)s+=(e[h].X+e[a].X)*(e[h].Y-e[a].Y),h=a;return-s*.5},r.Clipper.prototype.Area=function(e){var n=e.Pts;if(n==null)return 0;var s=0;do s=s+(n.Prev.Pt.X+n.Pt.X)*(n.Prev.Pt.Y-n.Pt.Y),n=n.Next;while(n!=e.Pts);return s*.5},r.Clipper.SimplifyPolygon=function(e,n){var s=new Array,a=new r.Clipper(0);return a.StrictlySimple=!0,a.AddPath(e,r.PolyType.ptSubject,!0),a.Execute(r.ClipType.ctUnion,s,n,n),s},r.Clipper.SimplifyPolygons=function(e,n){typeof n>"u"&&(n=r.PolyFillType.pftEvenOdd);var s=new Array,a=new r.Clipper(0);return a.StrictlySimple=!0,a.AddPaths(e,r.PolyType.ptSubject,!0),a.Execute(r.ClipType.ctUnion,s,n,n),s},r.Clipper.DistanceSqrd=function(e,n){var s=e.X-n.X,a=e.Y-n.Y;return s*s+a*a},r.Clipper.DistanceFromLineSqrd=function(e,n,s){var a=n.Y-s.Y,h=s.X-n.X,f=a*n.X+h*n.Y;return f=a*e.X+h*e.Y-f,f*f/(a*a+h*h)},r.Clipper.SlopesNearCollinear=function(e,n,s,a){return r.Clipper.DistanceFromLineSqrd(n,e,s)<a},r.Clipper.PointsAreClose=function(e,n,s){var a=e.X-n.X,h=e.Y-n.Y;return a*a+h*h<=s},r.Clipper.ExcludeOp=function(e){var n=e.Prev;return n.Next=e.Next,e.Next.Prev=n,n.Idx=0,n},r.Clipper.CleanPolygon=function(e,n){typeof n>"u"&&(n=1.415);var s=e.length;if(s==0)return new Array;for(var a=new Array(s),h=0;h<s;++h)a[h]=new r.OutPt;for(var h=0;h<s;++h)a[h].Pt=e[h],a[h].Next=a[(h+1)%s],a[h].Next.Prev=a[h],a[h].Idx=0;for(var f=n*n,c=a[0];c.Idx==0&&c.Next!=c.Prev;)r.Clipper.PointsAreClose(c.Pt,c.Prev.Pt,f)?(c=r.Clipper.ExcludeOp(c),s--):r.Clipper.PointsAreClose(c.Prev.Pt,c.Next.Pt,f)?(r.Clipper.ExcludeOp(c.Next),c=r.Clipper.ExcludeOp(c),s-=2):r.Clipper.SlopesNearCollinear(c.Prev.Pt,c.Pt,c.Next.Pt,f)?(c=r.Clipper.ExcludeOp(c),s--):(c.Idx=1,c=c.Next);s<3&&(s=0);for(var p=new Array(s),h=0;h<s;++h)p[h]=new r.IntPoint(c.Pt),c=c.Next;return a=null,p},r.Clipper.CleanPolygons=function(e,n){for(var s=new Array(e.length),a=0,h=e.length;a<h;a++)s[a]=r.Clipper.CleanPolygon(e[a],n);return s},r.Clipper.Minkowski=function(e,n,s,a){var h=a?1:0,f=e.length,c=n.length,p=new Array;if(s)for(var y=0;y<c;y++){for(var g=new Array(f),T=0,b=e.length,A=e[T];T<b;T++,A=e[T])g[T]=new r.IntPoint(n[y].X+A.X,n[y].Y+A.Y);p.push(g)}else for(var y=0;y<c;y++){for(var g=new Array(f),T=0,b=e.length,A=e[T];T<b;T++,A=e[T])g[T]=new r.IntPoint(n[y].X-A.X,n[y].Y-A.Y);p.push(g)}for(var X=new Array,y=0;y<c-1+h;y++)for(var T=0;T<f;T++){var D=new Array;D.push(p[y%c][T%f]),D.push(p[(y+1)%c][T%f]),D.push(p[(y+1)%c][(T+1)%f]),D.push(p[y%c][(T+1)%f]),r.Clipper.Orientation(D)||D.reverse(),X.push(D)}var F=new r.Clipper(0);return F.AddPaths(X,r.PolyType.ptSubject,!0),F.Execute(r.ClipType.ctUnion,p,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),p},r.Clipper.MinkowskiSum=function(){var e=arguments,n=e.length;if(n==3){var s=e[0],a=e[1],h=e[2];return r.Clipper.Minkowski(s,a,!0,h)}else if(n==4){for(var s=e[0],f=e[1],c=e[2],h=e[3],p=new r.Clipper,y,g=0,T=f.length;g<T;++g){var y=r.Clipper.Minkowski(s,f[g],!0,h);p.AddPaths(y,r.PolyType.ptSubject,!0)}h&&p.AddPaths(f,r.PolyType.ptClip,!0);var b=new r.Paths;return p.Execute(r.ClipType.ctUnion,b,c,c),b}},r.Clipper.MinkowskiDiff=function(e,n,s){return r.Clipper.Minkowski(e,n,!1,s)},r.Clipper.PolyTreeToPaths=function(e){var n=new Array;return r.Clipper.AddPolyNodeToPaths(e,r.Clipper.NodeType.ntAny,n),n},r.Clipper.AddPolyNodeToPaths=function(e,n,s){var a=!0;switch(n){case r.Clipper.NodeType.ntOpen:return;case r.Clipper.NodeType.ntClosed:a=!e.IsOpen;break}e.m_polygon.length>0&&a&&s.push(e.m_polygon);for(var h=0,f=e.Childs(),c=f.length,p=f[h];h<c;h++,p=f[h])r.Clipper.AddPolyNodeToPaths(p,n,s)},r.Clipper.OpenPathsFromPolyTree=function(e){for(var n=new r.Paths,s=0,a=e.ChildCount();s<a;s++)e.Childs()[s].IsOpen&&n.push(e.Childs()[s].m_polygon);return n},r.Clipper.ClosedPathsFromPolyTree=function(e){var n=new r.Paths;return r.Clipper.AddPolyNodeToPaths(e,r.Clipper.NodeType.ntClosed,n),n},R(r.Clipper,r.ClipperBase),r.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},r.ClipperOffset=function(e,n){typeof e>"u"&&(e=2),typeof n>"u"&&(n=r.ClipperOffset.def_arc_tolerance),this.m_destPolys=new r.Paths,this.m_srcPoly=new r.Path,this.m_destPoly=new r.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new r.IntPoint,this.m_polyNodes=new r.PolyNode,this.MiterLimit=e,this.ArcTolerance=n,this.m_lowest.X=-1},r.ClipperOffset.two_pi=6.28318530717959,r.ClipperOffset.def_arc_tolerance=.25,r.ClipperOffset.prototype.Clear=function(){r.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},r.ClipperOffset.Round=r.Clipper.Round,r.ClipperOffset.prototype.AddPath=function(e,n,s){var a=e.length-1;if(!(a<0)){var h=new r.PolyNode;if(h.m_jointype=n,h.m_endtype=s,s==r.EndType.etClosedLine||s==r.EndType.etClosedPolygon)for(;a>0&&r.IntPoint.op_Equality(e[0],e[a]);)a--;h.m_polygon.push(e[0]);for(var f=0,c=0,p=1;p<=a;p++)r.IntPoint.op_Inequality(h.m_polygon[f],e[p])&&(f++,h.m_polygon.push(e[p]),(e[p].Y>h.m_polygon[c].Y||e[p].Y==h.m_polygon[c].Y&&e[p].X<h.m_polygon[c].X)&&(c=f));if(!(s==r.EndType.etClosedPolygon&&f<2||s!=r.EndType.etClosedPolygon&&f<0)&&(this.m_polyNodes.AddChild(h),s==r.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new r.IntPoint(0,c);else{var y=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(h.m_polygon[c].Y>y.Y||h.m_polygon[c].Y==y.Y&&h.m_polygon[c].X<y.X)&&(this.m_lowest=new r.IntPoint(this.m_polyNodes.ChildCount()-1,c))}}},r.ClipperOffset.prototype.AddPaths=function(e,n,s){for(var a=0,h=e.length;a<h;a++)this.AddPath(e[a],n,s)},r.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!r.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];(n.m_endtype==r.EndType.etClosedPolygon||n.m_endtype==r.EndType.etClosedLine&&r.Clipper.Orientation(n.m_polygon))&&n.m_polygon.reverse()}else for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];n.m_endtype==r.EndType.etClosedLine&&!r.Clipper.Orientation(n.m_polygon)&&n.m_polygon.reverse()}},r.ClipperOffset.GetUnitNormal=function(e,n){var s=n.X-e.X,a=n.Y-e.Y;if(s==0&&a==0)return new r.DoublePoint(0,0);var h=1/Math.sqrt(s*s+a*a);return s*=h,a*=h,new r.DoublePoint(a,-s)},r.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,r.ClipperBase.near_zero(e)){for(var n=0;n<this.m_polyNodes.ChildCount();n++){var s=this.m_polyNodes.Childs()[n];s.m_endtype==r.EndType.etClosedPolygon&&this.m_destPolys.push(s.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var a;this.ArcTolerance<=0?a=r.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*r.ClipperOffset.def_arc_tolerance?a=Math.abs(e)*r.ClipperOffset.def_arc_tolerance:a=this.ArcTolerance;var h=3.14159265358979/Math.acos(1-a/Math.abs(e));this.m_sin=Math.sin(r.ClipperOffset.two_pi/h),this.m_cos=Math.cos(r.ClipperOffset.two_pi/h),this.m_StepsPerRad=h/r.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(var n=0;n<this.m_polyNodes.ChildCount();n++){var s=this.m_polyNodes.Childs()[n];this.m_srcPoly=s.m_polygon;var f=this.m_srcPoly.length;if(!(f==0||e<=0&&(f<3||s.m_endtype!=r.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,f==1){if(s.m_jointype==r.JoinType.jtRound)for(var c=1,p=0,y=1;y<=h;y++){this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+c*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y+p*e)));var g=c;c=c*this.m_cos-this.m_sin*p,p=g*this.m_sin+p*this.m_cos}else for(var c=-1,p=-1,y=0;y<4;++y)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+c*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y+p*e))),c<0?c=1:p<0?p=1:c=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var y=0;y<f-1;y++)this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[y],this.m_srcPoly[y+1]));if(s.m_endtype==r.EndType.etClosedLine||s.m_endtype==r.EndType.etClosedPolygon?this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[f-1],this.m_srcPoly[0])):this.m_normals.push(new r.DoublePoint(this.m_normals[f-2])),s.m_endtype==r.EndType.etClosedPolygon){for(var T=f-1,y=0;y<f;y++)T=this.OffsetPoint(y,T,s.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(s.m_endtype==r.EndType.etClosedLine){for(var T=f-1,y=0;y<f;y++)T=this.OffsetPoint(y,T,s.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var b=this.m_normals[f-1],y=f-1;y>0;y--)this.m_normals[y]=new r.DoublePoint(-this.m_normals[y-1].X,-this.m_normals[y-1].Y);this.m_normals[0]=new r.DoublePoint(-b.X,-b.Y),T=0;for(var y=f-1;y>=0;y--)T=this.OffsetPoint(y,T,s.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var T=0,y=1;y<f-1;++y)T=this.OffsetPoint(y,T,s.m_jointype);var A;if(s.m_endtype==r.EndType.etOpenButt){var y=f-1;A=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[y].X+this.m_normals[y].X*e),r.ClipperOffset.Round(this.m_srcPoly[y].Y+this.m_normals[y].Y*e)),this.m_destPoly.push(A),A=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[y].X-this.m_normals[y].X*e),r.ClipperOffset.Round(this.m_srcPoly[y].Y-this.m_normals[y].Y*e)),this.m_destPoly.push(A)}else{var y=f-1;T=f-2,this.m_sinA=0,this.m_normals[y]=new r.DoublePoint(-this.m_normals[y].X,-this.m_normals[y].Y),s.m_endtype==r.EndType.etOpenSquare?this.DoSquare(y,T):this.DoRound(y,T)}for(var y=f-1;y>0;y--)this.m_normals[y]=new r.DoublePoint(-this.m_normals[y-1].X,-this.m_normals[y-1].Y);this.m_normals[0]=new r.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),T=f-1;for(var y=T-1;y>0;--y)T=this.OffsetPoint(y,T,s.m_jointype);s.m_endtype==r.EndType.etOpenButt?(A=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*e)),this.m_destPoly.push(A),A=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*e)),this.m_destPoly.push(A)):(T=1,this.m_sinA=0,s.m_endtype==r.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},r.ClipperOffset.prototype.Execute=function(){var e=arguments,n=e[0]instanceof r.PolyTree;if(n){var s=e[0],a=e[1];s.Clear(),this.FixOrientations(),this.DoOffset(a);var h=new r.Clipper(0);if(h.AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),a>0)h.Execute(r.ClipType.ctUnion,s,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{var f=r.Clipper.GetBounds(this.m_destPolys),c=new r.Path;if(c.push(new r.IntPoint(f.left-10,f.bottom+10)),c.push(new r.IntPoint(f.right+10,f.bottom+10)),c.push(new r.IntPoint(f.right+10,f.top-10)),c.push(new r.IntPoint(f.left-10,f.top-10)),h.AddPath(c,r.PolyType.ptSubject,!0),h.ReverseSolution=!0,h.Execute(r.ClipType.ctUnion,s,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),s.ChildCount()==1&&s.Childs()[0].ChildCount()>0){var p=s.Childs()[0];s.Childs()[0]=p.Childs()[0];for(var y=1;y<p.ChildCount();y++)s.AddChild(p.Childs()[y])}else s.Clear()}}else{var s=e[0],a=e[1];r.Clear(s),this.FixOrientations(),this.DoOffset(a);var h=new r.Clipper(0);if(h.AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),a>0)h.Execute(r.ClipType.ctUnion,s,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{var f=r.Clipper.GetBounds(this.m_destPolys),c=new r.Path;c.push(new r.IntPoint(f.left-10,f.bottom+10)),c.push(new r.IntPoint(f.right+10,f.bottom+10)),c.push(new r.IntPoint(f.right+10,f.top-10)),c.push(new r.IntPoint(f.left-10,f.top-10)),h.AddPath(c,r.PolyType.ptSubject,!0),h.ReverseSolution=!0,h.Execute(r.ClipType.ctUnion,s,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),s.length>0&&s.splice(0,1)}}},r.ClipperOffset.prototype.OffsetPoint=function(e,n,s){if(this.m_sinA=this.m_normals[n].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[n].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return n;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[n].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[n].Y*this.m_delta))),this.m_destPoly.push(new r.IntPoint(this.m_srcPoly[e])),this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)));else switch(s){case r.JoinType.jtMiter:{var a=1+(this.m_normals[e].X*this.m_normals[n].X+this.m_normals[e].Y*this.m_normals[n].Y);a>=this.m_miterLim?this.DoMiter(e,n,a):this.DoSquare(e,n);break}case r.JoinType.jtSquare:this.DoSquare(e,n);break;case r.JoinType.jtRound:this.DoRound(e,n);break}return n=e,n},r.ClipperOffset.prototype.DoSquare=function(e,n){var s=Math.tan(Math.atan2(this.m_sinA,this.m_normals[n].X*this.m_normals[e].X+this.m_normals[n].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[n].X-this.m_normals[n].Y*s)),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[n].Y+this.m_normals[n].X*s)))),this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*s)),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*s))))},r.ClipperOffset.prototype.DoMiter=function(e,n,s){var a=this.m_delta/s;this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+(this.m_normals[n].X+this.m_normals[e].X)*a),r.ClipperOffset.Round(this.m_srcPoly[e].Y+(this.m_normals[n].Y+this.m_normals[e].Y)*a)))},r.ClipperOffset.prototype.DoRound=function(e,n){for(var s=Math.atan2(this.m_sinA,this.m_normals[n].X*this.m_normals[e].X+this.m_normals[n].Y*this.m_normals[e].Y),a=r.Cast_Int32(r.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(s))),h=this.m_normals[n].X,f=this.m_normals[n].Y,c,p=0;p<a;++p)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+h*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+f*this.m_delta))),c=h,h=h*this.m_cos-this.m_sin*f,f=c*this.m_sin+f*this.m_cos;this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)))},r.Error=function(e){try{throw new Error(e)}catch(n){alert(n.message)}},r.JS={},r.JS.AreaOfPolygon=function(e,n){return n||(n=1),r.Clipper.Area(e)/(n*n)},r.JS.AreaOfPolygons=function(e,n){n||(n=1);for(var s=0,a=0;a<e.length;a++)s+=r.Clipper.Area(e[a]);return s/(n*n)},r.JS.BoundsOfPath=function(e,n){return r.JS.BoundsOfPaths([e],n)},r.JS.BoundsOfPaths=function(e,n){n||(n=1);var s=r.Clipper.GetBounds(e);return s.left/=n,s.bottom/=n,s.right/=n,s.top/=n,s},r.JS.Clean=function(a,n){if(!(a instanceof Array))return[];var s=a[0]instanceof Array,a=r.JS.Clone(a);if(typeof n!="number"||n===null)return r.Error("Delta is not a number in Clean()."),a;if(a.length===0||a.length==1&&a[0].length===0||n<0)return a;s||(a=[a]);for(var h=a.length,f,c,p,y,g,T,b,A=[],X=0;X<h;X++)if(c=a[X],f=c.length,f!==0){if(f<3){p=c,A.push(p);continue}for(p=c,y=n*n,g=c[0],T=1,b=1;b<f;b++)(c[b].X-g.X)*(c[b].X-g.X)+(c[b].Y-g.Y)*(c[b].Y-g.Y)<=y||(p[T]=c[b],g=c[b],T++);g=c[T-1],(c[0].X-g.X)*(c[0].X-g.X)+(c[0].Y-g.Y)*(c[0].Y-g.Y)<=y&&T--,T<f&&p.splice(T,f-T),p.length&&A.push(p)}return!s&&A.length?A=A[0]:!s&&A.length===0?A=[]:s&&A.length===0&&(A=[[]]),A},r.JS.Clone=function(e){if(!(e instanceof Array))return[];if(e.length===0)return[];if(e.length==1&&e[0].length===0)return[[]];var n=e[0]instanceof Array;n||(e=[e]);var s=e.length,a,h,f,c,p=new Array(s);for(h=0;h<s;h++){for(a=e[h].length,c=new Array(a),f=0;f<a;f++)c[f]={X:e[h][f].X,Y:e[h][f].Y};p[h]=c}return n||(p=p[0]),p},r.JS.Lighten=function(e,n){if(!(e instanceof Array))return[];if(typeof n!="number"||n===null)return r.Error("Tolerance is not a number in Lighten()."),r.JS.Clone(e);if(e.length===0||e.length==1&&e[0].length===0||n<0)return r.JS.Clone(e);e[0]instanceof Array||(e=[e]);var s,a,h,f,c,p,y,g,T,b,A,X,D,F,et,ut,Y,Tt=e.length,$=n*n,kt=[];for(s=0;s<Tt;s++)if(h=e[s],p=h.length,p!=0){for(f=0;f<1e6;f++){for(c=[],p=h.length,h[p-1].X!=h[0].X||h[p-1].Y!=h[0].Y?(X=1,h.push({X:h[0].X,Y:h[0].Y}),p=h.length):X=0,A=[],a=0;a<p-2;a++)y=h[a],T=h[a+1],g=h[a+2],ut=y.X,Y=y.Y,D=g.X-ut,F=g.Y-Y,(D!==0||F!==0)&&(et=((T.X-ut)*D+(T.Y-Y)*F)/(D*D+F*F),et>1?(ut=g.X,Y=g.Y):et>0&&(ut+=D*et,Y+=F*et)),D=T.X-ut,F=T.Y-Y,b=D*D+F*F,b<=$&&(A[a+1]=1,a++);for(c.push({X:h[0].X,Y:h[0].Y}),a=1;a<p-1;a++)A[a]||c.push({X:h[a].X,Y:h[a].Y});if(c.push({X:h[p-1].X,Y:h[p-1].Y}),X&&h.pop(),A.length)h=c;else break}p=c.length,c[p-1].X==c[0].X&&c[p-1].Y==c[0].Y&&c.pop(),c.length>2&&kt.push(c)}return!e[0]instanceof Array&&(kt=kt[0]),typeof kt>"u"&&(kt=[[]]),kt},r.JS.PerimeterOfPath=function(e,n,s){if(typeof e>"u")return 0;var a=Math.sqrt,h=0,f,c,p=0,y=0,g=0,T=0,b=e.length;if(b<2)return 0;for(n&&(e[b]=e[0],b++);--b;)f=e[b],p=f.X,y=f.Y,c=e[b-1],g=c.X,T=c.Y,h+=a((p-g)*(p-g)+(y-T)*(y-T));return n&&e.pop(),h/s},r.JS.PerimeterOfPaths=function(e,n,s){s||(s=1);for(var a=0,h=0;h<e.length;h++)a+=r.JS.PerimeterOfPath(e[h],n,s);return a},r.JS.ScaleDownPath=function(e,n){var s,a;for(n||(n=1),s=e.length;s--;)a=e[s],a.X=a.X/n,a.Y=a.Y/n},r.JS.ScaleDownPaths=function(e,n){var s,a,h;for(n||(n=1),s=e.length;s--;)for(a=e[s].length;a--;)h=e[s][a],h.X=h.X/n,h.Y=h.Y/n},r.JS.ScaleUpPath=function(e,n){var s,a,h=Math.round;for(n||(n=1),s=e.length;s--;)a=e[s],a.X=h(a.X*n),a.Y=h(a.Y*n)},r.JS.ScaleUpPaths=function(e,n){var s,a,h,f=Math.round;for(n||(n=1),s=e.length;s--;)for(a=e[s].length;a--;)h=e[s][a],h.X=f(h.X*n),h.Y=f(h.Y*n)},r.ExPolygons=function(){return[]},r.ExPolygon=function(){this.outer=null,this.holes=null},r.JS.AddOuterPolyNodeToExPolygons=function(e,n){var s=new r.ExPolygon;s.outer=e.Contour();var a=e.Childs(),h=a.length;s.holes=new Array(h);var f,c,p,y,g,T;for(p=0;p<h;p++)for(f=a[p],s.holes[p]=f.Contour(),y=0,g=f.Childs(),T=g.length;y<T;y++)c=g[y],r.JS.AddOuterPolyNodeToExPolygons(c,n);n.push(s)},r.JS.ExPolygonsToPaths=function(e){var n,s,a,h,f=new r.Paths;for(n=0,a=e.length;n<a;n++)for(f.push(e[n].outer),s=0,h=e[n].holes.length;s<h;s++)f.push(e[n].holes[s]);return f},r.JS.PolyTreeToExPolygons=function(e){var n=new r.ExPolygons,s,a,h,f;for(a=0,h=e.Childs(),f=h.length;a<f;a++)s=h[a],r.JS.AddOuterPolyNodeToExPolygons(s,n);return n},m.exports=r})(ws);const jt=ws.exports,Vo=(m,r)=>r.some(v=>m instanceof v);let vs,ys;function Jo(){return vs||(vs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ko(){return ys||(ys=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ts=new WeakMap,Bn=new WeakMap,Is=new WeakMap,bn=new WeakMap,Dn=new WeakMap;function $o(m){const r=new Promise((v,E)=>{const w=()=>{m.removeEventListener("success",S),m.removeEventListener("error",B)},S=()=>{v(te(m.result)),w()},B=()=>{E(m.error),w()};m.addEventListener("success",S),m.addEventListener("error",B)});return r.then(v=>{v instanceof IDBCursor&&Ts.set(v,m)}).catch(()=>{}),Dn.set(r,m),r}function jo(m){if(Bn.has(m))return;const r=new Promise((v,E)=>{const w=()=>{m.removeEventListener("complete",S),m.removeEventListener("error",B),m.removeEventListener("abort",B)},S=()=>{v(),w()},B=()=>{E(m.error),w()};m.addEventListener("complete",S),m.addEventListener("error",B),m.addEventListener("abort",B)});Bn.set(m,r)}let An={get(m,r,v){if(m instanceof IDBTransaction){if(r==="done")return Bn.get(m);if(r==="objectStoreNames")return m.objectStoreNames||Is.get(m);if(r==="store")return v.objectStoreNames[1]?void 0:v.objectStore(v.objectStoreNames[0])}return te(m[r])},has(m,r){return m instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in m}};function Qo(m){An=m(An)}function tr(m){return m===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...v){const E=m.call(Sn(this),r,...v);return Is.set(E,r.sort?r.sort():[r]),te(E)}:Ko().includes(m)?function(...r){return m.apply(Sn(this),r),te(Ts.get(this))}:function(...r){return te(m.apply(Sn(this),r))}}function er(m){return typeof m=="function"?tr(m):(m instanceof IDBTransaction&&jo(m),Vo(m,Jo())?new Proxy(m,An):m)}function te(m){if(m instanceof IDBRequest)return $o(m);if(bn.has(m))return bn.get(m);const r=er(m);return r!==m&&(bn.set(m,r),Dn.set(r,m)),r}const Sn=m=>Dn.get(m);function nr(m,r,{blocked:v,upgrade:E,blocking:w}={}){const S=indexedDB.open(m,r),B=te(S);return E&&S.addEventListener("upgradeneeded",C=>{E(te(S.result),C.oldVersion,C.newVersion,te(S.transaction))}),v&&S.addEventListener("blocked",()=>v()),w&&B.then(C=>C.addEventListener("versionchange",w)).catch(()=>{}),B}const sr=["get","getKey","getAll","getAllKeys","count"],or=["put","add","delete","clear"],En=new Map;function gs(m,r){if(!(m instanceof IDBDatabase&&!(r in m)&&typeof r=="string"))return;if(En.get(r))return En.get(r);const v=r.replace(/FromIndex$/,""),E=r!==v,w=or.includes(v);if(!(v in(E?IDBIndex:IDBObjectStore).prototype)||!(w||sr.includes(v)))return;const S=async function(B,...C){const O=this.transaction(B,w?"readwrite":"readonly");let xt=O.store;E&&(xt=xt.index(C.shift()));const yt=xt[v](...C);return w&&await O.done,yt};return En.set(r,S),S}Qo(m=>({get:(r,v,E)=>gs(r,v)||m.get(r,v,E),has:(r,v)=>!!gs(r,v)||m.has(r,v)}));const rr=H.Control.extend({options:{},_layers:{},initialize(m){H.Util.setOptions(this,m),this._layers={}},_addLayer(m){let r=15;m.options.minZoom&&(r=m.options.minZoom),this._layers[m._leaflet_id]=r,this._updateBox(null)},_removeLayer(m){this._layers[m._leaflet_id]=null,this._updateBox(null)},_getMinZoomLevel(){let m=-1;for(const r in this._layers)this._layers[r]!==null&&this._layers[r]>m&&(m=this._layers[r]);return m},_updateBox(m){const r=this._getMinZoomLevel();m!==null&&H.DomEvent.preventDefault(m),r==-1?this._container.innerHTML=this.options.minZoomMessageNoLayer:this._container.innerHTML=this.options.minZoomMessage.replace(/CURRENTZOOM/,this._map.getZoom()).replace(/MINZOOMLEVEL/,r),this._map.getZoom()>=r?this._container.style.display="none":this._container.style.display="block"},onAdd(m){return this._map=m,this._map.zoomIndicator=this,this._container=H.DomUtil.create("div","leaflet-control-minZoomIndicator"),this._map.on("moveend",this._updateBox,this),this._updateBox(null),this._container},onRemove(m){m.off({moveend:this._updateBox},this)}});H.Control.MinZoomIndicator=rr;const bs=H.FeatureGroup.extend({options:{debug:!1,minZoom:15,endPoint:"https://overpass-api.de/api/",query:"(node({{bbox}})[organic];node({{bbox}})[second_hand];);out qt;",loadedBounds:[],markerIcon:null,timeout:30*1e3,retryOnTimeout:!1,noInitialRequest:!1,cacheEnabled:!1,cacheTTL:1800,beforeRequest(){},afterRequest(){},onSuccess(m){for(let r=0;r<m.elements.length;r++){let v,E;const w=m.elements[r];if(w.id in this._ids)continue;this._ids[w.id]=!0,w.type==="node"?v=H.latLng(w.lat,w.lon):v=H.latLng(w.center.lat,w.center.lon),this.options.markerIcon?E=H.marker(v,{icon:this.options.markerIcon}):E=H.circle(v,20,{stroke:!1,fillColor:"#E54041",fillOpacity:.9});const S=this._getPoiPopupHTML(w.tags,w.id),B=H.popup().setContent(S);E.bindPopup(B),this._markers.addLayer(E)}},onError(){},onTimeout(){},minZoomIndicatorEnabled:!0,minZoomIndicatorOptions:{minZoomMessageNoLayer:"No layer assigned",minZoomMessage:"Current zoom Level: CURRENTZOOM. Data are visible at Level: MINZOOMLEVEL."}},initialize(m){H.Util.setOptions(this,m),this._ids={},this._loadedBounds=m.loadedBounds||[],this._requestInProgress=!1,this.options.cacheEnabled&&this._initCacheDb()},async _initCacheDb(){this._cacheDb=await nr("leaflet-overpass-layer",1,{upgrade(r){r.createObjectStore("cache",{autoIncrement:!0})}}),!!this._map&&this._loadCachedItems()},_getPoiPopupHTML(m,r){let v;const E=document.createElement("a"),w=document.createElement("table"),S=document.createElement("div");E.href=`https://www.openstreetmap.org/edit?editor=id&node=${r}`,E.appendChild(document.createTextNode("Edit this entry in iD")),w.style.borderSpacing="10px",w.style.borderCollapse="separate";for(const B in m)v=w.insertRow(0),v.insertCell(0).appendChild(document.createTextNode(B)),v.insertCell(1).appendChild(document.createTextNode(m[B]));return S.appendChild(E),S.appendChild(w),S},_buildRequestBox(m){return H.rectangle(m,{bounds:m,color:"#204a87",stroke:!1,fillOpacity:.1,clickable:!1})},_addRequestBox(m){return this._requestBoxes.addLayer(m)},_getRequestBoxes(){return this._requestBoxes.getLayers()},_removeRequestBox(m){this._requestBoxes.removeLayer(m)},_removeRequestBoxes(){return this._requestBoxes.clearLayers()},_addResponseBox(m){return this._responseBoxes.addLayer(m)},_addResponseBoxes(m){this._removeRequestBoxes(),m.forEach(r=>{r.setStyle({color:"black",weight:2}),this._addResponseBox(r)})},_isFullyLoadedBounds(m,r){if(r.length===0)return!1;const v=this._buildClipsFromBounds([m]),E=this._buildClipsFromBounds(r),w=new jt.Clipper,S=new jt.PolyTree;return w.AddPaths(v,jt.PolyType.ptSubject,!0),w.AddPaths(E,jt.PolyType.ptClip,!0),w.Execute(jt.ClipType.ctDifference,S,jt.PolyFillType.pftNonZero,jt.PolyFillType.pftNonZero),jt.JS.PolyTreeToExPolygons(S).length===0},_getLoadedBounds(){return this._loadedBounds},_addLoadedBounds(m){this._loadedBounds.push(m)},_buildClipsFromBounds(m){return m.map(r=>[{X:r._southWest.lng*1e6,Y:r._southWest.lat*1e6},{X:r._southWest.lng*1e6,Y:r._northEast.lat*1e6},{X:r._northEast.lng*1e6,Y:r._northEast.lat*1e6},{X:r._northEast.lng*1e6,Y:r._southWest.lat*1e6}])},_buildBoundsFromClips(m){return m.map(r=>H.latLngBounds(H.latLng(r[0].Y/1e6,r[0].X/1e6).wrap(),H.latLng(r[2].Y/1e6,r[2].X/1e6).wrap()))},_buildOverpassQueryFromQueryAndBounds(m,r){const v=r._southWest,E=r._northEast,w=[v.lat,v.lng,E.lat,E.lng].join(",");return m=m.replace(/(\/\/.*)/g,""),m=m.replace(/(\{\{bbox\}\})/g,w),m},_buildOverpassUrlFromEndPointAndQuery(m,r){return`${m}interpreter?data=[out:json];${r}`},_buildLargerBounds(m){const r=Math.abs(m._northEast.lng-m._southWest.lng),v=Math.abs(m._northEast.lat-m._southWest.lat),E=r>v?r:v;return m._southWest.lat-=E/2,m._southWest.lng-=E/2,m._northEast.lat+=E/2,m._northEast.lng+=E/2,H.latLngBounds(H.latLng(m._southWest.lat,m._southWest.lng).wrap(),H.latLng(m._northEast.lat,m._northEast.lng).wrap())},_setRequestInProgress(m){this._requestInProgress=m},_isRequestInProgress(){return this._requestInProgress},_hasNextRequest(){return!!this._nextRequest},_getNextRequest(){return this._nextRequest},_setNextRequest(m){this._nextRequest=m},_removeNextRequest(){this._nextRequest=null},_prepareRequest(){if(this._map.getZoom()<this.options.minZoom)return!1;const m=this._buildLargerBounds(this._map.getBounds()),r=this._sendRequest.bind(this,m);this._isRequestInProgress()?this._setNextRequest(r):(this._removeNextRequest(),r())},_sendRequest(m){const r=this._getLoadedBounds();if(this._isFullyLoadedBounds(m,r)){this._setRequestInProgress(!1);return}const v=this._buildLargerBounds(m),E=this._buildOverpassUrlFromEndPointAndQuery(this.options.endPoint,this._buildOverpassQueryFromQueryAndBounds(this.options.query,v)),w=new XMLHttpRequest;if(this.options.beforeRequest.call(this)===!1){this.options.afterRequest.call(this);return}this._setRequestInProgress(!0),this.options.debug&&this._addRequestBox(this._buildRequestBox(v)),w.open("GET",E,!0),w.timeout=this.options.timeout,w.ontimeout=()=>this._onRequestTimeout(w,E,v),w.onload=()=>this._onRequestLoad(w,v),w.send()},_onRequestLoad(m,r){if(m.status>=200&&m.status<400){let v=JSON.parse(m.response);this.options.onSuccess.call(this,v);const E=typeof this._cacheDb<"u";if(this.options.cacheEnabled&&E){let w=new Date;w.setSeconds(w.getSeconds()+this.options.cacheTTL),this._getCachedItems().then(S=>{let B;S.forEach((C,O)=>{const xt=C.query===this.options.query,yt=H.latLng(C.bounds._northEast),j=H.latLng(C.bounds._southWest),lt=H.latLngBounds(yt,j);xt&&r.equals(lt)&&(B=O)}),this._cacheDb.put("cache",{query:this.options.query,result:v,bounds:r,expires:w},B)})}this._onRequestLoadCallback(r)}else this._onRequestErrorCallback(r),this.options.onError.call(this,m);this._onRequestCompleteCallback(r)},_onRequestTimeout(m,r,v){this.options.onTimeout.call(this,m),this.options.retryOnTimeout?this._sendRequest(r):(this._onRequestErrorCallback(v),this._onRequestCompleteCallback(v))},_onRequestLoadCallback(m){this._addLoadedBounds(m),this.options.debug&&this._addResponseBoxes(this._getRequestBoxes())},_onRequestErrorCallback(m){this.options.debug&&this._removeRequestBox(this._buildRequestBox(m))},_onRequestCompleteCallback(){if(this.options.afterRequest.call(this),this._hasNextRequest()){const m=this._getNextRequest();this._removeNextRequest(),m()}else this._setRequestInProgress(!1)},async _getCachedItems(){if(!(typeof this._cacheDb<"u"))return;const r=await this._cacheDb.getAllKeys("cache"),v=await this._cacheDb.getAll("cache"),E=new Map;return v.forEach((w,S)=>{const B=r[S];E.set(B,w)}),E},async _loadCachedItems(){if(!(typeof this._cacheDb<"u")||!this._map)return;(await this._getCachedItems()).forEach((v,E)=>{new Date>v.expires?this._cacheDb.delete("cache",E):v.query===this.options.query&&(this.options.onSuccess.call(this,v.result),this._onRequestLoadCallback(v.bounds))})},onAdd(m){this._map=m,this.options.minZoomIndicatorEnabled===!0&&(this._map.zoomIndicator?(this._zoomControl=this._map.zoomIndicator,this._zoomControl._addLayer(this)):(this._zoomControl=new H.Control.MinZoomIndicator(this.options.minZoomIndicatorOptions),this._map.addControl(this._zoomControl),this._zoomControl._addLayer(this))),this.options.debug&&(this._requestBoxes=H.featureGroup().addTo(this._map),this._responseBoxes=H.featureGroup().addTo(this._map)),this._markers=H.featureGroup().addTo(this._map),this.options.cacheEnabled&&typeof this._cacheDb<"u"&&this._loadCachedItems(),this.options.noInitialRequest||this._prepareRequest(),this._map.on("moveend",this._prepareRequest,this)},onRemove(m){H.LayerGroup.prototype.onRemove.call(this,m),this.options.minZoomIndicatorEnabled===!0&&this._map.zoomIndicator&&(this._zoomControl._removeLayer(this),this._map.removeControl(this._zoomControl),this._zoomControl=null,this._map.zoomIndicator=null),this.options.debug&&(this._map.removeLayer(this._requestBoxes),this._map.removeLayer(this._responseBoxes)),this._resetData(),this._map.removeLayer(this._markers),this._map.off("moveend",this._prepareRequest,this)},setQuery(m){this.options.query=m,this._resetData(),this._prepareRequest()},_resetData(){this._ids={},this._loadedBounds=[],this._requestInProgress=!1,this._markers.clearLayers(),this.options.debug&&(this._requestBoxes.clearLayers(),this._responseBoxes.clearLayers())},getData(){return this._data}});H.OverPassLayer=bs;H.overpassLayer=m=>new H.OverPassLayer(m);function ar(){const m=Bt([]),r=Bt(!0),v=`
    (
      node({{bbox}})[amenity~"^(fire_station|hospital)$"];
      node({{bbox}})[amenity~"^(hospital)$"];
      relation({{bbox}})[amenity~"^(hospital)$"];
      node({{bbox}})[healthcare~"^(hospital|clinic)$"];
      relation({{bbox}})[healthcare~"^(hospital|clinic)$"];
    );
    out;
  `,E=(S={})=>(S.minZoom=13,S.query=v,S.onSuccess=function(B){for(const C of B.elements){if(m.value.includes(C.id))continue;if(m.value.push(C.id),C.type!=="node")throw new Error("None node found, what shall we do?");const O=H.circle(H.latLng(C.lat,C.lon),20,{stroke:!0,color:"#0f57b4",weight:2,fillColor:"#e3e823"});O.bindPopup(H.popup().setContent(`
            <div><strong>${C.tags.name}</strong></div>
            <div>${C.tags.amenity}</div>
          `)),this._markers.addLayer(O)}r.value=!1},new bs(S));return{init:S=>S&&S.addLayer(E()),loading:r}}function lr(){const m=navigator.geolocation||null;let r=B=>B,v=B=>B;return{init:()=>{m==null||m.getCurrentPosition(r,v)},onAllowed:B=>{r=B},onDenied:B=>{v=B}}}const hr={key:0},ur={key:1},fr={key:2},cr=At({__name:"TheMap",setup(m){const r=Bt(null),v=Bt(null),E=Bt(""),{t:w}=fe(),{init:S,map:B}=qo(),{init:C,loading:O}=ar(),{init:xt,onAllowed:yt,onDenied:j}=lr(),lt=async pt=>{if(await wo(),S(r.value,pt),!B.value)throw new Error("Your map was not initialized.");C(B.value)};return yt(pt=>{v.value=!0,lt([pt.coords.latitude,pt.coords.longitude])}),j(pt=>{pt.code===1&&(E.value="Access to geo location not granted."),pt.code===2&&(E.value="Could not retrieve your current location."),pt.code===3&&(E.value="Timout"),v.value=!1}),Co(()=>xt()),(pt,Lt)=>v.value===null?(st(),ft("div",hr,"Waiting for geo location...")):v.value?(st(),ft("div",fr,[ot(O)?(st(),Ue(Go,{key:0,class:"the-info",label:`${ot(w)("loading_safe_places")}...`},null,8,["label"])):Xi("",!0),Qt(Nn,null,{default:Ce(()=>[Yi(Xt(ot(w)("index.safe_places_intro")),1)]),_:1}),Yt("div",{class:xs({transparent:ot(O)})},[Yt("div",{id:"the-map",ref_key:"mapTag",ref:r},null,512)],2)])):(st(),ft("div",ur,Xt(E.value),1))}});const dr=ee(cr,[["__scopeId","data-v-f5b43ac5"]]);function pr(){const{t:m}=fe();return{safeLink:v=>{window.confirm(m("index.safe_link_note"))&&(self.location.href=v)}}}const _r=m=>(To("data-v-f007fc73"),m=m(),Io(),m),mr={class:"the-modules"},vr=["href"],yr=_r(()=>Yt("br",null,null,-1)),gr={class:"the-small"},Pr=At({__name:"TheModules",setup(m){const{t:r}=fe(),{configuration:v,currentModule:E}=we(),{safeLink:w}=pr(),S=()=>{E.value={component:dr}};return(B,C)=>(st(),ft("div",mr,[Yt("a",{class:"the-module",href:`tel:${ot(v).institution.phone}`},[Yi(Xt(ot(r)("call_institution",{institution:ot(v).institution.name})),1),yr,Yt("span",gr,Xt(ot(v).institution.phone),1)],8,vr),Yt("a",{class:"the-module",onClick:C[0]||(C[0]=O=>S())},Xt(ot(r)("find_a_safe_help_resource")),1),ot(v).institution.chat?(st(),ft("a",{key:0,class:"the-module",onClick:C[1]||(C[1]=O=>ot(w)(ot(v).institution.chat))},Xt(ot(r)("go_to_live_chat")),1)):Xi("",!0)]))}});const xr=ee(Pr,[["__scopeId","data-v-f007fc73"]]),Lr=["innerHTML"],Cr=At({__name:"TheContentPage",props:{contentPage:null},setup(m){const r=m;return(v,E)=>(st(),ft(Ls,null,[Qt(Cs,null,{default:Ce(()=>[Yi(Xt(r.contentPage.title),1)]),_:1}),Qt(Nn,null,{default:Ce(()=>[Yt("div",{innerHTML:r.contentPage.content},null,8,Lr)]),_:1})],64))}}),Mn=Bt(""),Ps=document.getElementById("vida-script");Mn.value=Ps instanceof HTMLScriptElement?Ps.src.split("/").slice(0,-1).join("/")+"/":"/";function wr(){return{baseUrl:Mn,replacePublicPaths:r=>r.replaceAll("__public/",Mn.value)}}function Tr(){const{configuration:m}=we(),{replacePublicPaths:r}=wr(),{t:v}=fe();if(!m.value)throw new Error("Content pages can not be provided before initializing configuration");const E=Bt([{title:v("content_page.universal_hand_signal.title"),content:v("content_page.universal_hand_signal.content")},{title:v("content_page.what_can_you_do.title"),content:v("content_page.what_can_you_do.content")},{title:`Information about ${m.value.institution.name}`,content:`${m.value.institution.information}`},{title:v("content_page.about_this_widget.title"),content:v("content_page.about_this_widget.content")}]);return{contentPages:Bt(E.value.map(S=>({title:S.title,content:r(S.content)})))}}const Ir={class:"the-content-pages"},br=["onClick"],Sr=At({__name:"TheContentPages",setup(m){const{currentModule:r}=we(),{contentPages:v}=Tr(),E=w=>{r.value={component:Cr,props:{contentPage:w}}};return(w,S)=>(st(),ft("div",Ir,[(st(!0),ft(Ls,null,bo(ot(v),B=>(st(),ft("div",{key:B.title},[Yt("a",{href:"#",onClick:So(C=>E(B),["prevent"])},Xt(B.title),9,br)]))),128))]))}});const Er=ee(Sr,[["__scopeId","data-v-f3da26ff"]]),Or=At({__name:"TheBackButton",setup(m){const{t:r}=fe(),{currentModule:v}=we(),E=()=>{v.value=null};return(w,S)=>(st(),ft("div",{class:"the-back",onClick:E},"< "+Xt(ot(r)("back")),1))}});const Br=ee(Or,[["__scopeId","data-v-4ae77788"]]),Ar={class:"the-help-center"},Mr={key:0},Nr={key:1},Dr=At({__name:"TheHelpCenter",setup(m){const{currentModule:r}=we();return(v,E)=>(st(),ft("div",Ar,[ot(r)?(st(),Ue(Br,{key:0})):Xi("",!0),Qt(Ao,null,{default:Ce(()=>[ot(r)?(st(),ft("div",Nr,[(st(),Ue(Bo(ot(r).component),Eo(Oo(ot(r).props)),null,16))])):(st(),ft("div",Mr,[Qt(Do),Qt(zo),Qt(xr),Qt(Er)]))]),_:1})]))}});const Yr=ee(Dr,[["__scopeId","data-v-59312bc9"]]);export{Yr as default};
